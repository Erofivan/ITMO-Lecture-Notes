// Файл определяет базовый интерфейс для всех типов выражений.
// Это корень иерархии выражений, который позволяет работать с любыми выражениями
// единообразно — будь то константы, переменные, бинарные операции или декораторы.
// Применяется паттерн Composite для построения древовидной структуры выражений.

namespace Workshop2.Expressions.Expressions;

// Интерфейс IExpression — базовый контракт для всех математических выражений.
// Паттерн Composite: этот интерфейс представляет как простые (листья дерева),
// так и составные (узлы дерева) компоненты выражений. Благодаря этому можно
// строить сложные выражения из простых, комбинируя их произвольным образом.
//
// Например:
// - Простое выражение: константа 5
// - Составное выражение: (x + 1) * y
// - Ещё более сложное: ((x + 1) * y) - (z / 2)
public interface IExpression
{
    // Возвращает строковое представление выражения для отображения.
    // Это позволяет "распечатать" выражение в читаемом виде.
    // Например: "(x + 1)", "5", "((2 * 3) + y)"
    // Возвращает: строковое представление выражения
    string Format();

    // Вычисляет выражение в заданном контексте.
    // Параметры:
    //   context — контекст вычисления, содержащий значения переменных
    // Возвращает: результат вычисления (полный или частичный)
    //
    // Важная особенность: вычисление может быть как полным (Full), так и частичным (Partial).
    // Полное вычисление происходит, когда все переменные известны.
    // Частичное — когда не хватает значений некоторых переменных,
    // но часть выражения можно упростить.
    ExpressionEvaluationResult Evaluate(IExpressionEvaluationContext context);
}
