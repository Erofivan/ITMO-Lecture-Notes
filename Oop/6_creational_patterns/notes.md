# –ü–æ—Ä–æ–∂–¥–∞—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (Creational Patterns)


---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ (Factory Method)](#—Ñ–∞–±—Ä–∏—á–Ω—ã–π-–º–µ—Ç–æ–¥-factory-method)
3. [–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ (Abstract Factory)](#–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è-—Ñ–∞–±—Ä–∏–∫–∞-abstract-factory)
4. [–°—Ç—Ä–æ–∏—Ç–µ–ª—å (Builder)](#—Å—Ç—Ä–æ–∏—Ç–µ–ª—å-builder)
5. [–ü—Ä–æ—Ç–æ—Ç–∏–ø (Prototype)](#–ø—Ä–æ—Ç–æ—Ç–∏–ø-prototype)
6. [–û–¥–∏–Ω–æ—á–∫–∞ (Singleton)](#–æ–¥–∏–Ω–æ—á–∫–∞-singleton)

---


---

## –í–≤–µ–¥–µ–Ω–∏–µ

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —á–∞—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–ø—Ä–æ—Å—Ç–æ–π –∑–∞–¥–∞—á–µ–π. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±—ä–µ–∫—Ç—ã —Ç—Ä–µ–±—É—é—Ç —Å–ª–æ–∂–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–ª–∏ –≤—ã–±–æ—Ä–∞ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –≤ —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∂—ë—Å—Ç–∫–æ–π —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞, –∑–∞—Ç—Ä—É–¥–Ω–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å–ª–æ–∂–Ω–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.

**–ü–æ—Ä–æ–∂–¥–∞—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã** (Creational Patterns) ‚Äî —ç—Ç–æ –≥—Ä—É–ø–ø–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤. –û–Ω–∏ –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ —É–¥–æ–±–Ω–æ–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏–ª–∏ —Ü–µ–ª—ã—Ö —Å–µ–º–µ–π—Å—Ç–≤ –æ–±—ä–µ–∫—Ç–æ–≤, –ø—Ä–∏ —ç—Ç–æ–º —Å–∫—Ä—ã–≤–∞—è –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –≥–∏–±–∫–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –ø–æ—Ä–æ–∂–¥–∞—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã?

–ü–æ—Ä–æ–∂–¥–∞—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–µ—à–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

- **–°–Ω–∏–∂–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏** ‚Äî –∫–æ–¥ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤, –∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è–º–∏
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤** ‚Äî –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –ª–æ–≥–∏–∫–∏ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏—è
- **–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –≥–∏–±–∫–æ—Å—Ç–∏** ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω—è—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å —Ç–∏–ø—ã —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **–°–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ SOLID** ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏ –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

–í —ç—Ç–æ–π –ª–µ–∫—Ü–∏–∏ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—è—Ç—å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ä–æ–∂–¥–∞—é—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏ –Ω–∞—É—á–∏–º—Å—è –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏—Ö –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–∞ C#.

---


---

## –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ (Factory Method)

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ —Å—É—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω–∞

**–§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥** (Factory Method) ‚Äî —ç—Ç–æ –ø–æ—Ä–æ–∂–¥–∞—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –±–∞–∑–æ–≤–æ–º –∫–ª–∞—Å—Å–µ, –ø–æ–∑–≤–æ–ª—è—è –ø–æ–¥–∫–ª–∞—Å—Å–∞–º –∏–∑–º–µ–Ω—è—Ç—å —Ç–∏–ø —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º.

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è**: –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä `new`, –º—ã –¥–µ–ª–µ–≥–∏—Ä—É–µ–º —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º—É –º–µ—Ç–æ–¥—É (—Ñ–∞–±—Ä–∏—á–Ω–æ–º—É), –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ –ø–æ–¥–∫–ª–∞—Å—Å–∞—Ö.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã —Å–æ–∑–¥–∞—ë—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–∑–æ–≤—ã–º–∏ –ø–µ—Ä–µ–≤–æ–∑–∫–∞–º–∏. –°–ø–µ—Ä–≤–∞ –≤—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç–µ –ø–µ—Ä–µ–≤–æ–∑–∏—Ç—å —Ç–æ–≤–∞—Ä—ã —Ç–æ–ª—å–∫–æ –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è—Ö. –ü–æ—ç—Ç–æ–º—É –≤–µ—Å—å –≤–∞—à –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –∫–ª–∞—Å—Å–∞ `–ì—Ä—É–∑–æ–≤–∏–∫`.

–í –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç –≤–∞—à–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞—Å—Ç–æ–ª—å–∫–æ –∏–∑–≤–µ—Å—Ç–Ω–æ–π, —á—Ç–æ –º–æ—Ä—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–∏ –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –∏ –ø—Ä–æ—Å—è—Ç –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–æ—Ä—Å–∫–æ–π –ª–æ–≥–∏—Å—Ç–∏–∫–∏ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É. –û—Ç–ª–∏—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏, –ø—Ä–∞–≤–¥–∞? –ù–æ –∫–∞–∫ –Ω–∞—Å—á—ë—Ç –∫–æ–¥–∞? –ë–æ–ª—å—à–∞—è —á–∞—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞ –∂—ë—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –∫–ª–∞—Å—Å–∞–º `–ì—Ä—É–∑–æ–≤–∏–∫–æ–≤`

![](src/factory_method/factory_method_proble.png)

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É –∫–ª–∞—Å—Å—ã –º–æ—Ä—Å–∫–∏—Ö `–°—É–¥–æ–≤`, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–µ—Ä–µ–ª–æ–ø–∞—Ç–∏—Ç—å –≤—Å—é –ø—Ä–æ–≥—Ä–∞–º–º—É. –ë–æ–ª–µ–µ —Ç–æ–≥–æ, –µ—Å–ª–∏ –≤—ã –ø–æ—Ç–æ–º —Ä–µ—à–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É –µ—â—ë –æ–¥–∏–Ω –≤–∏–¥ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞, —Ç–æ –≤—Å—é —ç—Ç—É —Ä–∞–±–æ—Ç—É –ø—Ä–∏–¥—ë—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–∏—Ç—å.

–í –∏—Ç–æ–≥–µ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–∂–∞—Å–∞—é—â–∏–π –∫–æ–¥, –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π —É—Å–ª–æ–≤–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ç–æ –∏–ª–∏ –∏–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–ª–∞—Å—Å–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞.

–†–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ–∞–±—Ä–∏—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞:

–ü–∞—Ç—Ç–µ—Ä–Ω –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –Ω–µ –Ω–∞–ø—Ä—è–º—É—é, –∏—Å–ø–æ–ª—å–∑—É—è –æ–ø–µ—Ä–∞—Ç–æ—Ä new, –∞ –∫–æ—Å–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ –æ—Å–æ–±–æ–≥–æ —Ñ–∞–±—Ä–∏—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞.

![](src/factory_method/factory_method_logistics.png)

–ù–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥, —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º: –º—ã –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏ –≤—ã–∑–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∏–∑ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ü–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ –¥—Ä—É–≥–æ–π.

–ß—Ç–æ–±—ã —ç—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∞, –≤—Å–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ü–æ–¥–∫–ª–∞—Å—Å—ã —Å–º–æ–≥—É—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –æ–±—ä–µ–∫—Ç—ã —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤, —Å–ª–µ–¥—É—é—â–∏—Ö –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.

![](src/factory_method/factory_method_interface.png)

–¢–µ–ø–µ—Ä—å –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –≤ –ø–æ–¥–∫–ª–∞—Å—Å–µ, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å —Ç–∏–ø —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞.

–ù–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∞—Å—Å—ã `Truck` –∏ `Ship` —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Transport` —Å –º–µ—Ç–æ–¥–æ–º –¥–æ—Å—Ç–∞–≤–∏—Ç—å. –ö–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∏—Ö –∫–ª–∞—Å—Å–æ–≤ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥ –ø–æ-—Å–≤–æ–µ–º—É: –≥—Ä—É–∑–æ–≤–∏–∫–∏ –≤–µ–∑—É—Ç –≥—Ä—É–∑—ã –ø–æ –∑–µ–º–ª–µ, –∞ —Å—É–¥–∞ ‚Äî –ø–æ –º–æ—Ä—é. –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –≤ –∫–ª–∞—Å—Å–µ `RoadLogistics` –≤–µ—Ä–Ω—ë—Ç –æ–±—ä–µ–∫—Ç-–≥—Ä—É–∑–æ–≤–∏–∫, –∞ –∫–ª–∞—Å—Å `SeaLogistics` ‚Äî –æ–±—ä–µ–∫—Ç-—Å—É–¥–Ω–æ

![](src/factory_method/factory_method_result.png)

–î–ª—è –∫–ª–∏–µ–Ω—Ç–∞ —Ñ–∞–±—Ä–∏—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –Ω–µ—Ç —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É —ç—Ç–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –±—É–¥–µ—Ç —Ç—Ä–∞–∫—Ç–æ–≤–∞—Ç—å –∏—Ö –∫–∞–∫ –Ω–µ–∫–∏–π –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π `Transport`. –î–ª—è –Ω–µ–≥–æ –±—É–¥–µ—Ç –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –æ–±—ä–µ–∫—Ç –∏–º–µ–ª –º–µ—Ç–æ–¥ `Deliver`, –∞ –∫–∞–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –Ω–µ –≤–∞–∂–Ω–æ.

![](src/factory_method/factory_method_logisitics_scheme.png)

1. Product –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Å–æ–∑–¥–∞—Ç–µ–ª—å –∏ –µ–≥–æ –ø–æ–¥–∫–ª–∞—Å—Å—ã.
2. `Concrete Products` —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–¥ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤. –ü—Ä–æ–¥—É–∫—Ç—ã –±—É–¥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π, –Ω–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É –Ω–∏—Ö –±—É–¥–µ—Ç –æ–±—â–∏–π.
3. `Creator` –æ–±—ä—è–≤–ª—è–µ—Ç —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤. –í–∞–∂–Ω–æ, —á—Ç–æ–±—ã —Ç–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å–æ–≤–ø–∞–¥–∞–ª —Å –æ–±—â–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º `Product`.
–ó–∞—á–∞—Å—Ç—É—é —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –æ–±—ä—è–≤–ª—è—é—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º, —á—Ç–æ–±—ã –∑–∞—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ –ø–æ–¥–∫–ª–∞—Å—Å—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ–≥–æ –ø–æ-—Å–≤–æ–µ–º—É. –ù–æ –æ–Ω –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏ –Ω–µ–∫–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç.
–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ, –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π —Å–æ–∑–¥–∞—Ç–µ–ª—è. –û–±—ã—á–Ω–æ –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –∏ –¥—Ä—É–≥–æ–π –ø–æ–ª–µ–∑–Ω—ã–π –∫–æ–¥ —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º. –ê–Ω–∞–ª–æ–≥–∏—è: –±–æ–ª—å—à–∞—è —Å–æ—Ñ—Ç–≤–µ—Ä–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ü–µ–Ω—Ç—Ä –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤, –Ω–æ –æ—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –∫–æ–º–ø–∞–Ω–∏–∏ ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã, –∞ –Ω–µ –≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤.
4. `Concrete Creators` –ø–æ-—Å–≤–æ–µ–º—É —Ä–µ–∞–ª–∏–∑—É—é—Ç —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, –ø—Ä–æ–∏–∑–≤–æ–¥—è —Ç–µ –∏–ª–∏ –∏–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã.
–§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –Ω–µ –æ–±—è–∑–∞–Ω –≤—Å—ë –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã. –ï–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑ –∫–∞–∫–æ–≥–æ-—Ç–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏–ª–∏ –∫—ç—à–∞.

–ù–∞–ø–∏—à–µ–º –≤—Å–µ–≤–¥–æ–∫–æ–¥ –¥–ª—è –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞:

![](src/factory_method/factory_method_pseudo_example.png)

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –Ω–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞—è –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–ª–∞—Å—Å–∞–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

–§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –æ–±—ä—è–≤–ª–µ–Ω –≤ –∫–ª–∞—Å—Å–µ –¥–∏–∞–ª–æ–≥–æ–≤. –ï–≥–æ –ø–æ–¥–∫–ª–∞—Å—Å—ã –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Å–∏—Å—Ç–µ–º–∞–º. –ë–ª–∞–≥–æ–¥–∞—Ä—è —Ñ–∞–±—Ä–∏—á–Ω–æ–º—É –º–µ—Ç–æ–¥—É, –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –¥–∏–∞–ª–æ–≥–æ–≤ –ø–æ–¥ –∫–∞–∂–¥—É—é —Å–∏—Å—Ç–µ–º—É. –ü–æ–¥–∫–ª–∞—Å—Å—ã –º–æ–≥—É—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –ø–æ—á—Ç–∏ –≤–µ—Å—å –∫–æ–¥ –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞, –∏–∑–º–µ–Ω—è—è —Ç–∏–ø—ã –∫–Ω–æ–ø–æ–∫ –∏ –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±–∞–∑–æ–≤—ã–π –∫–æ–¥ —Å—Ç—Ä–æ–∏—Ç –æ–∫–Ω–∞ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–∏–∞–ª–æ–≥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–Ω–æ–ø–∫–∞–º–∏ —á–µ—Ä–µ–∑ –∏—Ö –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ü–æ—ç—Ç–æ–º—É, –∫–∞–∫—É—é –≤–∞—Ä–∏–∞—Ü–∏—é –∫–Ω–æ–ø–æ–∫ –Ω–∏ –≤–µ—Ä–Ω—É–ª –±—ã —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, –¥–∏–∞–ª–æ–≥ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ä–∞–±–æ—á–∏–º. –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –∫–Ω–æ–ø–æ–∫, –æ—Å—Ç–∞–≤–ª—è—è –ø–æ–¥–∫–ª–∞—Å—Å–∞–º —Ä–µ—à–µ–Ω–∏–µ –æ —Ç–æ–º, –∫–∞–∫–æ–π —Ç–∏–ø –∫–Ω–æ–ø–æ–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å.

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–Ω–æ —á–µ–º –±–æ–ª—å—à–µ —Ç–∞–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —Ç–µ–º –±–ª–∏–∂–µ —ç—Ç–æ –±—É–¥–µ—Ç —É–∂–µ –∫ –¥—Ä—É–≥–æ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º "–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–π —Ñ–∞–±—Ä–∏–∫–∞")


**–ü—Ä–∏–º–µ—Ä 1: –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã**

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –æ–∫–æ–Ω –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º (Windows –∏ Web). 
–ö–∞–∂–¥–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Ç–∏–ø—ã –∫–Ω–æ–ø–æ–∫, –Ω–æ –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –¥–∏–∞–ª–æ–≥–æ–º –æ–¥–∏–Ω–∞–∫–æ–≤–∞.

```csharp
// === PRODUCTS (–ü—Ä–æ–¥—É–∫—Ç—ã) ===
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–Ω–æ–ø–æ–∫
// –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª—é–±—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–æ–¥—É–∫—Ç–∞
public interface IButton
{
    void Render();
    void OnClick(Action handler);
}

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç: –∫–Ω–æ–ø–∫–∞ Windows
public class WindowsButton : IButton
{
    public void Render()
    {
        Console.WriteLine("–û—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –≤ —Å—Ç–∏–ª–µ Windows.");
    }

    public void OnClick(Action handler)
    {
        Console.WriteLine("–ù–∞–≤–µ—à–∞–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π Windows.");
        handler?.Invoke();
    }
}

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç: –∫–Ω–æ–ø–∫–∞ HTML
public class HtmlButton : IButton
{
    public void Render()
    {
        Console.WriteLine("–í–µ—Ä–Ω—É—Ç—å HTML-–∫–æ–¥ –∫–Ω–æ–ø–∫–∏.");
    }

    public void OnClick(Action handler)
    {
        Console.WriteLine("–ù–∞–≤–µ—à–∞–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –±—Ä–∞—É–∑–µ—Ä–∞.");
        handler?.Invoke();
    }
}

// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞
public abstract class Dialog
{
    public void Render()
    {
        // –í—ã–∑—ã–≤–∞–µ–º —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ - –æ–Ω –≤–µ—Ä–Ω—ë—Ç –Ω—É–∂–Ω—ã–π —Ç–∏–ø –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏
        IButton okButton = CreateButton();
        okButton.OnClick(CloseDialog);
        okButton.Render();
    }

    // –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ - –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª–∞—Å—Å–∞–º
    protected abstract IButton CreateButton();

    protected void CloseDialog()
    {
        Console.WriteLine("–ó–∞–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞...");
    }
}

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ - —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–¥—É–∫—Ç—ã –æ–¥–Ω–æ–≥–æ —Å–µ–º–µ–π—Å—Ç–≤–∞ –¥–ª—è Windows
public class WindowsDialog : Dialog
{
    protected override IButton CreateButton()
    {
        return new WindowsButton();
    }
}

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ - —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–¥—É–∫—Ç—ã –æ–¥–Ω–æ–≥–æ —Å–µ–º–µ–π—Å—Ç–≤–∞ –¥–ª—è Web
public class WebDialog : Dialog
{
    protected override IButton CreateButton()
    {
        return new HtmlButton();
    }
}

// –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
public class AppConfig
{
    public string OS { get; set; }
}

// –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
public class Application
{
    private Dialog _dialog;

    public void Initialize()
    {
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ñ–∞–π–ª–∞ –∏–ª–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
        var config = new AppConfig { OS = "Windows" }; // –ø—Ä–∏–º–µ—Ä

        if (config.OS == "Windows")
            _dialog = new WindowsDialog();
        else if (config.OS == "Web")
            _dialog = new WebDialog();
        else
            throw new Exception("Error! Unknown operating system.");
    }

    public void Main()
    {
        Initialize();
        _dialog.Render();
    }
}

// –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
public static class Program
{
    public static void Main()
    {
        var app = new Application();
        app.Main();
    }
}

```



> **–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã –ø–æ –§–∞–±—Ä–∏—á–Ω–æ–º—É –º–µ—Ç–æ–¥—É:**
> - –î–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–¥–∫–ª–∞—Å—Å–∞–º —á–µ—Ä–µ–∑ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º
> - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ –±–∞–∑–æ–≤–æ–º –∫–ª–∞—Å—Å–µ, —Å–æ–∑–¥–∞–Ω–∏–µ - –≤ –ø–æ–¥–∫–ª–∞—Å—Å–∞—Ö
> - –°–æ–±–ª—é–¥–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏ (OCP)
> - –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è —Ä–∞—Å—à–∏—Ä—è–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –∑–∞—Ä–∞–Ω–µ–µ —Ç–∏–ø–∞–º–∏



üí° **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç:**
–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º C# —á–∞—Å—Ç–æ –º–æ–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å –§–∞–±—Ä–∏—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞, –∏—Å–ø–æ–ª—å–∑—É—è dependency injection (DI) –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. 
–û–Ω–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –±–æ–ª–µ–µ –≥–∏–±–∫–∏–π –º–µ—Ö–∞–Ω–∏–∑–º —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.



üí° **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç:**
–í ASP.NET Core –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Singleton –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —Å–ª—É–∂–±:
```csharp
services.AddSingleton<IMyService, MyService>();
```
–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏.

### –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥

**

> **–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã –ø–æ –°—Ç—Ä–æ–∏—Ç–µ–ª—é:**
> - –ü–æ—à–∞–≥–æ–≤–æ —Å–æ–∑–¥–∞—ë—Ç —Å–ª–æ–∂–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
> - –û—Ç–¥–µ–ª—è–µ—Ç –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
> - Fluent Interface –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —á–∏—Ç–∞–µ–º—ã–º
> - –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞: Convenience Builder –∏ Stateful Constructor

–ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å:** 

- **–ö–æ–≥–¥–∞ –∑–∞—Ä–∞–Ω–µ–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã —Ç–∏–ø—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç–æ–≤, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤–∞—à –∫–æ–¥**
–§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –æ—Ç–¥–µ–ª—è–µ—Ç –∫–æ–¥ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –æ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —ç—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç.
–ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É, –∫–æ–¥ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å, –Ω–µ —Ç—Ä–æ–≥–∞—è –æ—Å–Ω–æ–≤–Ω–æ–π. –¢–∞–∫, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞, –≤–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ–¥–∫–ª–∞—Å—Å –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ –Ω—ë–º —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞—è –æ—Ç—Ç—É–¥–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞.
- **–ö–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ä–∞—Å—à–∏—Ä—è—Ç—å —á–∞—Å—Ç–∏ –≤–∞—à–µ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**.
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å –∫–ª–∞—Å—Å—ã –≤–∞—à–µ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ. –ù–æ –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å–æ–∑–¥–∞–≤–∞–ª –æ–±—ä–µ–∫—Ç—ã –∏–∑ —ç—Ç–∏—Ö –Ω–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤, –∞ –Ω–µ –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö?
–†–µ—à–µ–Ω–∏–µ–º –±—É–¥–µ—Ç –¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä—è—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –∂–µ–ª–∞–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω–æ –∏ –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç —ç—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. –ê –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞—é—â–∏–µ –∫–ª–∞—Å—Å—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–æ–∑–¥–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å.
–ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≥–æ—Ç–æ–≤—ã–π UI-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ù–æ –≤–æ—Ç –±–µ–¥–∞ ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–º–µ—Ç—å –∫—Ä—É–≥–ª—ã–µ –∫–Ω–æ–ø–∫–∏, –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã—Ö. –í—ã —Å–æ–∑–¥–∞—ë—Ç–µ –∫–ª–∞—Å—Å `RoundButton`. –ù–æ –∫–∞–∫ —Å–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–º—É –∫–ª–∞—Å—Å—É —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ `UIFramework`, —á—Ç–æ–±—ã –æ–Ω —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–≤–∞–ª –∫—Ä—É–≥–ª—ã–µ –∫–Ω–æ–ø–∫–∏, –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö?
–î–ª—è —ç—Ç–æ–≥–æ –≤—ã —Å–æ–∑–¥–∞—ë—Ç–µ –ø–æ–¥–∫–ª–∞—Å—Å `UIWithRoundButtons` –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞, –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç–µ –≤ –Ω—ë–º –º–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏ (–∞-–ª—è createButton) –∏ –≤–ø–∏—Å—ã–≤–∞–µ—Ç–µ —Ç—É–¥–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ –∫–ª–∞—Å—Å–∞ –∫–Ω–æ–ø–æ–∫. –ó–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `UIWithRoundButtons` –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ `UIFramework`.
- **–ö–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ —ç–∫–æ–Ω–æ–º–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã, –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –≤–º–µ—Å—Ç–æ –ø–æ—Ä–æ–∂–¥–µ–Ω–∏—è –Ω–æ–≤—ã—Ö**.
–¢–∞–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –æ–±—ã—á–Ω–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ç—è–∂—ë–ª—ã–º–∏ —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏, —Ç–∞–∫–∏–º–∏, –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∏ —Ç. –¥.
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —Å–∫–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏–π –≤–∞–º –Ω—É–∂–Ω–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å, —á—Ç–æ–±—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã:
–°–Ω–∞—á–∞–ª–∞ –≤–∞–º —Å–ª–µ–¥—É–µ—Ç —Å–æ–∑–¥–∞—Ç—å –æ–±—â–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, —á—Ç–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å –≤ –Ω—ë–º –≤—Å–µ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–≥–ª—è–Ω—É—Ç—å –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Ç–∞–º –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –æ–±—ä–µ–∫—Ç, –∞ –∑–∞—Ç–µ–º –≤–µ—Ä–Ω—É—Ç—å –µ–≥–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É –∫–æ–¥—É, –Ω–æ –µ—Å–ª–∏ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π, –Ω–µ –∑–∞–±—ã–≤ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.
–í–µ—Å—å —ç—Ç–æ—Ç –∫–æ–¥ –Ω—É–∂–Ω–æ –∫—É–¥–∞-—Ç–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Å–æ—Ä—è—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥.
–°–∞–º—ã–º —É–¥–æ–±–Ω—ã–º –º–µ—Å—Ç–æ–º –±—ã–ª –±—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞, –≤–µ–¥—å –≤—Å–µ —ç—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤. –ù–æ, —É–≤—ã, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã, –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä.
–ó–Ω–∞—á–∏—Ç, –Ω—É–∂–µ–Ω –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±—ã –æ—Ç–¥–∞–≤–∞–ª –∫–∞–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ, —Ç–∞–∫ –∏ –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã. –ò–º –∏ —Å—Ç–∞–Ω–µ—Ç —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥.

### –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:**
1. –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –≤—Å–µ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∫ –æ–±—â–µ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.
2. –í –∫–ª–∞—Å—Å–µ, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ø—Ä–æ–¥—É–∫—Ç—ã, —Å–æ–∑–¥–∞–π—Ç–µ –ø—É—Å—Ç–æ–π —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥. –í –∫–∞—á–µ—Å—Ç–≤–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ —Ç–∏–ø–∞ —É–∫–∞–∂–∏—Ç–µ –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–æ–¥—É–∫—Ç–∞.
3. –ó–∞—Ç–µ–º –ø—Ä–æ–π–¥–∏—Ç–µ—Å—å –ø–æ –∫–æ–¥—É –∫–ª–∞—Å—Å–∞ –∏ –Ω–∞–π–¥–∏—Ç–µ –≤—Å–µ —É—á–∞—Å—Ç–∫–∏, —Å–æ–∑–¥–∞—é—â–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã. –ü–æ–æ—á–µ—Ä—ë–¥–Ω–æ –∑–∞–º–µ–Ω–∏—Ç–µ —ç—Ç–∏ —É—á–∞—Å—Ç–∫–∏ –≤—ã–∑–æ–≤–∞–º–∏ —Ñ–∞–±—Ä–∏—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞, –ø–µ—Ä–µ–Ω–æ—Å—è –≤ –Ω–µ–≥–æ –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤.
–í —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, –≤–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–∏–¥—ë—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—â–∏—Ö, –∫–∞–∫–æ–π –∏–∑ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å.
–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —É–¥—Ä—É—á–∞—é—â–µ. –í –Ω—ë–º –±—É–¥–µ—Ç –∂–∏—Ç—å –±–æ–ª—å—à–æ–π —É—Å–ª–æ–≤–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä, –≤—ã–±–∏—Ä–∞—é—â–∏–π –∫–ª–∞—Å—Å —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞. –ù–æ –Ω–µ –≤–æ–ª–Ω—É–π—Ç–µ—Å—å, –º—ã –≤–æ—Ç-–≤–æ—Ç –∏—Å–ø—Ä–∞–≤–∏–º —ç—Ç–æ.
4. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∑–∞–≤–µ–¥–∏—Ç–µ –ø–æ–¥–∫–ª–∞—Å—Å –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≤ –Ω—ë–º —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Ç—É–¥–∞ –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –∏–∑ —Å—É–ø–µ—Ä–∫–ª–∞—Å—Å–∞.
5. –ï—Å–ª–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–¥–∫–ª–∞—Å—Å–æ–≤ —Å–æ–∑–¥–∞—Ç–µ–ª—è, –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥—É–º–∞—Ç—å –æ –≤–≤–µ–¥–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–≥–æ –ø–æ–¥–∫–ª–∞—Å—Å–∞.
–ù–∞–ø—Ä–∏–º–µ—Ä, —É –≤–∞—Å –µ—Å—Ç—å –∫–ª–∞—Å—Å `Mail` —Å –ø–æ–¥–∫–ª–∞—Å—Å–∞–º–∏ `AviaMail` –∏ `GroundMail`, –∞ —Ç–∞–∫–∂–µ –∫–ª–∞—Å—Å—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ `Plane`, `Bus` –∏ `Train`. `AviaMail` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç `Plane`, –Ω–æ –¥–ª—è `GroundMail` –µ—Å—Ç—å —Å—Ä–∞–∑—É –¥–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–∞. –í—ã –º–æ–≥–ª–∏ –±—ã —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ–¥–∫–ª–∞—Å—Å –ø–æ—á—Ç—ã –¥–ª—è –ø–æ–µ–∑–¥–æ–≤, –Ω–æ –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –∏ –ø–æ-–¥—Ä—É–≥–æ–º—É. –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ `GroundMail` –∞—Ä–≥—É–º–µ–Ω—Ç, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—â–∏–π —Ç–∏–ø —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞.
6. –ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ —Å—Ç–∞–ª –ø—É—Å—Ç—ã–º, –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º. –ï—Å–ª–∏ –≤ –Ω—ë–º —á—Ç–æ-—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å ‚Äî –Ω–µ –±–µ–¥–∞, —ç—Ç–æ –±—É–¥–µ—Ç –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞

–ü–∞—Ç—Ç–µ—Ä–Ω –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

- **Product** (–ü—Ä–æ–¥—É–∫—Ç) ‚Äî –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **Concrete Product** (–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç) ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–æ–¥—É–∫—Ç–∞  
- **Creator** (–°–æ–∑–¥–∞—Ç–µ–ª—å) ‚Äî –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –æ–±—ä—è–≤–ª—è—é—â–∏–π —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥
- **Concrete Creator** (–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–æ–∑–¥–∞—Ç–µ–ª—å) ‚Äî –ø–æ–¥–∫–ª–∞—Å—Å—ã, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤

```mermaid
classDiagram
    class Product {
        <<interface>>
        +Operation()
    }
    
    class ConcreteProductA {
        +Operation()
    }
    
    class ConcreteProductB {
        +Operation()
    }
    
    class Creator {
        <<abstract>>
        +SomeOperation()
        #FactoryMethod()* Product
    }
    
    class ConcreteCreatorA {
        #FactoryMethod() Product
    }
    
    class ConcreteCreatorB {
        #FactoryMethod() Product
    }
    
    Product <|.. ConcreteProductA : implements
    Product <|.. ConcreteProductB : implements
    Creator <|-- ConcreteCreatorA : extends
    Creator <|-- ConcreteCreatorB : extends
    Creator ..> Product : uses
    ConcreteCreatorA ..> ConcreteProductA : creates
    ConcreteCreatorB ..> ConcreteProductB : creates

```

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –µ—â—ë –æ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä: –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –º—ã –ø–∏—à–µ–º —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é –∑–∞–ø–∏—Å—å (record)
public record OrderItem(decimal Price, int Amount)
{
    public decimal Cost => Price * Amount;
}

public record Order(IEnumerable<OrderItem> Items)
{
    public decimal TotalCost => Items.Sum(x => x.Cost);
}

public record CashPayment(decimal Amount);

public class PaymentCalculator
{
    public CashPayment Calculate(Order order)
    {
        var totalCost = order.TotalCost;

        // Apply discounts and coupons
        ...

        return new CashPayment(totalCost);
    }
}

```

–ó–¥–µ—Å—å —É –Ω–∞—Å –µ—Å—Ç—å –∫–ª–∞—Å—Å `PaymentCalculator`. –ï–≥–æ –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑ `Order`, –ø–æ—Å—á–∏—Ç–∞—Ç—å –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å `totalCost`, –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–∞–∫–∏–µ-—Ç–æ —Å–∫–∏–¥–∫–∏ (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞) –∏ –≤–µ—Ä–Ω—É—Ç—å –ø–ª–∞—Ç—ë–∂: `return new CashPayment(totalCost);.`

–í —á—ë–º –∑–¥–µ—Å—å –ø—Ä–æ–±–ª–µ–º–∞? –ù–∞—à `PaymentCalculator` –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ç–∏–ø—É –æ–ø–ª–∞—Ç—ã ‚Äî `CashPayment`. –ü–æ —Ñ–∞–∫—Ç—É –º—ã –ø—Ä–∏–º–µ–Ω—è–µ–º –∫–∞–∫–∏–µ-—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫—É–ø–æ–Ω—ã –∏ —Å–∫–∏–¥–∫–∏, –∞ –ø–æ—Ç–æ–º –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–ø–ª–∞—Ç—É –Ω–∞–ª–∏—á–Ω—ã–º–∏ `CashPayment` 

–ê —á—Ç–æ, –µ—Å–ª–∏ –∑–∞–≤—Ç—Ä–∞ –±–∏–∑–Ω–µ—Å —Å–∫–∞–∂–µ—Ç: "–ú—ã —Ö–æ—Ç–∏–º –¥–æ–±–∞–≤–∏—Ç—å –æ–ø–ª–∞—Ç—É –±–∞–Ω–∫–æ–≤—Å–∫–∏–º –ø–µ—Ä–µ–≤–æ–¥–æ–º"? –ò–ª–∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π? –ù–∞–º –ø—Ä–∏–¥—ë—Ç—Å—è:
- –õ–∏–±–æ –ª–µ–∑—Ç—å –≤–Ω—É—Ç—Ä—å PaymentCalculator –∏ –¥–æ–ø–∏—Å—ã–≤–∞—Ç—å if/switch (—á—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –û—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–ó–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏).
- –õ–∏–±–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å—é –ª–æ–≥–∏–∫—É Calculate –≤ –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å, —Å–∫–∞–∂–µ–º, BankPaymentCalculator, –∏ –º–µ–Ω—è—Ç—å —Ç–∞–º —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É ‚Äî return new BankPayment(...). –≠—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –∫–æ–¥–∞.

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ (—á—Ç–æ –º—ã –¥–µ–ª–∞–µ–º) –∏ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è (–∫–∞–∫–æ–π –æ–±—ä–µ–∫—Ç –º—ã –≤ –∏—Ç–æ–≥–µ –ø–æ–ª—É—á–∞–µ–º) —Å–º–µ—à–∞–Ω—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ. –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã —ç—Ç—É —Å–≤—è–∑—å —Ä–∞–∑–æ—Ä–≤–∞—Ç—å.

–ü–∞—Ç—Ç–µ—Ä–Ω –≤–≤–æ–¥–∏—Ç –¥–≤–∞ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–Ω—è—Ç–∏—è: product –∏ creator
- `Product` ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π —Ç–∏–ø –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö–æ—Ç–∏–º —Å–æ–∑–¥–∞–≤–∞—Ç—å. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ —ç—Ç–æ –±—É–¥–µ—Ç –Ω–µ `CashPayment`, –∞ –Ω–µ–∫–∏–π –æ–±—â–∏–π `IPayment`. –ù–∞—Å–ª–µ–¥–Ω–∏–∫–∏ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ (`CashPayment`, `BankPayment`, `CryptoPayment`) ‚Äî —ç—Ç–æ –ø—Ä–æ–¥—É–∫—Ç—ã –ø–æ–¥ –∫–∞–∂–¥—É—é –Ω—É–∂–Ω—É—é –Ω–∞–º —Å–∏—Ç—É–∞—Ü–∏—é (–≥–¥–µ-—Ç–æ –±—É–¥–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ –ø–ª–∞—Ç–µ–ª—å—â–∏–∫–∞, –≥–¥–µ-—Ç–æ –±—É–¥–µ—Ç –Ω–æ–º–µ—Ä –∫—Ä–∏–ø—Ç–æ-–∫–æ—à–µ–ª—å–∫–∞ –∏ —Ç–¥. –ê –≤ –Ω–∞–ª–∏—á–∫–µ –Ω–∞–º –≤–æ–æ–±—â–µ –Ω–∏—á–µ–≥–æ –∑–Ω–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ - –¥–∞ –∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ).
- `Creator` ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π —Ç–∏–ø, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞, –≤ —Ä–∞–º–∫–∞—Ö –∫–æ—Ç–æ—Ä–æ–π —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ `Product`. –ù–∞–ø—Ä–∏–º–µ—Ä, `PaymentCalculator`. –û–Ω –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–µ—Ç–æ–¥ `Calculate`.

–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è –≤ —Ç–æ–º, —á—Ç–æ `Creator` –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä `Product` –æ–Ω —Å–æ–∑–¥–∞—ë—Ç. –û–Ω –ø—Ä–æ—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç: "–ú–Ω–µ –Ω—É–∂–µ–Ω –ø—Ä–æ–¥—É–∫—Ç".
–ê –≤–æ—Ç –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ creator'–∞ (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–æ–∑–¥–∞—Ç–µ–ª–∏) ‚Äî –æ–Ω–∏-—Ç–æ –∏ –±—É–¥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤.
–¢–æ –µ—Å—Ç—å `Creator` –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ product'–∞ —Å–≤–æ–∏–º –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞–º. –ú–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç, –∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –Ω–∞—à –∫–æ–¥ –ø—Ä–µ–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —ç—Ç–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPayment
{
    decimal Amount { get; }
}

public record CashPayment(
    decimal Amount) : IPayment;

public record BankPayment(
    decimal Amount,
    string ReceiverAccountId) : IPayment;

```

–ú—ã –≤–≤–µ–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IPayment`. –≠—Ç–æ –Ω–∞—à –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π product. –¢–µ–ø–µ—Ä—å `CashPayment` –∏ –Ω–æ–≤—ã–π `BankPayment` —Ä–µ–∞–ª–∏–∑—É—é—Ç —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –≠—Ç–æ –¥–∞—ë—Ç –Ω–∞–º –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º: –º—ã –º–æ–∂–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª—é–±—ã–º —Ç–∏–ø–æ–º –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IPayment`.

–¢–µ–ø–µ—Ä—å –≤–≤–µ–¥—ë–º —Å–æ–∑–¥–∞—Ç–µ–ª—è:

```csharp
// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
public abstract class PaymentCalculator
{
    public IPayment Calculate(Order order)
    {
        var totalCost = order.TotalCost;

        // Apply discounts and coupons
        ...

        return CreatePayment(totalCost);
    }

    protected abstract IPayment CreatePayment(decimal amount);
}

```

–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –æ—Å—Ç–∞–ª–∞—Å—å –≤—Å—è –ª–æ–≥–∏–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å–∫–∏–¥–æ–∫ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫—É–ø–æ–Ω–æ–≤ (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞), –æ–¥–Ω–∞–∫–æ Calculate —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IPayment`.
–°–∞–º–∞—è –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ —É –Ω–∞—Å –ø–æ—è–≤–∏–ª—Å—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `CreatePayment`, –∫–æ—Ç–æ—Ä—ã–π –∫–ª–∞—Å—Å—ã-–Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ –≤—ã–Ω—É–∂–¥–µ–Ω—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å.
–°–∞–º `PaymentCalculator` –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫ –µ–≥–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å. –û–Ω –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Å–≤–æ–∏—Ö –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —ç—Ç—É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é. –û–Ω protected ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ "–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∫—É—Ö–Ω—è" –∫–ª–∞—Å—Å–∞. `Calculate` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ, –Ω–æ —Å–Ω–∞—Ä—É–∂–∏ –Ω–∏–∫–æ–º—É –Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –æ —Ç–æ–º, –∫–∞–∫ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–ª–∞—Ç—ë–∂.

–¢–µ–ø–µ—Ä—å –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ç–æ, –∫–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞—à–∏—Ö —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class CashPaymentCalculator : PaymentCalculator
{
    protected override IPayment CreatePayment(decimal amount) 
        => new CashPayment(amount);
}

public class BankPaymentCalculator : PaymentCalculator
{
    private readonly string _currentReceiverAccountId;

    public BankPaymentCalculator(string currentReceiverAccountId)
    {
        _currentReceiverAccountId = currentReceiverAccountId;
    }

    protected override IPayment CreatePayment(decimal amount)
    {
        return new BankPayment(amount, _currentReceiverAccountId);
    }
}

```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ `BankPaymentCalculator`. –ï–º—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è `BankPayment` –Ω—É–∂–µ–Ω `_currentReceiverAccountId`. –ò —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞! –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –∏–º–µ–Ω–Ω–æ –µ–º—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –µ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞. –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π `PaymentCalculator` –æ–± —ç—Ç–æ–º –¥–∞–∂–µ –Ω–µ –∑–Ω–∞–µ—Ç.

–ò—Ç–∞–∫, –∫–∞–∫ —ç—Ç–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å? –°–æ–±–µ—Ä—ë–º –≤—Å—ë –≤–º–µ—Å—Ç–µ:

1. –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ —Ç–µ–ø–µ—Ä—å —Å–∞–º —Ä–µ—à–∞–µ—Ç, –∫–∞–∫–æ–π —Ç–∏–ø –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –µ–º—É –Ω—É–∂–µ–Ω.

```csharp
PaymentCalculator calculator = new CashPaymentCalculator();

// –ò–ª–∏: PaymentCalculator calculator = new BankPaymentCalculator("123456");

```

2. –ö–ª–∏–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –º–µ—Ç–æ–¥: IPayment payment = calculator.Calculate(myOrder);.
3. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ –∏–∑ PaymentCalculator.Calculate.
4. –ö–æ–≥–¥–∞ Calculate –¥–æ—Ö–æ–¥–∏—Ç –¥–æ —Å—Ç—Ä–æ–∫–∏ return CreatePayment(totalCost);, –±–ª–∞–≥–æ–¥–∞—Ä—è –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º—É –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è override-–≤–µ—Ä—Å–∏—è –º–µ—Ç–æ–¥–∞ —Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å–æ–∑–¥–∞–ª–∏ –≤ –ø—É–Ω–∫—Ç–µ 1.
5. –ï—Å–ª–∏ calculator ‚Äî —ç—Ç–æ CashPaymentCalculator, –≤—ã–∑–æ–≤–µ—Ç—Å—è –µ–≥–æ CreatePayment –∏ –≤–µ—Ä–Ω—ë—Ç—Å—è CashPayment. –ï—Å–ª–∏ calculator ‚Äî —ç—Ç–æ BankPaymentCalculator, –≤—ã–∑–æ–≤–µ—Ç—Å—è –µ–≥–æ CreatePayment –∏ –≤–µ—Ä–Ω—ë—Ç—Å—è BankPayment.
6. Creator (PaymentCalculator) –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ "–∫–æ–≥–¥–∞" —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç (–≤ –∫–æ–Ω—Ü–µ —Ä–∞—Å—á—ë—Ç–∞). –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ creator'—ã (CashPaymentCalculator, BankPaymentCalculator) –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ "—á—Ç–æ" —Å–æ–∑–¥–∞–≤–∞—Ç—å. –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π.

–°—Ö–µ–º–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
![](src/factory_method/factory_method_kruglov_sheme.png)

–°–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏ ‚Äî –≥–∏–±–∫–æ—Å—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å.

–ó–∞–≤—Ç—Ä–∞ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è CryptoPayment. –ß—Ç–æ –º—ã –¥–µ–ª–∞–µ–º?

1. –°–æ–∑–¥–∞—ë–º record CryptoPayment(...) : IPayment (–Ω–æ–≤—ã–π product).
2. –°–æ–∑–¥–∞—ë–º class CryptoPaymentCalculator : PaymentCalculator.
3. –†–µ–∞–ª–∏–∑—É–µ–º –≤ –Ω—ë–º protected override IPayment CreatePayment(...) => new CryptoPayment(...).

–ú—ã –Ω–µ —Ç—Ä–æ–Ω—É–ª–∏ –Ω–∏ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞ (PaymentCalculator, CashPaymentCalculator –∏ —Ç.–¥.). –ú—ã —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—ã–π. –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è, –æ—Å—Ç–∞–≤–∞—è—Å—å "–∑–∞–∫—Ä—ã—Ç–æ–π" –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π. –≠—Ç–æ –ø—Ä–∏–Ω—Ü–∏–ø –û—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–ó–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏ (Open/Closed Principle) –≤ —á–∏—Å—Ç–æ–º –≤–∏–¥–µ.

–û–¥–Ω–∞–∫–æ —É —ç—Ç–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –µ—Å—Ç—å –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

**1.) –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –±–æ–ª—å—à–∏—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∏–µ—Ä–∞—Ä—Ö–∏–π –∫–ª–∞—Å—Å–æ–≤, —Ç–∞–∫ –∫–∞–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ –Ω–∞–¥–æ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –ø–æ–¥–∫–ª–∞—Å—Å —Å–æ–∑–¥–∞—Ç–µ–ª—è.**

**2.) —Å–∏–ª—å–Ω–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π —Å –±–∞–∑–æ–≤—ã–º —Ç–∏–ø–æ–º: –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ —Ç–∏–ø–∞, –Ω–æ –Ω–µ –ª–æ–≥–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π**

–ü—Ä–∏–º–µ—Ä: CashPaymentCalculator —Å–≤—è–∑–∞–Ω —Å PaymentCalculator —á–µ—Ä–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ. –û–Ω –æ–±—è–∑–∞–Ω –±—ã—Ç—å –µ–≥–æ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–º.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —É –Ω–∞—Å –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥—Ä—É–≥–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, FixedPricePaymentCalculator, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –¥—Ä—É–≥–∞—è –ª–æ–≥–∏–∫–∞ Calculate (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–Ω –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 100). –¢–æ –µ—Å—Ç—å –æ–Ω –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å–∫–∏–¥–∫–∏ –∏ –∫—É–ø–æ–Ω—ã –∏ –Ω–µ –¥–µ–ª–∞–µ—Ç –Ω–∏–∫–∞–∫–æ–π –¥—Ä—É–≥–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏, –≤ –æ—Ç–ª–∏—á–∏–∏ –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ PaymentCalculator.
–ï—Å–ª–∏ –º—ã –∑–∞—Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –æ–Ω —Ç–æ–∂–µ —Å–æ–∑–¥–∞–≤–∞–ª CashPayment, –Ω–∞–º –ø—Ä–∏–¥—ë—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å FixedCashPaymentCalculator : FixedPricePaymentCalculator –∏ –∑–∞–Ω–æ–≤–æ –Ω–∞–ø–∏—Å–∞—Ç—å –≤ –Ω—ë–º override CreatePayment ... => new CashPayment().

–ú—ã –Ω–µ –º–æ–∂–µ–º –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑ CashPaymentCalculator, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –¥—Ä—É–≥–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏. –õ–æ–≥–∏–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ —Ç–∏–ø–∞ (Calculate) –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞–º–∏, –∞ –≤–æ—Ç –ª–æ–≥–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π (CreatePayment) ‚Äî –Ω–µ—Ç.

**3.) –Ω–µ—è–≤–Ω–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ SRP: –æ–±—ä–µ–∫—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞—Ç–µ–ª—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–µ–Ω –∫–∞–∫ –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ª–æ–≥–∏–∫–∏,
—Ç–∞–∫ –∏ –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤**

creator (–Ω–∞–ø—Ä–∏–º–µ—Ä, BankPaymentCalculator) —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–µ–Ω –∏ –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ª–æ–≥–∏–∫–∏ (–æ–Ω –Ω–∞—Å–ª–µ–¥—É–µ—Ç Calculate), –∏ –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–æ–Ω —Ä–µ–∞–ª–∏–∑—É–µ—Ç CreatePayment).

–≠—Ç–æ –¥–≤–µ —Ä–∞–∑–Ω—ã–µ "–ø—Ä–∏—á–∏–Ω—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è".
1. –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—Å—è –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ (–≤ –±–∞–∑–æ–≤–æ–º PaymentCalculator), —ç—Ç–æ –∫–æ—Å–Ω—ë—Ç—Å—è –≤—Å–µ—Ö –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤.
2. –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—Å—è —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è BankPayment (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ–º—É –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä), –Ω–∞–º –ø—Ä–∏–¥—ë—Ç—Å—è –º–µ–Ω—è—Ç—å BankPaymentCalculator.

–ö–ª–∞—Å—Å BankPaymentCalculator –∏ "–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä", –∏ "—Ñ–∞–±—Ä–∏–∫–∞" –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –≠—Ç–æ –º–æ–∂–µ—Ç —É—Å–ª–æ–∂–Ω–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É, –µ—Å–ª–∏ –∏ –ª–æ–≥–∏–∫–∞, –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–º–∏.


–í—ã–≤–æ–¥:
–§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å–≤—è–∑–∏ —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º new –ø—É—Ç—ë–º –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞–º —á–µ—Ä–µ–∑ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥. –û–Ω –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ —É –≤–∞—Å –µ—Å—Ç—å –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞, –Ω–æ –≤ –∫–æ–Ω—Ü–µ —ç—Ç–æ–π –ª–æ–≥–∏–∫–∏ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, —Ç–∏–ø –∫–æ—Ç–æ—Ä—ã—Ö –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ–¥–∫–ª–∞—Å—Å–æ–º.

### (–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è) —Ñ–∞–±—Ä–∏–∫–∞

> –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞

–í–æ–æ–±—â–µ —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ–¥–∫–æ. –ö—É–¥–∞ —á–∞—â–µ –ø—Ä–∏–º–µ–Ω–µ—è—Ç—Å—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞, –∏–ª–∏ –∂–µ –ø—Ä–æ—Å—Ç–æ - —Ñ–∞–±—Ä–∏–∫–∞. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è —á—Ç–æ —ç—Ç–æ.

–ö–∞–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –µ—Å—Ç—å —É —Ñ–∞–±—Ä–∏—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞?
–í—Å–ø–æ–º–Ω–∏–º –∫–æ–¥: 

```csharp
// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
public abstract class Dialog
{
    public void Render()
    {
        // –í—ã–∑—ã–≤–∞–µ–º —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ - –æ–Ω –≤–µ—Ä–Ω—ë—Ç –Ω—É–∂–Ω—ã–π —Ç–∏–ø –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏
        IButton okButton = CreateButton();

        okButton.Render();
    }

    // –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ - –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª–∞—Å—Å–∞–º
    protected abstract IButton CreateButton();
}

```

–ê —á—Ç–æ –µ—Å–ª–∏ –ø–æ–º–∏–º–æ –∫–Ω–æ–ø–∫–∏ –º—ã –∑–∞—Ö–æ—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ ITextBox?

```csharp
// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
public abstract class Dialog
{
    public void Render()
    {
        // –ù–∞–º –Ω—É–∂–Ω–æ –î–í–ê –ø—Ä–æ–¥—É–∫—Ç–∞, –∏ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–∑ –û–î–ù–û–ô –°–ï–ú–¨–ò
        // (–æ–±–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 'Windows' –∏–ª–∏ –æ–±–∞ 'Html')
        IButton okButton = CreateButton();
        ITextBox nameBox = CreateTextBox(); // <-- –í—Ç–æ—Ä–∞—è —Ç–æ—á–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è
        
        okButton.Render();
        nameBox.Render();
    }

    // –ù–∞—à Creator "—Ä–∞—Å–ø—É—Ö–∞–µ—Ç" –æ—Ç —Ñ–∞–±—Ä–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
    protected abstract IButton CreateButton();
    protected abstract ITextBox CreateTextBox(); // <-- –î–æ–±–∞–≤–∏–ª–∏ –≤—Ç–æ—Ä–æ–π –º–µ—Ç–æ–¥
}

```

–ê –µ—Å–ª–∏ –∑–∞—Ö–æ—Ç–∏–º –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ—Ç–∏–π?

```csharp
// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
public abstract class Dialog
{
    public void Render()
    {
        IButton okButton = CreateButton();
        ITextBox nameBox = CreateTextBox(); 
        IScrollBar vScroll = CreateScrollBar(); // —Ç—Ä–µ—Ç–∏–π...
        
        okButton.Render();
        nameBox.Render();
    }

    // –£–∂–µ —Ü–µ–ª—ã—Ö —Ç—Ä–∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–∞
    protected abstract IButton CreateButton();
    protected abstract ITextBox CreateTextBox(); 
    protected abstract IScrollBar CreateScrollBar(); 
}

```

–ò —Ç–∞–∫ –¥–∞–ª–µ–µ.

–ü–æ—Å–ª–µ —Ç–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–∞–∂–¥–æ–º Creator'–µ –Ω–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤. –¢–æ –µ—Å—Ç—å –ø—Ä–æ–±–µ–∂–∞—Ç—å—Å—è –≤–æ –≤—Å–µ–º —Ç–∞–∫–∏–º –∫–ª–∞—Å—Å–∞–º –∏ –≤—Ä—É—á–Ω—É—é –∏–∑ –∏–∑–º–µ–Ω–∏—Ç—å. –û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –µ—Å–ª–∏ —Ç–∞–∫–∏—Ö –∫–ª–∞—Å—Å–æ–≤ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ, —Ç–æ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –±—É–¥–µ—Ç –∫—Ä–∞–π–Ω–µ —Ç—è–∂–µ–ª–æ.

–¢–æ –µ—Å—Ç—å —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–æ–≥–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–µ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç, –∞ —Å–µ–º–µ–π—Å—Ç–≤–æ –∫–∞–∫–∏—Ö-—Ç–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–æ–±–æ–π –æ–±—ä–µ–∫—Ç–æ–≤.

–†–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–∑–∏—Ü–∏—é. –°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–±—Ä–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤—Å–µ —ç—Ç–∏ –º–µ—Ç–æ–¥—ã.

```csharp
// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ–º–µ–π—Å—Ç–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
// –û–Ω–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –°–ï–ú–ï–ô–°–¢–í–û –ø—Ä–æ–¥—É–∫—Ç–æ–≤
public interface IUIFactory
{
    IButton CreateButton();
    ITextBox CreateTextBox();
    IScrollBar CreateScrollBar();
}

// –§–∞–±—Ä–∏–∫–∞ 1
public class WindowsFactory : IUIFactory
{
    public IButton CreateButton() => new WindowsButton();
    public ITextBox CreateTextBox() => new WindowsTextBox();
    public IScrollBar CreateScrollBar() => new WindowsScrollBar();
}

// –§–∞–±—Ä–∏–∫–∞ 2
public class WebFactory : IUIFactory
{
    public IButton CreateButton() => new HtmlButton();
    public ITextBox CreateTextBox() => new HtmlTextBox();
    public IScrollBar CreateScrollBar() => new HtmlScrollBar();
}

// –¢–µ–ø–µ—Ä—å —É–∂–µ –Ω–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π
public class Dialog
{
    // 1. (–ö–æ–º–ø–æ–∑–∏—Ü–∏—è)
    private readonly IUIFactory _factory;

    public Dialog(IUIFactory factory)
    {
        _factory = factory;
    }

    // 3. –õ–æ–≥–∏–∫–∞ Render() –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
    public void Render()
    {
        // –Ω–æ —Ç–µ–ø–µ—Ä—å –æ–Ω–∞ –î–ï–õ–ï–ì–ò–†–£–ï–¢ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫–µ
        IButton okButton = _factory.CreateButton();
        ITextBox nameBox = _factory.CreateTextBox();
        IScrollBar scrollBar = _factory.CreateScrollBar();
        
        okButton.Render();
        nameBox.Render();
        scrollBar.Render();
    }
}

```

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –µ—â—ë –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤:
–°–æ–∑–¥–∞—ë–º –ø—Ä–æ–¥—É–∫—Ç—ã:

```csharp
// –≠—Ç–æ –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–æ–¥—É–∫—Ç–æ–≤
public interface IPayment
{
    decimal Amount { get; }
}

// –≠—Ç–æ –ø—Ä–æ–¥—É–∫—Ç 1
public record BankPayment(
    decimal Amount,
    string ReceiverAccountId) : IPayment;

// –≠—Ç–æ –ø—Ä–æ–¥—É–∫—Ç 2
public record CashPayment(
    decimal Amount) : IPayment;

```

–¢–µ–ø–µ—Ä—å –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Å–æ–∑–¥–∞—Ç–µ–ª—è:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPaymentFactory
{
    IPayment Create(decimal amount);
}

```

–¢–µ–ø–µ—Ä—å –º—ã –ø–∏—à–µ–º –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ö–∞–∂–¥–∞—è —Ñ–∞–±—Ä–∏–∫–∞ –±—É–¥–µ—Ç "–∑–∞—Ç–æ—á–µ–Ω–∞" –ø–æ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞.

```csharp
// "–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ 1"
public class BankPaymentFactory : IPaymentFactory
{
    private readonly string _currentReceiverAccountId;

    // –§–∞–±—Ä–∏–∫–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ!
    public BankPaymentFactory(string currentReceiverAccountId)
    {
        _currentReceiverAccountId = currentReceiverAccountId;
    }

    public IPayment Create(decimal amount)
    {
        // –≠—Ç–∞ —Ñ–∞–±—Ä–∏–∫–∞ –∑–Ω–∞–µ—Ç, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å BankPayment.
        // –û–Ω–∞ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç —ç—Ç—É –ª–æ–≥–∏–∫—É.
        return new BankPayment(amount, _currentReceiverAccountId);
    }
}

// "–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ 2"
public class CashPaymentFactory : IPaymentFactory
{
    public IPayment Create(decimal amount)
    {
        // –≠—Ç–∞ —Ñ–∞–±—Ä–∏–∫–∞ –∑–Ω–∞–µ—Ç, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å CashPayment.
        return new CashPayment(amount);
    }
}

```

–¢–µ–ø–µ—Ä—å –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ç–æ, –∫–∞–∫ —ç—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å:

```csharp
// –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
public interface IPaymentCalculator
{
    IPayment Calculate(Order order);
}

public class PaymentCalculator : IPaymentCalculator
{
    private readonly IPaymentFactory _paymentFactory;

    public PaymentCalculator(IPaymentFactory paymentFactory)
    {
        _paymentFactory = paymentFactory;
    }

    public IPayment Calculate(Order order)
    {
        var totalCost = order.TotalCost;
        
        // Apply discounts and coupons 

        // ...

        return _paymentFactory.Create(totalCost);
    }
}

// –î—Ä—É–≥–æ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
public class FixedPaymentCalculator : IPaymentCalculator
{
    private readonly decimal _fixedPrice;
    private readonly IPaymentFactory _paymentFactory;

    public FixedPaymentCalculator(decimal fixedPrice, IPaymentFactory paymentFactory)
    {
        _fixedPrice = fixedPrice;
        _paymentFactory = paymentFactory;
    }
    public IPayment Calculate(Order order)
    {
        var totalCost = order.Items.Sum(item =>_fixedPrice * item.Amount);

        // Apply discounts and coupons

        // ...

        return _paymentFactory.Create(totalCost);
    }
}

```

–ú—ã –º–æ–∂–µ–º –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ–∞–±—Ä–∏–∫—É:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é –∑–∞–ø–∏—Å—å (record)
public record CryptoPayment(decimal Amount, string Wallet) : IPayment;

public class CryptoPaymentFactory : IPaymentFactory
{
    private readonly string _companyWallet;
    public CryptoPaymentFactory(string companyWallet) { _companyWallet = companyWallet; }

    public IPayment Create(decimal amount)
    {
        return new CryptoPayment(amount, _companyWallet);
    }
}

```

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ:

```csharp
public static class Program
{
    public static void Main(string[] args)
    {
        Console.WriteLine("--- –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë–∞–Ω–∫ ---");

        // 1. –°–æ–∑–¥–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ñ–∞–±—Ä–∏–∫—É
        IPaymentFactory bankFactory = new BankPaymentFactory("UA1234567890");

        // 2. –í–Ω–µ–¥—Ä—è–µ–º —Ñ–∞–±—Ä–∏–∫—É –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
        IPaymentCalculator bankCalculator = new PaymentCalculator(bankFactory);

        // 3. –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
        Order order1 = new Order { TotalCost = 250.50m };
        IPayment payment1 = bankCalculator.Calculate(order1);
        
        // 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        Console.WriteLine($"–°–æ–∑–¥–∞–Ω –ø–ª–∞—Ç–µ–∂ —Ç–∏–ø–∞: {payment1.GetType().Name}"); // –í—ã–≤–µ–¥–µ—Ç: BankPayment
        Console.WriteLine($"–°—É–º–º–∞: {payment1.Amount}");

        
        // === –°–¶–ï–ù–ê–†–ò–ô 2: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –Ω–∞–ª–∏—á–Ω—ã—Ö ===
        Console.WriteLine("\n--- –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–∞–ª–∏—á–Ω—ã–µ ---");

        // 1. –°–æ–∑–¥–∞–µ–º –î–†–£–ì–£–Æ —Ñ–∞–±—Ä–∏–∫—É
        IPaymentFactory cashFactory = new CashPaymentFactory();

        // 2. –í–Ω–µ–¥—Ä—è–µ–º —ç—Ç—É —Ñ–∞–±—Ä–∏–∫—É –≤ —Ç–æ—Ç –∂–µ —Ç–∏–ø –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
        IPaymentCalculator cashCalculator = new PaymentCalculator(cashFactory);

        // 3. –ò—Å–ø–æ–ª—å–∑—É–µ–º
        Order order2 = new Order { TotalCost = 99.00m };
        IPayment payment2 = cashCalculator.Calculate(order2);

        // 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º
        // –ù–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –∫–æ–¥ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —Å–æ–∑–¥–∞–ª CashPayment!
        Console.WriteLine($"–°–æ–∑–¥–∞–Ω –ø–ª–∞—Ç–µ–∂ —Ç–∏–ø–∞: {payment2.GetType().Name}"); // –í—ã–≤–µ–¥–µ—Ç: CashPayment
        Console.WriteLine($"–°—É–º–º–∞: {payment2.Amount}");
    }
}

```

–í –æ–±—â–µ–º –æ—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è, —á—Ç–æ —Ñ–∞–±—Ä–∏–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ —Ç–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –º—ã –∂–µ–ª–∞–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ü–µ–ª—ã–µ —Å–µ–º–µ–π—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤, –∞ –Ω–µ —á—Ç–æ-—Ç–æ –æ–¥–Ω–æ. –ï—Å—Ç—å —Ä–µ–¥–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –≤–ø–æ–ª–Ω–µ —É–º–µ—Å—Ç–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, –Ω–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–º–µ–Ω—è—é—Ç –∏–º–µ–Ω–Ω–æ —Ñ–∞–±—Ä–∏–∫—É.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –µ—â—ë –æ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä:

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –ø–∏—à–µ—Ç–µ —Å–∏–º—É–ª—è—Ç–æ—Ä –º–µ–±–µ–ª—å–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞. –í–∞—à –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç:

- –°–µ–º–µ–π—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏–º—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤, c–∫–∞–∂–µ–º, Armchair + Sofa + Coffee table.
- –ù–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞—Ü–∏–π —ç—Ç–æ–≥–æ —Å–µ–º–µ–π—Å—Ç–≤–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–¥—É–∫—Ç—ã Armchair, Sofa, Coffee table –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ —Ç—Ä—ë—Ö —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∏–ª—è—Ö: [–ê—Ä-–¥–µ–∫–æ, –ê—Ä-–Ω—É–≤–æ (–º–æ–¥–µ—Ä–Ω)](https://artdoart.com/news/ar-nuvo-i-ar-deko-v-cem-raznica) –∏ –í–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–æ–º.

![](src/abstract_factory/furniture.png)

–í–∞–º –Ω—É–∂–µ–Ω —Ç–∞–∫–æ–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ—á–µ—Ç–∞–ª–∏—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ —Ç–æ–≥–æ –∂–µ —Å–µ–º–µ–π—Å—Ç–≤–∞. –≠—Ç–æ –≤–∞–∂–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç—ã —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è, –µ—Å–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –Ω–µ—Å–æ—á–µ—Ç–∞—é—â—É—é—Å—è –º–µ–±–µ–ª—å.

![](src/abstract_factory/client_sad.png)

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–ª–∏ —Å–µ–º–µ–πc—Ç–≤ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É. –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç —Å–≤–æ–∏ –∫–∞—Ç–∞–ª–æ–≥–∏, –∏ –≤—ã –±—ã –Ω–µ —Ö–æ—Ç–µ–ª–∏ –º–µ–Ω—è—Ç—å —É–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –∫–æ–¥ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π –º–µ–±–µ–ª–∏

–ü–∞—Ç—Ç–µ—Ä–Ω –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–¥–µ–ª–∏—Ç—å –æ–±—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤, —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∏—Ö —Å–µ–º–µ–π—Å—Ç–≤–∞. –¢–∞–∫, –≤—Å–µ –≤–∞—Ä–∏–∞—Ü–∏–∏ –∫—Ä–µ—Å–µ–ª –ø–æ–ª—É—á–∞—Ç –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Armchair, –≤—Å–µ –¥–∏–≤–∞–Ω—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Sofa –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ. –í –ø—Ä–∏–º–µ—Ä–∞—Ö –≤—ã—à–µ —ç—Ç–æ –±—ã–ª–∏ Button, ScrollBar –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ
![](src/abstract_factory/IChair.png)

–î–∞–ª–µ–µ –≤—ã —Å–æ–∑–¥–∞—ë—Ç–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—É—é —Ñ–∞–±—Ä–∏–∫—É ‚Äî –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥—ã —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å–µ–º–µ–π—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, createArmchair, createSofa –∏ createCoffeeTable). –≠—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –≤—ã–¥–µ–ª–∏–ª–∏ —Ä–∞–Ω–µ–µ ‚Äî Armchair, Sofa –∏ Coffee table.

–î–ª—è –∫–∞–∂–¥–æ–π –≤–∞—Ä–∏–∞—Ü–∏–∏ —Å–µ–º–µ–π—Å—Ç–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –º—ã –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ñ–∞–±—Ä–∏–∫—É, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–≤ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –§–∞–±—Ä–∏–∫–∏ —Å–æ–∑–¥–∞—é—Ç –ø—Ä–æ–¥—É–∫—Ç—ã –æ–¥–Ω–æ–π –≤–∞—Ä–∏–∞—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, ModernFactory –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–ª—å–∫–æ ModernArmchair ,ModernSofa –∏ ModernCoffeeTable.

![](src/abstract_factory/IFactory.png)

(–í –ø—Ä–∏–º–µ—Ä–∞—Ö –≤—ã—à–µ —ç—Ç–æ –±—ã–ª–∞ —Ñ–∞–±—Ä–∏–∫–∞ –≤—Å—è–∫–∏—Ö UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –≤—Ä–æ–¥–µ –∫–Ω–æ–ø–æ–∫)

–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Å —Ñ–∞–±—Ä–∏–∫–∞–º–∏, —Ç–∞–∫ –∏ —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∏—Ö –æ–±—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–¥–∞–≤–∞—Ç—å –≤ –≤–∞—à–∏ –∫–ª–∞—Å—Å—ã –ª—é–±–æ–π —Ç–∏–ø —Ñ–∞–±—Ä–∏–∫–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –ª—é–±—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã, –Ω–∏—á–µ–≥–æ –Ω–µ –ª–æ–º–∞—è.

![](src/abstract_factory/Not_funny.png)

–ù–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –ø—Ä–æ—Å–∏—Ç —Ñ–∞–±—Ä–∏–∫—É —Å–¥–µ–ª–∞—Ç—å —Å—Ç—É–ª. –û–Ω –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –±—ã–ª–∞ —ç—Ç–∞ —Ñ–∞–±—Ä–∏–∫–∞. –û–Ω –Ω–µ –∑–Ω–∞–µ—Ç, –ø–æ–ª—É—á–∏—Ç –≤–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–∏–π –∏–ª–∏ –º–æ–¥–µ—Ä–Ω–æ–≤—ã–π —Å—Ç—É–ª. –î–ª—è –Ω–µ–≥–æ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–∞ —Å—Ç—É–ª–µ –º–æ–∂–Ω–æ –±—ã–ª–æ —Å–∏–¥–µ—Ç—å –∏ —á—Ç–æ–±—ã —ç—Ç–æ—Ç —Å—Ç—É–ª –æ—Ç–ª–∏—á–Ω–æ —Å–º–æ—Ç—Ä–µ–ª—Å—è —Å –¥–∏–≤–∞–Ω–æ–º —Ç–æ–π –∂–µ —Ñ–∞–±—Ä–∏–∫–∏.



```mermaid
classDiagram
    class IFurnitureFactory {
        <<interface>>
        +CreateArmchair() IArmchair
        +CreateSofa() ISofa
        +CreateCoffeeTable() ICoffeeTable
    }
    
    class ModernFurnitureFactory {
        +CreateArmchair() IArmchair
        +CreateSofa() ISofa
        +CreateCoffeeTable() ICoffeeTable
    }
    
    class VictorianFurnitureFactory {
        +CreateArmchair() IArmchair
        +CreateSofa() ISofa
        +CreateCoffeeTable() ICoffeeTable
    }
    
    class IArmchair {
        <<interface>>
        +SitOn()
    }
    
    class ISofa {
        <<interface>>
        +LieOn()
    }
    
    class ICoffeeTable {
        <<interface>>
        +PutCoffee()
    }
    
    IFurnitureFactory <|.. ModernFurnitureFactory : —Ä–µ–∞–ª–∏–∑—É–µ—Ç
    IFurnitureFactory <|.. VictorianFurnitureFactory : —Ä–µ–∞–ª–∏–∑—É–µ—Ç
    ModernFurnitureFactory ..> IArmchair : —Å–æ–∑–¥–∞—ë—Ç
    ModernFurnitureFactory ..> ISofa : —Å–æ–∑–¥–∞—ë—Ç
    ModernFurnitureFactory ..> ICoffeeTable : —Å–æ–∑–¥–∞—ë—Ç
    VictorianFurnitureFactory ..> IArmchair : —Å–æ–∑–¥–∞—ë—Ç
    VictorianFurnitureFactory ..> ISofa : —Å–æ–∑–¥–∞—ë—Ç
    VictorianFurnitureFactory ..> ICoffeeTable : —Å–æ–∑–¥–∞—ë—Ç

```

**–°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:**

1. –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –æ–±—ä—è–≤–ª—è—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å–≤—è–∑–∞–Ω—ã –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –ø–æ —Å–º—ã—Å–ª—É, –Ω–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ä–∞–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

2. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã ‚Äî –±–æ–ª—å—à–æ–π –Ω–∞–±–æ—Ä –∫–ª–∞—Å—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º –ø—Ä–æ–¥—É–∫—Ç–∞–º (–∫—Ä–µ—Å–ª–æ/—Å—Ç–æ–ª–∏–∫), –Ω–æ –∏–º–µ—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –≤–∞—Ä–∏–∞—Ü–∏–∏ (–í–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–∏–π/–ú–æ–¥–µ—Ä–Ω).

3. –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ –æ–±—ä—è–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–∫—Ä–µ—Å–ª–æ/—Å—Ç–æ–ª–∏–∫).

4. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–±—Ä–∏–∫–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫–∞–∂–¥–∞—è –∫ —Å–≤–æ–µ–π –≤–∞—Ä–∏–∞—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–í–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–∏–π/–ú–æ–¥–µ—Ä–Ω) –∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç –º–µ—Ç–æ–¥—ã –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–π —Ñ–∞–±—Ä–∏–∫–∏, –ø–æ–∑–≤–æ–ª—è—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –≤–∞—Ä–∏–∞—Ü–∏–∏.

5. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–±—Ä–∏–∫–∏ –ø–æ—Ä–æ–∂–¥–∞—é—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã, —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –∏—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É –∫–æ–¥—É, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–º—É —Ñ–∞–±—Ä–∏–∫—É, –Ω–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å—Å—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–ª–∞—Å—Å–∞–º –ø—Ä–æ–¥—É–∫—Ç–æ–≤. –ö–ª–∏–µ–Ω—Ç —Å–º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª—é–±—ã–º–∏ –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.

–ü—Ä–∏–≤–µ–¥—ë–º –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞:

```csharp
// -----------------------------
// 1. –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
// -----------------------------

public interface IArmchair
{
    void SitOn();
}

public interface ISofa
{
    void LieOn();
}

public interface ICoffeeTable
{
    void PutCoffee();
}

// -----------------------------
// 2. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
// –ê—Ä-–¥–µ–∫–æ
// -----------------------------

public class ArtDecoArmchair : IArmchair
{
    public void SitOn() => Console.WriteLine("–í—ã —Å–∏–¥–∏—Ç–µ –Ω–∞ –∫—Ä–µ—Å–ª–µ –ê—Ä-–¥–µ–∫–æ.");
}

public class ArtDecoSofa : ISofa
{
    public void LieOn() => Console.WriteLine("–í—ã –ª–µ–∂–∏—Ç–µ –Ω–∞ –¥–∏–≤–∞–Ω–µ –ê—Ä-–¥–µ–∫–æ.");
}

public class ArtDecoCoffeeTable : ICoffeeTable
{
    public void PutCoffee() => Console.WriteLine("–í—ã —Å—Ç–∞–≤–∏—Ç–µ –∫–æ—Ñ–µ –Ω–∞ —Å—Ç–æ–ª–∏–∫ –ê—Ä-–¥–µ–∫–æ.");
}

// -----------------------------
// 2. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
// –ê—Ä-–Ω—É–≤–æ (–º–æ–¥–µ—Ä–Ω)
// -----------------------------

public class ModernArmchair : IArmchair
{
    public void SitOn() => Console.WriteLine("–í—ã —Å–∏–¥–∏—Ç–µ –Ω–∞ –∫—Ä–µ—Å–ª–µ –≤ —Å—Ç–∏–ª–µ –º–æ–¥–µ—Ä–Ω.");
}

public class ModernSofa : ISofa
{
    public void LieOn() => Console.WriteLine("–í—ã –ª–µ–∂–∏—Ç–µ –Ω–∞ –¥–∏–≤–∞–Ω–µ –≤ —Å—Ç–∏–ª–µ –º–æ–¥–µ—Ä–Ω.");
}

public class ModernCoffeeTable : ICoffeeTable
{
    public void PutCoffee() => Console.WriteLine("–í—ã —Å—Ç–∞–≤–∏—Ç–µ –∫–æ—Ñ–µ –Ω–∞ —Å—Ç–æ–ª–∏–∫ –≤ —Å—Ç–∏–ª–µ –º–æ–¥–µ—Ä–Ω.");
}

// -----------------------------
// 2. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
// –í–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–∏–π
// -----------------------------

public class VictorianArmchair : IArmchair
{
    public void SitOn() => Console.WriteLine("–í—ã —Å–∏–¥–∏—Ç–µ –Ω–∞ –≤–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–æ–º –∫—Ä–µ—Å–ª–µ.");
}

public class VictorianSofa : ISofa
{
    public void LieOn() => Console.WriteLine("–í—ã –ª–µ–∂–∏—Ç–µ –Ω–∞ –≤–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–æ–º –¥–∏–≤–∞–Ω–µ.");
}

public class VictorianCoffeeTable : ICoffeeTable
{
    public void PutCoffee() => Console.WriteLine("–í—ã —Å—Ç–∞–≤–∏—Ç–µ –∫–æ—Ñ–µ –Ω–∞ –≤–∏–∫—Ç–æ—Ä–∏–∞–Ω—Å–∫–∏–π —Å—Ç–æ–ª–∏–∫.");
}

// -----------------------------
// 3. –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞
// -----------------------------

public interface IFurnitureFactory
{
    IArmchair CreateArmchair();
    ISofa CreateSofa();
    ICoffeeTable CreateCoffeeTable();
}

// -----------------------------
// 4. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–±—Ä–∏–∫–∏
// -----------------------------

public class ArtDecoFurnitureFactory : IFurnitureFactory
{
    public IArmchair CreateArmchair() => new ArtDecoArmchair();
    public ISofa CreateSofa() => new ArtDecoSofa();
    public ICoffeeTable CreateCoffeeTable() => new ArtDecoCoffeeTable();
}

public class ModernFurnitureFactory : IFurnitureFactory
{
    public IArmchair CreateArmchair() => new ModernArmchair();
    public ISofa CreateSofa() => new ModernSofa();
    public ICoffeeTable CreateCoffeeTable() => new ModernCoffeeTable();
}

public class VictorianFurnitureFactory : IFurnitureFactory
{
    public IArmchair CreateArmchair() => new VictorianArmchair();
    public ISofa CreateSofa() => new VictorianSofa();
    public ICoffeeTable CreateCoffeeTable() => new VictorianCoffeeTable();
}

// -----------------------------
// 5. –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥
// -----------------------------

public class FurnitureShowroom
{
    private readonly IFurnitureFactory _factory;

    private IArmchair _armchair;
    private ISofa _sofa;
    private ICoffeeTable _table;

    public FurnitureShowroom(IFurnitureFactory factory)
    {
        _factory = factory;
    }

    public void CreateFurnitureSet()
    {
        _armchair = _factory.CreateArmchair();
        _sofa = _factory.CreateSofa();
        _table = _factory.CreateCoffeeTable();
    }

    public void Demo()
    {
        _armchair.SitOn();
        _sofa.LieOn();
        _table.PutCoffee();
    }
}

// -----------------------------
// 6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
// -----------------------------

public static class AppConfig
{
    public static void Main()
    {
        string style = "ArtDeco"; // —á–∏—Ç–∞–µ–º –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

        IFurnitureFactory factory = style switch
        {
            "ArtDeco" => new ArtDecoFurnitureFactory(),
            "Modern" => new ModernFurnitureFactory(),
            "Victorian" => new VictorianFurnitureFactory(),
            _ => throw new Exception("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å—Ç–∏–ª—å –º–µ–±–µ–ª–∏!")
        };

        var showroom = new FurnitureShowroom(factory);

        showroom.CreateFurnitureSet();
        showroom.Demo();
    }
}

```



> **–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã –ø–æ –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–π —Ñ–∞–±—Ä–∏–∫–µ:**
> - –°–æ–∑–¥–∞—ë—Ç —Å–µ–º–µ–π—Å—Ç–≤–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
> - –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ —Å–µ–º–µ–π—Å—Ç–≤–µ
> - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –≤–º–µ—Å—Ç–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
> - –°–ª–æ–∂–Ω–µ–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞, –ø—Ä–æ—â–µ - –Ω–æ–≤–æ–µ —Å–µ–º–µ–π—Å—Ç–≤–æ

### –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—É—é —Ñ–∞–±—Ä–∏–∫—É

**–ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å:**

1. **–ö–æ–≥–¥–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–∏–¥–∞–º–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –Ω–µ –∑–∞–≤–∏—Å—è –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤.**
–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Ç–æ–≥–æ, –∫–∞–∫ –∏ –∫–∞–∫–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –æ–±—ä–µ–∫—Ç—ã –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã. –ù–æ –ø—Ä–∏ —ç—Ç–æ–º –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ –≤—Å–µ–º–∏ —Ç–∏–ø–∞–º–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –ø–æ—Å–∫–æ–ª—å–∫—É –∏—Ö –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—ã–ª –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω.
2. **–ö–æ–≥–¥–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, –Ω–æ –æ—á–µ—Ä–µ–¥–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—Ç –≤–≤–µ–¥–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤.**
–í —Ö–æ—Ä–æ—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –æ–¥–Ω—É –≤–µ—â—å. –ï—Å–ª–∏ –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ñ–∞–±—Ä–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤, –æ–Ω–∏ —Å–ø–æ—Å–æ–±–Ω—ã –∑–∞—Ç—É–º–∞–Ω–∏—Ç—å –µ–≥–æ –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é. –ü–æ—ç—Ç–æ–º—É –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –≤—ã–Ω–µ—Å—Ç–∏ –≤—Å—é –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é –∫–ª–∞—Å—Å–æ–≤, –ø—Ä–∏–º–µ–Ω–∏–≤ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—É—é —Ñ–∞–±—Ä–∏–∫—É.

### –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:**

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–π —Ç–∏–ø–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∫ –≤–∞—Ä–∏–∞—Ü–∏—è–º —Å–µ–º–µ–π—Å—Ç–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤.
2. –°–≤–µ–¥–∏—Ç–µ –≤—Å–µ –≤–∞—Ä–∏–∞—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∫ –æ–±—â–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º.
3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–π —Ñ–∞–±—Ä–∏–∫–∏. –û–Ω –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ñ–∞–±—Ä–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ —Ç–∏–ø–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤.
4. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ñ–∞–±—Ä–∏–∫, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–π —Ñ–∞–±—Ä–∏–∫–∏. –≠—Ç–∏—Ö –∫–ª–∞—Å—Å–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç–æ–ª—å–∫–æ –∂–µ, —Å–∫–æ–ª—å–∫–æ –∏ –≤–∞—Ä–∏–∞—Ü–∏–π —Å–µ–º–µ–π—Å—Ç–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤.
5. –ò–∑–º–µ–Ω–∏—Ç–µ –∫–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∞ —Å–æ–∑–¥–∞–≤–∞–ª–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Ñ–∞–±—Ä–∏–∫—É –∏ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∞ –µ—ë –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥.
6. –ó–∞–º–µ–Ω–∏—Ç–µ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ —É—á–∞—Å—Ç–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤—ã–∑–æ–≤–∞–º–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤ —Ñ–∞–±—Ä–∏–∫–∏.


–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –Ω–∞—Å—Ç–æ—è—â–µ–µ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ SRP, –≤–µ–¥—å –≤ —Ç–∞–∫–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ—Ç –ø—Ä—è–º–æ–π —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏
- —Å–æ–±–ª—é–¥–µ–Ω–∏–µ OCP: –º—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É –Ω–æ–≤—ã–µ –≤–∏–¥—ã –ø–ª–∞—Ç–µ–∂–µ–π –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∞–±—Ä–∏–∫–∏ –¥–ª—è –Ω–∏—Ö, —Ç–µ–º —Å–∞–º—ã–º, —Ä–∞—Å—à–∏—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É –Ω–µ –º–µ–Ω—è—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤

–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- –£—Å–ª–æ–∂–Ω—è–µ—Ç –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–∑-–∑–∞ –≤–≤–µ–¥–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤.
- –¢—Ä–µ–±—É–µ—Ç –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –∫–∞–∂–¥–æ–π –≤–∞—Ä–∏–∞—Ü–∏–∏.

### –°—Ç—Ä–æ–∏—Ç–µ–ª—å (Builder)

> –≤—ã–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞, –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—â–µ–≥–æ –ª–æ–≥–∏–∫—É —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞

–ü–∞—Ä–∞–º–µ—Ç—Ä - –Ω–∞–±–æ—Ä —Ç–∏–ø+–∏–º—è –Ω–∞—Ö–æ–¥—è—â–∏–π—Å—è –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ –º–µ—Ç–æ–¥–∞ 
Ex.: `public void A(int a, char b); // int a –∏ char b ‚Äî —ç—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã`

–ê—Ä–≥—É–º–µ–Ω—Ç - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—é—â–µ–µ—Å—è –≤ –º–µ—Ç–æ–¥
Ex.: `obj.A(1, '2'); // 1 –∏ '2' - –∞—Ä–≥—É–º–µ–Ω—Ç—ã –º–µ—Ç–æ–¥–∞ A()`

```csharp
void M(int x, string s)   // int x –∏ string s ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
{
}
M(10, "hi");               // 10 –∏ "hi" ‚Äî –∞—Ä–≥—É–º–µ–Ω—Ç—ã

```

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

**–°—Ç—Ä–æ–∏—Ç–µ–ª—å** (Builder) ‚Äî —ç—Ç–æ –ø–æ—Ä–æ–∂–¥–∞—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø–æ—à–∞–≥–æ–≤–æ. –°—Ç—Ä–æ–∏—Ç–µ–ª—å –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–æ–¥ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –æ–±—ä–µ–∫—Ç–æ–≤.

![](src/builder/intro.png)

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –æ–±—ä–µ–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–º) —É –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π. –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞: –ª–∏–±–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –≤—Å—ë —á–µ—Ä–µ–∑ –æ–≥—Ä–æ–º–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:
![](src/builder/constructor.png)
–î–∞–ª–µ–∫–æ –Ω–µ –≤—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –¥–µ–ª–∞—Ç—å –∏—Ö null. –õ–∏–±–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–∞ "—Ç–µ–ª–µ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤", —Ç–æ –µ—Å—Ç—å –º–∞—Ç—Ä—ë—à–∫–∏ –∏–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class House
{
    public string Address { get; }
    public int Floors { get; }
    public bool HasGarage { get; }
    public bool HasGarden { get; }
    public bool HasPool { get; }
    public bool HasFancyStatues { get; }

    // –ë–∞–∑–æ–≤—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –∫—É–¥–∞ —Å–≤–æ–¥—è—Ç—Å—è –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ
    public House(string address, int floors, bool hasGarage, bool hasGarden, bool hasPool, bool hasFancyStatues)
    {
        Address = address;
        Floors = floors;
        HasGarage = hasGarage;
        HasGarden = hasGarden;
        HasPool = hasPool;
        HasFancyStatues = hasFancyStatues;
    }

    // –¢–æ–ª—å–∫–æ –∞–¥—Ä–µ—Å ‚Üí –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–æ–º
    public House(string address)
        : this(address, 1, false, false, false, false) { }

    // –ê–¥—Ä–µ—Å + —ç—Ç–∞–∂–Ω–æ—Å—Ç—å
    public House(string address, int floors)
        : this(address, floors, false, false, false, false) { }

    // –î–æ–º —Å –≥–∞—Ä–∞–∂–æ–º
    public static House WithGarage(string address, int floors = 1)
        => new House(address, floors, hasGarage: true, hasGarden: false, hasPool: false, hasFancyStatues: false);

    // –î–æ–º —Å —Å–∞–¥–æ–º
    public static House WithGarden(string address, int floors = 1)
        => new House(address, floors, false, hasGarden: true, false, false);

    // –î–æ–º —Å –±–∞—Å—Å–µ–π–Ω–æ–º
    public static House WithPool(string address, int floors = 1)
        => new House(address, floors, false, false, hasPool: true, false);

    // –î–æ–º —Å–æ —Å—Ç–∞—Ç—É—è–º–∏
    public static House WithFancyStatues(string address, int floors = 1)
        => new House(address, floors, false, false, false, hasFancyStatues: true);
 
    // –ò —Ç–∞–∫ –¥–∞–ª–µ–µ...
} 

```

–õ–∏–±–æ –∂–µ, —á—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –µ—â—ë —Ö—É–∂–µ, –ø—Ä–∏–¥–µ—Ç—Å—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –∫—É—á—É —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥–∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

![](src/builder/inheritance.png)

–ü–∞—Ç—Ç–µ—Ä–Ω –°—Ç—Ä–æ–∏—Ç–µ–ª—å –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–∞–∑–±–∏—Ç—å –≤–µ—Å—å —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —à–∞–≥–∏.

```mermaid
classDiagram
    class Product {
        +Part1
        +Part2
        +Part3
    }
    
    class Builder {
        <<interface>>
        +BuildPart1()
        +BuildPart2()
        +BuildPart3()
        +GetResult() Product
    }
    
    class ConcreteBuilder {
        -product: Product
        +BuildPart1()
        +BuildPart2()
        +BuildPart3()
        +GetResult() Product
    }
    
    class Director {
        -builder: Builder
        +Construct()
    }
    
    Builder <|.. ConcreteBuilder : —Ä–µ–∞–ª–∏–∑—É–µ—Ç
    ConcreteBuilder ..> Product : —Å–æ–∑–¥–∞—ë—Ç
    Director o-- Builder : –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
```

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ –∫ –¥–∏–∞–≥—Ä–∞–º–º–µ:**
- `Product` ‚Äî —Å–ª–æ–∂–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å—Ç—Ä–æ–∏–º
- `Builder` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞
- `ConcreteBuilder` ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—è
- `Director` ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ü—Ä–∏—à—ë–º, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç, –≤–∞–º –Ω—É–∂–Ω–æ –ª–∏—à—å –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã —Å—Ç—Ä–æ–∏—Ç–µ–ª—è. –ò —Ç–µ–ø–µ—Ä—å –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Å–µ —à–∞–≥–∏, –∞ —Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ –Ω—É–∂–Ω—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

![](src/builder/usage.png)

–ò –≤ –Ω–∞—à–µ–º –∫–æ–¥–µ –ø–æ–ª—É—á–∏—Ç—Å—è —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

```csharp

// –†–∞–Ω—å—à–µ: —Å–æ–∑–¥–∞–≤–∞–ª–∏ –¥–æ–º –≤ —è–≤–Ω–æ–º –≤–∏–¥–µ
var house = House(
    adress: "ulitsa- pushkina-dom-kalatush",
    floors: 2,
    HasGarage = false,
    HasGarden = true,
    HasPool = true,
    HasFancyStatues = true
    )

// –õ–∏–±–æ: —Å–æ–∑–¥–∞–≤–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–æ–º
var house = houseWithPoolAndGardenAndFancyStatues(
    adress: "ulitsa- pushkina-dom-kalatush",
    floors: 2
    )
// –ò –µ—Å–ª–∏ –±—ã –º—ã —Ö–æ—Ç–µ–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ,
// —Ç–æ –ø—Ä–∏—à–ª–æ—Å—å –±—ã –ª–∏–±–æ 
// –º–µ–Ω—è—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –ª–∏–±–æ –≤—ã–∑—ã–≤–∞—Ç—å –Ω–æ–≤—ã–π –¥–æ–º

// –¢–µ–ø–µ—Ä—å –º–æ–∂–µ–º —Å–æ–±—Ä–∞—Ç—å –¥–æ–º "–ø–æ –∫—É—Å–æ—á–∫–∞–º":
var house = HouseBuilder()
    .WithAddress("ulitsa-pushkina-dom-kalatush")
    .WithFloors(2)
    .WithPool()
    .WithGarden()
    .WithStatues()
    .Build()

// –ï—Å–ª–∏ –±—ã –º—ã –∑–∞—Ö–æ—Ç–µ–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —á—Ç–æ-—Ç–æ –µ—â—ë
// , —Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã–ª–æ –±—ã –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –µ—â—ë 
// –æ–¥–∏–Ω –º–µ—Ç–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä WithFountain() –∏ WithPlayground()

```

–¢–æ –µ—Å—Ç—å –º—ã –≤—ã–Ω–µ—Å–ª–∏ –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑ —á–µ–≥–æ-—Ç–æ —Ü–µ–ª—å–Ω–æ–≥–æ –≤ "–∫–∞–∫ –±—ã –ª–µ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä", –∫—É–¥–∞ –º—ã –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –º–æ–∂–µ—à—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏:

–£ –≤–∞—Å –µ—Å—Ç—å –∫–ª–∞—Å—Å Order, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–∫–∞–∑ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–µ. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —ç—Ç–æ –±—ã–ª–æ –±—ã –ø—Ä–æ—Å—Ç–æ:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é –∑–∞–ø–∏—Å—å (record)
public record Order(IEnumerable<OrderItem> Items);

```

–¢–æ –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–æ–∫ –∫–∞–∫–∏—Ö-—Ç–æ –∑–∞–∫–∞–∑–æ–≤:

```csharp
var order = new Order(
    [
        new OrderItem(Name: "banana", Price: 42, Amount: 20),
        new OrderItem(Name: "phone", Price: 30000, Amount: 1),
        new OrderItem(Name: "marker", Price: 201, Amount: 3),
        new OrderItem(Name: "steak", Price: 1337, Amount: 1)
    ]
);

```

–ù–æ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ä–∞—Å—Ç—É—Ç. –ü–æ–º–∏–º–æ –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω—É–∂–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏, –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –µ—â—ë –¥–µ—Å—è—Ç–æ–∫ –ø–æ–ª–µ–π:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é –∑–∞–ø–∏—Å—å (record)
public record Order(
    string CommentForShop,
    string CommentForDelivery,
    IEnumerable<OrderItem> Items,
    DateTimeOffset CreatedAt,
    string? ReceiverPhoneNumber,
    // –∏ –µ—â—ë –º–Ω–æ–≥–æ...
);

```

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –∑–∞—Ö–æ—Ç–∏–º —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ—Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

```csharp
var order = new Order(
    CommentForShop: "–°—Ä–æ—á–Ω–æ!",
    CommentForDelivery: "–û—Å—Ç–∞–≤–∏—Ç—å —É –¥–≤–µ—Ä–∏",
    Items: [
        new OrderItem(Name: "banana", Price: 42, Amount: 20),
        new OrderItem(Name: "phone", Price: 30000, Amount: 1),
        new OrderItem(Name: "marker", Price: 201, Amount: 3),
        new OrderItem(Name: "steak", Price: 1337, Amount: 1)
    ],
    CreatedAt: DateTimeOffset.UtcNow,
    ReceiverPhoneNumber: "+7-900-123-45-67"
);

```

–≠—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ—É–¥–æ–±–Ω–æ. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —á–∞—Å—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ª–æ–≥–∏–∫–∏: –∏–Ω–æ–≥–¥–∞ —Ç–æ–≤–∞—Ä—ã –Ω–∞–¥–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ —Å—Ç—Ä–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–¥—É–∫—Ç—ã, –∞ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –±—ã—Ç–æ–≤—É—é —Ç–µ—Ö–Ω–∏–∫—É. –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –≤ –∑–∞–∫–∞–∑–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –±–æ–ª—å—à–µ 20 —Ç–æ–≤–∞—Ä–æ–≤? –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–ª–∏–µ—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä —Å –≤–∏–ø-—Å—Ç–∞—Ç—É—Å–æ–º) –º–æ–≥—É—Ç –∏–º–µ—Ç—å –±–æ–ª—å—à–µ –ø—Ä–∏–≤–µ–ª–µ–≥–∏–π. –ö–∞–∫ –≤—Å—ë —ç—Ç–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å?     

–í–æ—Ç –∑–¥–µ—Å—å –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω Builder. –ö–∞–∫ –º—ã —É–∂–µ –∑–Ω–∞–µ–º –µ–≥–æ –æ—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –≤—ã–¥–µ–ª–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–∏–ø, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞. 

Builder ‚Äî —ç—Ç–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π:
- –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî —Ö—Ä–∞–Ω–∏—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π API ‚Äî –º–µ—Ç–æ–¥—ã –≤–∏–¥–∞ WithXxx(), –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å–∞–º builder –¥–ª—è —Ü–µ–ø–æ—á–∫–∏ –≤—ã–∑–æ–≤–æ–≤ (fluent interface)
- –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ ‚Äî –º–µ—Ç–æ–¥ Build() —Å–æ–∑–¥–∞—ë—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç

```csharp
// === BUILDER (–°—Ç—Ä–æ–∏—Ç–µ–ª—å) ===
// –ö–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
// –∏ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ Order
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Fluent Interface –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

// –°—Ç—Ä–æ–∏—Ç–µ–ª—å
public class OrderBuilder
{
    // 1. –û–Ω —Ö—Ä–∞–Ω–∏—Ç *–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ, –∏–∑–º–µ–Ω—è–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ*
    private readonly List<OrderItem> _items = [];

    // 2. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç "—Ç–µ–∫—É—á–∏–π" (fluent) –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    public OrderBuilder WithItem(OrderItem item)
    {
        _items.Add(item);
        return this; // <- –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç –¥–ª—è "—Ü–µ–ø–æ—á–∫–∏" –≤—ã–∑–æ–≤–æ–≤
    }

    // 3. –û–Ω –∏–º–µ–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ "Build"
    public Order Build()
    {
        // –í —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –æ–Ω —Å–æ–∑–¥–∞–µ—Ç –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç
        return new Order(_items.ToArray());
    }
}

```

–¢–µ–ø–µ—Ä—å –º–æ–∂–µ–º —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –±–∏–ª–¥–µ—Ä:

```csharp
var orderBuilder = new OrderBuilder() // –ó–∞–∫–∞–∑
    .WithItem(Name: "banana", Price: 42, Amount: 20) // —Å –±–∞–Ω–∞–Ω–∞–º–∏
    .WithItem(Name: "phone", Price: 30000, Amount: 1) // –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º
    .WithItem(Name: "marker", Price: 201, Amount: 3) // –∏ —Ç—Ä–µ–º—è –º–∞—Ä–∫–µ—Ä–∞–º–∏
    .WithItem(Name: "steak", Price: 1337, Amount: 1); // –∏ –æ–¥–Ω–∏–º —Å—Ç–µ–π–∫–æ–º

// –ú—ã –º–æ–∂–µ–º *–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–æ–∏—Ç–µ–ª—è* –≤ –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã,
// —á—Ç–æ–±—ã –æ–Ω–∏ –µ–≥–æ "–¥–æ-–Ω–∞—Å—Ç—Ä–æ–∏–ª–∏".
AddDefaultItems(orderBuilder);
AddRequestedItems(orderBuilder); 
AddForecastedItems(orderBuilder);

Order order = orderBuilder.Build(); // —Å–æ–±–µ—Ä—ë–º –∑–∞–∫–∞–∑

```

–í–∏–¥–∏—Ç–µ –∫—Ä–∞—Å–æ—Ç—É? –õ–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —Ä–∞–∑–Ω–µ—Å–µ–Ω–∞ –ø–æ —Ä–∞–∑–Ω—ã–º –º–µ—Ç–æ–¥–∞–º, –Ω–æ –≤—Å—ë –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º builder'–µ.

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –¥–≤–∞ –≤–∏–¥–∞ –±–∏–ª–¥–µ—Ä–æ–≤:

#### 1. Convenience builder (–£–¥–æ–±–Ω—ã–π –°—Ç—Ä–æ–∏—Ç–µ–ª—å)

> —É–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –±–æ–ª—å—à–∏–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º

–≠—Ç–æ —Ç–∏–ø –º–æ–∂–Ω–æ –æ—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑–æ–≤–∞—Ç—å —Ç–∞–∫:
- –º–æ–¥–µ–ª—å –Ω–∏–∫–∞–∫ –Ω–µ —Å–≤—è–∑–∞–Ω–∞ —Å –±–∏–ª–¥–µ—Ä–æ–º
- –Ω–µ—Å—ë—Ç –≤ —Å–µ–±–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤

–í—Å–ø–æ–Ω–∏–º —Å–∏—Ç—É–∞—Ü–∏—é —Å –æ–≥—Ä–æ–º–Ω—ã–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º:

```csharp
// –≤ –∑–∞–∫–∞–∑–µ –º–Ω–æ–≥–æ –ø–æ–ª–µ–π
public record Order(
    string CommentForShop,
    string CommentForDelivery,
    IEnumerable<OrderItem> Items,
    DateTimeOffset CreatedAt,
    string? ReceiverPhoneNumber
);

// –ø—Ä–æ–ø—É—Å–∫ –∫–æ–¥–∞

// –≠—Ç–æ —Ç–æ, —á–µ–≥–æ –º—ã —Ö–æ—Ç–∏–º –∏–∑–±–µ–∂–∞—Ç—å!
var order = new Order(
    CommentForShop: string.Empty, // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    CommentForDelivery: string.Empty, // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    Items: [new OrderItem(Price: 1337, Amount: 2)], // < - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω—É–∂–Ω–æ–µ –ø–æ–ª–µ
    CreatedAt: DateTimeOffset.UtcNow, // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    ReceiverPhoneNumber: null // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
);

```

Convinience builder —Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É. –û–Ω —Å–∞–º, –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è, —Ö—Ä–∞–Ω–∏—Ç —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

```csharp
// Builder –¥–æ–ª–∂–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
public class OrderBuilder
{
    private readonly List<OrderItem> _items = [];
    private string _commentForShop = string.Empty;
    private string _commentForDelivery = string.Empty;
    private DateTimeOffset _createdAt = DateTimeOffset.UtcNow;
    private string? _receiverPhoneNumber = null;

    public OrderBuilder WithItem(OrderItem item)
    {
        _items.Add(item);
        return this;
    }

    public OrderBuilder WithCommentForShop(string value)
    {
        _commentForShop = value;
        return this;
    }

    public OrderBuilder WithCommentForDelivery(string value)
    {
        _commentForDelivery = value;
        return this;
    }

    public OrderBuilder WithReceiverPhoneNumber(string? value)
    {
        _receiverPhoneNumber = value;
        return this;
    }

    public Order Build()
    {
        return new Order(
            CommentForShop: _commentForShop,
            CommentForDelivery: _commentForDelivery,
            Items: _items,
            CreatedAt: _createdAt,
            ReceiverPhoneNumber: _receiverPhoneNumber
        );
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

–¢–µ–ø–µ—Ä—å –∫–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —á–∏—Å—Ç—ã–º. –ö–ª–∏–µ–Ω—Ç —É–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è –æ—Ç –Ω–æ—Ä–º—ã.

```csharp
var order = new OrderBuilder()
    .WithItem(new OrderItem(Price: 1337, Amount: 2))
    .Build();

// –ò–ª–∏ —Å –±–æ–ª—å—à–µ–π –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–µ–π:
var customOrder = new OrderBuilder()
    .WithItem(new OrderItem(Price: 100, Amount: 5))
    .WithCommentForShop("–£–ø–∞–∫–æ–≤–∞—Ç—å –∞–∫–∫—É—Ä–∞—Ç–Ω–æ!")
    .WithReceiverPhoneNumber("+7-900-000-00-00")
    .Build();

```

–¢–æ –µ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é Convenience Builder –º—ã —É–ø—Ä–æ—â–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º, –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. 

–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å: Stateful Constructor 

#### 2. Stateful Constructor (–°—Ç—Ä–æ–∏—Ç–µ–ª—å —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)

> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –∏–º–µ—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–≤–∞–ª–∏–¥–∞—Ü–∏–∏)

- –≤ –±–∏–ª–¥–µ—Ä –≤—ã–Ω–æ—Å—è—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
    - fail-fast
    - —É–ø—Ä–æ—â–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    - —É–ø—Ä–æ—â–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–º–µ–Ω—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–î–≤–∏–≥–∞–µ–º—Å—è –¥–∞–ª—å—à–µ. –í–æ—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ: –≤ –∑–∞–∫–∞–∑–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ 20 —Ç–æ–≤–∞—Ä–æ–≤. –ì–¥–µ —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å?

–ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä Order, —ç—Ç–æ –Ω–∞—Ä—É—à–∏—Ç –ø—Ä–∏–Ω—Ü–∏–ø –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ ‚Äî –º–æ–¥–µ–ª—å —Å—Ç–∞–Ω–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø—Ä–∞–≤–∏–ª –±–∏–∑–Ω–µ—Å–∞. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å–ª–∏ 21-–π —Ç–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω, –º—ã –ø–æ–π–º—ë–º –æ–± —ç—Ç–æ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ Build().

Stateful Constructor —Ä–µ—à–∞–µ—Ç —ç—Ç–æ —Ç–∞–∫: –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (fail-fast).

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class Order
{
    private Order(IEnumerable<OrderItem> items)
    {
        Items = items;
    }

    public IEnumerable<OrderItem> Items { get; }

    // Builder ‚Äî –≤–ª–æ–∂–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å
    public class OrderBuilder
    {
        private const int MaxOrderItemCount = 20;
        private readonly List<OrderItem> _items = [];

        public OrderBuilder WithItem(OrderItem item)
        {
            if (_items.Count >= MaxOrderItemCount)
                throw new ArgumentException(
                    $"Cannot add more than {MaxOrderItemCount} items");
            
            _items.Add(item);
            return this;
        }

        public Order Build()
        {
            return new Order(_items.ToArray());
        }
    }
}

```

–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
var orderBuilder = new Order.OrderBuilder();
for (int i = 0; i < 20; i++)
{
    orderBuilder.WithItem(new OrderItem(Price: i, Amount: 1));
}

// –≠—Ç–æ –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å—Ä–∞–∑—É –∂–µ!
orderBuilder.WithItem(new OrderItem(Price: 1000, Amount: 1));

```

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- Fail-fast: –æ—à–∏–±–∫–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –∞ –Ω–µ –ø—Ä–∏ Build()
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (–≤ builder'–µ)
- –Ø—Å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏: –≤—ã —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ WithItem() –≤—ã–∑–æ–≤ –≤—ã–∑–≤–∞–ª –ø—Ä–æ–±–ª–µ–º—É
–ü–æ—á–µ–º—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–∏–≤–∞—Ç–Ω—ã–π? –ü–æ—Ç–æ–º—É —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –≤—Å–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏ –∑–∞–∫–∞–∑ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ builder, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—è. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç: –ª—é–±–æ–π Order –≤ —Å–∏—Å—Ç–µ–º–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ –±–æ–ª–µ–µ 20 —Ç–æ–≤–∞—Ä–æ–≤.

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

–ò–Ω–æ–≥–¥–∞ –≤ —Å–∏—Å—Ç–µ–º–µ –µ—Å—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∑–∞–∫–∞–∑–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–∫–∞–∑—ã –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å –ª–∏–º–∏—Ç–æ–º 20 —Ç–æ–≤–∞—Ä–æ–≤) –∏ –ø—Ä–µ–º–∏—É–º-–∑–∞–∫–∞–∑—ã (–±–µ–∑ –ª–∏–º–∏—Ç–∞).

–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥: —Å–æ–∑–¥–∞—Ç—å UnlimitedOrderBuilder –∏ LimitedOrderBuilder –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –æ—Ç–¥–µ–ª—å–Ω–æ.

–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IOrderBuilder
{
    IOrderBuilder WithItem(OrderItem item);
    Order Build();
}

public class LimitedOrderBuilder : IOrderBuilder
{
    private const int MaxOrderItemCount = 20;
    private readonly List<OrderItem> _items = [];

    public IOrderBuilder WithItem(OrderItem item)
    {
        if (_items.Count >= MaxOrderItemCount)
            throw new ArgumentException("Limit exceeded");
        _items.Add(item);
        return this;
    }

    public Order Build()
    {
        return new Order(_items.ToArray());
    }
}

public class UnlimitedOrderBuilder : IOrderBuilder
{
    private readonly List<OrderItem> _items = [];

    public IOrderBuilder WithItem(OrderItem item)
    {
        _items.Add(item);
        return this;
    }

    public Order Build()
    {
        return new Order(_items.ToArray());
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class OrderService
{
    public Order CreateOrder(User user, IOrderBuilder builder)
    {
        // –ö–æ–¥ –Ω–µ –∑–Ω–∞–µ—Ç, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —ç—Ç–æ builder –∏–ª–∏ –Ω–µ—Ç
        return builder
            .WithItem(new OrderItem(Price: 100, Amount: 1))
            .WithItem(new OrderItem(Price: 200, Amount: 2))
            .Build();
    }
}

// –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
var regularBuilder = new LimitedOrderBuilder();
var regularOrder = orderService.CreateOrder(user, regularBuilder);

// –î–ª—è –ø—Ä–µ–º–∏—É–º-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
var premiumBuilder = new UnlimitedOrderBuilder();
var premiumOrder = orderService.CreateOrder(user, premiumBuilder);

```

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Å–º—ã—Å–ª:
- Code –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ builder'–æ–≤
- –í—ã–±–æ—Ä —Ç–∏–ø–∞ builder'–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ —Å–∏—Å—Ç–µ–º—ã (–≥–¥–µ-—Ç–æ –≤—ã—à–µ)
- –≠—Ç–æ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–æ–¥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –∞ –Ω–µ –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### –î–∏—Ä–µ–∫—Ç–æ—Ä

–¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –∏–º–µ–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏ –ª–æ–≥–∏–∫—É.

–ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã —Å–æ–±–∏—Ä–∞–µ–º –ø–∏—Ü—Ü—É:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é –∑–∞–ø–∏—Å—å (record)
public record Pizza(
    PizzaSize Size,
    DoughType DoughType,
    Sauce Sauce,
    IReadOnlyCollection<Topping> Toppings
);

public class PizzaBuilder
{
    private readonly List<Topping> _toppings = [];
    private PizzaSize _size = PizzaSize.Medium;
    private DoughType _doughType = DoughType.Standard;
    private Sauce _sauce = Sauce.Tomato;

    public PizzaBuilder WithTopping(Topping topping) { /* ... */ }
    public PizzaBuilder WithSize(PizzaSize size) { /* ... */ }
    public PizzaBuilder WithDoughType(DoughType type) { /* ... */ }
    public PizzaBuilder WithSause(Sauce sauce) { /* ... */ }

    public Pizza Build() { /* ... */ }
}

```

–ü—Ä–æ–±–ª–µ–º–∞: —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–∏—Ü—Ü—É –ø–æ —Ä–µ—Ü–µ–ø—Ç—É. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–µ–ø–ø–µ—Ä–æ–Ω–∏ –ø–∏—Ü—Ü–∞ ‚Äî —ç—Ç–æ –≤—Å–µ–≥–¥–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è:

1. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Ç–µ—Å—Ç–æ
2. –¢–æ–º–∞—Ç–Ω—ã–π —Å–æ—É—Å
3. –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä
4. –°—ã—Ä –∏ –ø–µ–ø–ø–µ—Ä–æ–Ω–∏

–†–µ—à–µ–Ω–∏–µ: –î–∏—Ä–µ–∫—Ç–æ—Ä ‚Äî –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç builder:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPizzaDirector
{
    PizzaBuilder Direct(PizzaBuilder builder);
}

public class PepperoniPizzaDirector : IPizzaDirector
{
    public PizzaBuilder Direct(PizzaBuilder builder)
    {
        return builder
            .WithDoughType(DoughType.Standard)
            .WithSause(Sauce.Tomato)
            .WithSize(PizzaSize.Medium)
            .WithTopping(Topping.Cheese)
            .WithTopping(Topping.Pepperoni);
    }
}

```

–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
var pizzaBuilder = new PizzaBuilder();
var pepperoniDirector = new PepperoniPizzaDirector();

var myPizza = pepperoniDirector
    .Direct(pizzaBuilder)
    .WithTopping(Topping.Jalapeno)      // –ö–∞—Å—Ç–æ–º–∏–∑–∏—Ä—É–µ–º –ø–æ—Å–ª–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞
    .WithSize(PizzaSize.Large)
    .Build();

```

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —á–µ—Ä–µ–∑ Extension Methods:

–í C# —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç extension methods –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞:

```csharp
public static class PizzaBuilderExtensions
{
    public static PizzaBuilder DirectPepperoni(this PizzaBuilder builder)
    {
        return builder
            .WithDoughType(DoughType.Standard)
            .WithSause(Sauce.Tomato)
            .WithSize(PizzaSize.Medium)
            .WithTopping(Topping.Cheese)
            .WithTopping(Topping.Pepperoni);
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
var myPizza = new PizzaBuilder()
    .DirectPepperoni()
    .WithTopping(Topping.Jalapeno)
    .WithSize(PizzaSize.Large)
    .Build();

```

–≠—Ç–æ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –∏ –∏–∑—è—â–Ω—ã–π —Å–ø–æ—Å–æ–± –≤ C#. –î–∏—Ä–µ–∫—Ç–æ—Ä –∫–∞–∫ –∫–ª–∞—Å—Å –Ω—É–∂–µ–Ω, –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º (—Ä–∞–∑–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞).

–ü—Ä–∏–º–µ—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ (–Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å —Ç–µ—Å—Ç–æ –∏ –Ω–µ –±–æ–ª—å—à–µ 5 —Ç–æ–ø–ø–∏–Ω–≥–æ–≤):

```csharp
using System;
using System.Collections.Generic;

// === –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ ===
public enum PizzaSize { Small, Medium, Large }
public enum DoughType { Standard, Thin, Thick }
public enum Sauce { Tomato, BBQ, White }
public enum Topping { Cheese, Pepperoni, Mushrooms, Olives, Jalapeno, Bacon, Pineapple }

public record Pizza(
    PizzaSize Size,
    DoughType DoughType,
    Sauce Sauce,
    IReadOnlyCollection<Topping> Toppings
);

// === Builder —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ ===
public class PizzaBuilder
{
    private const int MaxAdditionalToppings = 5;
    
    private readonly List<Topping> _toppings = [];
    private PizzaSize _size = PizzaSize.Medium;
    private DoughType _doughType = DoughType.Standard;
    private Sauce _sauce = Sauce.Tomato;
    
    // –§–ª–∞–≥, –∫–æ—Ç–æ—Ä—ã–π –±–ª–æ–∫–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞
    private bool _doughTypeLocked = false;
    
    // –°—á—ë—Ç—á–∏–∫ –±–∞–∑–æ–≤—ã—Ö —Ç–æ–ø–ø–∏–Ω–≥–æ–≤ (–∫–æ—Ç–æ—Ä—ã–µ –¥–æ–±–∞–≤–∏–ª –¥–∏—Ä–µ–∫—Ç–æ—Ä)
    // –ò—Ö –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ–º –≤ –ª–∏–º–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–æ–ø–ø–∏–Ω–≥–æ–≤
    private int _baseToppingsCount = 0;

    // === –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ ===
    
    public PizzaBuilder WithTopping(Topping topping)
    {
        // –í—ã—á–∏—Å–ª—è–µ–º —Å–∫–æ–ª—å–∫–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–æ–ø–ø–∏–Ω–≥–æ–≤ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
        int additionalToppingsCount = _toppings.Count - _baseToppingsCount;
        
        if (additionalToppingsCount >= MaxAdditionalToppings)
        {
            throw new InvalidOperationException(
                $"Cannot add more than {MaxAdditionalToppings} additional toppings");
        }
        
        _toppings.Add(topping);
        return this;
    }

    public PizzaBuilder WithSize(PizzaSize size)
    {
        _size = size;
        return this;
    }

    public PizzaBuilder WithDoughType(DoughType type)
    {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ —Ç–∏–ø —Ç–µ—Å—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–º
        if (_doughTypeLocked)
        {
            throw new InvalidOperationException(
                "Cannot change dough type - it was locked by the recipe");
        }
        
        _doughType = type;
        return this;
    }

    public PizzaBuilder WithSauce(Sauce sauce)
    {
        _sauce = sauce;
        return this;
    }

    public Pizza Build()
    {
        if (_toppings.Count == 0)
        {
            throw new InvalidOperationException("Pizza must have at least one topping");
        }

        return new Pizza(
            Size: _size,
            DoughType: _doughType,
            Sauce: _sauce,
            Toppings: _toppings.AsReadOnly()
        );
    }

    // === –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ ===
    // –≠—Ç–∏ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–º –∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
    
    internal PizzaBuilder SetBaseDoughType(DoughType type)
    {
        _doughType = type;
        _doughTypeLocked = true;  // –ë–ª–æ–∫–∏—Ä—É–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
        return this;
    }

    internal PizzaBuilder AddBaseTopping(Topping topping)
    {
        _toppings.Add(topping);
        _baseToppingsCount++;  // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –±–∞–∑–æ–≤—ã—Ö —Ç–æ–ø–ø–∏–Ω–≥–æ–≤
        return this;
    }

    internal PizzaBuilder SetBaseSauce(Sauce sauce)
    {
        _sauce = sauce;
        return this;
    }

    internal PizzaBuilder SetBaseSize(PizzaSize size)
    {
        _size = size;
        return this;
    }
}

// === –î–∏—Ä–µ–∫—Ç–æ—Ä ===
public interface IPizzaDirector
{
    PizzaBuilder Direct(PizzaBuilder builder);
}

public class PepperoniPizzaDirector : IPizzaDirector
{
    public PizzaBuilder Direct(PizzaBuilder builder)
    {
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        // –≠—Ç–∏ –º–µ—Ç–æ–¥—ã –Ω–µ –ø–æ–¥—á–∏–Ω—è—é—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º
        return builder
            .SetBaseDoughType(DoughType.Standard)  // –¢–µ—Å—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è!
            .SetBaseSauce(Sauce.Tomato)
            .SetBaseSize(PizzaSize.Medium)
            .AddBaseTopping(Topping.Cheese)        // –ë–∞–∑–æ–≤—ã–π —Ç–æ–ø–ø–∏–Ω–≥
            .AddBaseTopping(Topping.Pepperoni);    // –ë–∞–∑–æ–≤—ã–π —Ç–æ–ø–ø–∏–Ω–≥
    }
}

public class VegetarianPizzaDirector : IPizzaDirector
{
    public PizzaBuilder Direct(PizzaBuilder builder)
    {
        return builder
            .SetBaseDoughType(DoughType.Thin)
            .SetBaseSauce(Sauce.White)
            .SetBaseSize(PizzaSize.Medium)
            .AddBaseTopping(Topping.Cheese)
            .AddBaseTopping(Topping.Mushrooms)
            .AddBaseTopping(Topping.Olives);
    }
}

// === –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ===
public class Program
{
    public static void Main()
    {
        Console.WriteLine("=== –ü—Ä–∏–º–µ—Ä 1: –£—Å–ø–µ—à–Ω–∞—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø–µ–ø–ø–µ—Ä–æ–Ω–∏ ===");
        var pizzaBuilder1 = new PizzaBuilder();
        var pepperoniDirector = new PepperoniPizzaDirector();

        var customPepperoni = pepperoniDirector
            .Direct(pizzaBuilder1)
            .WithTopping(Topping.Jalapeno)      // +1 –¥–æ–ø —Ç–æ–ø–ø–∏–Ω–≥ (1/5)
            .WithTopping(Topping.Mushrooms)     // +2 –¥–æ–ø —Ç–æ–ø–ø–∏–Ω–≥ (2/5)
            .WithSize(PizzaSize.Large)          // –†–∞–∑–º–µ—Ä –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å
            .Build();

        PrintPizza(customPepperoni);

        Console.WriteLine("\n=== –ü—Ä–∏–º–µ—Ä 2: –ü–æ–ø—ã—Ç–∫–∞ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ (–û–®–ò–ë–ö–ê) ===");
        try
        {
            var pizzaBuilder2 = new PizzaBuilder();
            var failedPizza = pepperoniDirector
                .Direct(pizzaBuilder2)
                .WithDoughType(DoughType.Thick)  // –≠—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ!
                .Build();
        }
        catch (InvalidOperationException ex)
        {
            Console.WriteLine($"‚ùå –û—à–∏–±–∫–∞: {ex.Message}");
        }

        Console.WriteLine("\n=== –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Ç–æ–ø–ø–∏–Ω–≥–æ–≤ (–û–®–ò–ë–ö–ê) ===");
        try
        {
            var pizzaBuilder3 = new PizzaBuilder();
            var overloadedPizza = pepperoniDirector
                .Direct(pizzaBuilder3)
                .WithTopping(Topping.Bacon)         // +1 (1/5)
                .WithTopping(Topping.Mushrooms)     // +2 (2/5)
                .WithTopping(Topping.Olives)        // +3 (3/5)
                .WithTopping(Topping.Jalapeno)      // +4 (4/5)
                .WithTopping(Topping.Pineapple)     // +5 (5/5)
                .WithTopping(Topping.Bacon)         // +6 - –û–®–ò–ë–ö–ê!
                .Build();
        }
        catch (InvalidOperationException ex)
        {
            Console.WriteLine($"‚ùå –û—à–∏–±–∫–∞: {ex.Message}");
        }

        Console.WriteLine("\n=== –ü—Ä–∏–º–µ—Ä 4: –ú–∞–∫—Å–∏–º—É–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–æ–ø–ø–∏–Ω–≥–æ–≤ ===");
        var pizzaBuilder4 = new PizzaBuilder();
        var maxPizza = pepperoniDirector
            .Direct(pizzaBuilder4)
            .WithTopping(Topping.Bacon)         // +1
            .WithTopping(Topping.Mushrooms)     // +2
            .WithTopping(Topping.Olives)        // +3
            .WithTopping(Topping.Jalapeno)      // +4
            .WithTopping(Topping.Pineapple)     // +5 - –º–∞–∫—Å–∏–º—É–º!
            .WithSize(PizzaSize.Large)
            .Build();

        PrintPizza(maxPizza);

        Console.WriteLine("\n=== –ü—Ä–∏–º–µ—Ä 5: –í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∞—è –ø–∏—Ü—Ü–∞ —Å –±–∞–∑–æ–≤—ã–º–∏ 3 —Ç–æ–ø–ø–∏–Ω–≥–∞–º–∏ ===");
        var pizzaBuilder5 = new PizzaBuilder();
        var vegetarianDirector = new VegetarianPizzaDirector();
        
        var veggiePizza = vegetarianDirector
            .Direct(pizzaBuilder5)
            .WithTopping(Topping.Jalapeno)      // +1 –¥–æ–ø —Ç–æ–ø–ø–∏–Ω–≥
            .WithTopping(Topping.Pineapple)     // +2 –¥–æ–ø —Ç–æ–ø–ø–∏–Ω–≥
            .Build();

        PrintPizza(veggiePizza);
    }

    private static void PrintPizza(Pizza pizza)
    {
        Console.WriteLine($"üçï –ü–∏—Ü—Ü–∞:");
        Console.WriteLine($"   –†–∞–∑–º–µ—Ä: {pizza.Size}");
        Console.WriteLine($"   –¢–µ—Å—Ç–æ: {pizza.DoughType}");
        Console.WriteLine($"   –°–æ—É—Å: {pizza.Sauce}");
        Console.WriteLine($"   –¢–æ–ø–ø–∏–Ω–≥–∏ ({pizza.Toppings.Count}): {string.Join(", ", pizza.Toppings)}");
    }
}

```

#### Interface-Driven builder 

–í–µ—Ä–Ω—ë–º—Å—è –∫ –ø—Ä–æ—Å—Ç–æ–º—É –ø—Ä–∏–º–µ—Ä—É —Å Email. –£ –Ω–∞—Å –µ—Å—Ç—å –º–æ–¥–µ–ª—å:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é –∑–∞–ø–∏—Å—å (record)
public record Email(
    string Address,
    string Subject,
    string Body
);

```

–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ: Address –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –∞ Subject –∏ Body –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã. –ï—Å–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å:

```csharp
var email = new EmailBuilder()
    .WithBody("Hello!")
    .Build();  // –û—à–∏–±–∫–∞! Address –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

```

–¢–æ –æ—à–∏–±–∫–∞ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø—Ä–∏ Build(). –ù–æ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –ø–æ–π–º–∞—Ç—å —ç—Ç–æ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.

–†–µ—à–µ–Ω–∏–µ: Interface-Driven Builder.

–ò–¥–µ—è: –∫–∞–∂–¥—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ builder'–∞, –∏ –º–µ—Ç–æ–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

```csharp
// –ü–µ—Ä–≤—ã–π —à–∞–≥: –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–¥—Ä–µ—Å
public interface IEmailAddressBuilder
{
    IEmailBuilder WithAddress(string address);
}

// –í—Ç–æ—Ä–æ–π —à–∞–≥: –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Subject, Body –∏–ª–∏ Build
public interface IEmailBuilder
{
    IEmailBuilder WithSubject(string subject);
    IEmailBuilder WithBody(string body);
    Email Build();
}

public static class Email
{
    public static IEmailAddressBuilder Builder => new EmailBuilder();

    private class EmailBuilder : IEmailAddressBuilder, IEmailBuilder
    {
        private string? _address;
        private string _subject = string.Empty;
        private string _body = string.Empty;

        // –ü–µ—Ä–≤—ã–π –º–µ—Ç–æ–¥: —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± –Ω–∞—á–∞—Ç—å ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–¥—Ä–µ—Å
        public IEmailBuilder WithAddress(string address)
        {
            _address = address;
            return this;  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º IEmailBuilder, –∞ –Ω–µ IEmailAddressBuilder
        }

        public IEmailBuilder WithSubject(string subject)
        {
            _subject = subject;
            return this;
        }

        public IEmailBuilder WithBody(string body)
        {
            _body = body;
            return this;
        }

        public Email Build()
        {
            if (_address is null)
                throw new ArgumentNullException(nameof(_address));

            return new Email(
                Address: _address,
                Subject: _subject,
                Body: _body
            );
        }
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
// –≠—Ç–æ –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è! WithBody() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç IEmailBuilder, –Ω–æ –Ω–µ—Ç –º–µ—Ç–æ–¥–∞ Build() –±–µ–∑ WithAddress()
// var email = Email.Builder
//     .WithBody("Hello!")
//     .Build();  // –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞!

// –¢–æ–ª—å–∫–æ —Ç–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
var email = Email.Builder
    .WithAddress("user@example.com")
    .WithBody("Hello!")
    .Build();  // OK!

// –ò –ø–æ—Ä—è–¥–æ–∫ –º–µ—Ç–æ–¥–æ–≤ –Ω–µ –≤–∞–∂–µ–Ω, –≤–∞–∂–µ–Ω —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤:
var email2 = Email.Builder
    .WithAddress("user@example.com")
    .WithSubject("Greeting")
    .WithBody("Hi there!")
    .Build();

```

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Å–º—ã—Å–ª:
- –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- Self-documenting code: –∏–∑ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤–∏–¥–Ω–æ, –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
- Fail-fast –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –∞ –Ω–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: –∫–æ–≥–¥–∞ —É –≤–∞—Å –µ—Å—Ç—å —Å—Ç—Ä–æ–≥–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–æ—Ä—è–¥–∫—É –∏–ª–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ–ª–µ–π. –í –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞—è—Ö —ç—Ç–æ overkill.

–í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ: –ö–æ–≥–¥–∞ –ù–ï —Å–º–µ—à–∏–≤–∞—Ç—å —Ç–∏–ø—ã Builder'–æ–≤
- —Å–º–µ—à–∏–≤–∞—Ç—å —Ç–∏–ø—ã builder‚Äô–æ–≤ –º–æ–∂–Ω–æ
- –ù–û! –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å–º–µ—à–µ–Ω–∏—è —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤—É–µ—Ç –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –º–æ–¥–µ–ª–∏
- —Å—Ç–æ–∏—Ç –ø–æ–º–Ω–∏—Ç—å —á—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è builder‚Äô–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –º–æ–¥–µ–ª–∏, –∞ –Ω–µ –Ω–∞–æ–±–æ—Ä–æ—Ç

–ù–∞–ø—Ä–∏–º–µ—Ä:

```csharp
// –ü–ª–æ—Ö–æ: –æ–¥–∏–Ω –∑–∞–∫–∞–∑ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –¥–≤—É–º—è builder'–∞–º–∏
var builder1 = new OrderBuilder();
var builder2 = new LimitedOrderBuilder();

builder1.WithItem(...);
builder2.WithItem(...);

// –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Å–æ–±—Ä–∞—Ç—å –∑–∞–∫–∞–∑? –ö–æ—Ç–æ—Ä—ã–π –∏–∑ –Ω–∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

```

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω—ã –æ–±–∞ —Ç–∏–ø–∞ builder'–æ–≤, —ç—Ç–æ —á–∞—Å—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º–æ–¥–µ–ª—å —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–∞—è –∏ –µ—ë –Ω—É–∂–Ω–æ —Ä–∞–∑–ª–æ–∂–∏—Ç—å:

```csharp
// –õ—É—á—à–µ: —Ä–∞–∑–Ω—ã–µ –∑–∞–∫–∞–∑—ã ‚Äî —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏
public record RegularOrder(IEnumerable<OrderItem> Items);
public record PremiumOrder(IEnumerable<OrderItem> Items, string VipStatus);

// –£ –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–π builder
public class RegularOrderBuilder { }
public class PremiumOrderBuilder { }

```

**–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ: —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è builder'–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥–µ–ª–∏, –∞ –Ω–µ –Ω–∞–æ–±–æ—Ä–æ—Ç.**
–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–º—ã—Å–ª –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
–ì–¥–µ Builder –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ?

1. HTTP –∑–∞–ø—Ä–æ—Å—ã

```csharp
var request = new HttpRequestBuilder()
    .WithUrl("https://api.example.com/orders")
    .WithMethod(HttpMethod.Post)
    .WithHeader("Authorization", "Bearer token")
    .WithBody(jsonPayload)
    .Build();

```

2. SQL queries

```csharp
var query = new SqlQueryBuilder()
    .Select("id", "name", "email")
    .From("users")
    .Where("age > 18")
    .OrderBy("name")
    .Build();

```

3. UI/Configuration

```csharp
var form = new FormBuilder()
    .AddField(new TextField("name", required: true))
    .AddField(new EmailField("email"))
    .AddButton("Submit")
    .Build();

```

–§–∏–ª–æ—Å–æ—Ñ–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –∏ —É—Ä–æ–∫–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–ß—Ç–æ –Ω–∞—Å —É—á–∏—Ç Builder?
1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
Builder –æ—Ç–¥–µ–ª—è–µ—Ç –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç —Å–∞–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞. Model –æ—Å—Ç–∞—ë—Ç—Å—è —á–∏—Å—Ç–æ–π, –∞ –≤—Å—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ builder'–µ.

2. –ì–∏–±–∫–æ—Å—Ç—å –±–µ–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
–í–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä hell) –º—ã –ø–æ–ª—É—á–∞–µ–º —á–∏—Å—Ç—ã–π, —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥.

3. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ
–ù–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –º–æ–¥–µ–ª–∏, –Ω–µ –≤ –∫–∞–∫–æ–π-—Ç–æ —Å–ª—É–∂–±–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –∞ –≤ builder'–µ, –≥–¥–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ.

4. Fluent Interface
–ö–æ–¥ —á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: .WithItem(...).WithComment(...).Build() ‚Äî —ç—Ç–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ.

5. –ò–Ω–≤–µ—Ä—Å–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
–í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–æ–¥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ builder'–∞, –∞ –Ω–µ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

6. –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
Interface-driven –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å.

–î–∞–≤–∞–π—Ç–µ —Å–æ–±–µ—Ä—ë–º –≤—Å—ë –≤–º–µ—Å—Ç–µ –≤ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä:

```csharp
using System;
using System.Collections.Generic;
using System.Linq;

// === –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ ===
public record OrderItem(decimal Price, int Amount);

public record Order(
    string CommentForShop,
    string CommentForDelivery,
    IReadOnlyCollection<OrderItem> Items,
    DateTimeOffset CreatedAt,
    string? ReceiverPhoneNumber
)
{
    public decimal TotalPrice => Items.Sum(i => i.Price * i.Amount);
}

// === Builder —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π ===
public class OrderBuilder
{
    private const int MaxOrderItemCount = 20;
    private readonly List<OrderItem> _items = [];
    private string _commentForShop = string.Empty;
    private string _commentForDelivery = string.Empty;
    private DateTimeOffset _createdAt = DateTimeOffset.UtcNow;
    private string? _receiverPhoneNumber = null;

    public OrderBuilder WithItem(OrderItem item)
    {
        if (_items.Count >= MaxOrderItemCount)
            throw new ArgumentException(
                $"Cannot add more than {MaxOrderItemCount} items to an order");
        
        _items.Add(item);
        return this;
    }

    public OrderBuilder WithCommentForShop(string comment)
    {
        _commentForShop = comment ?? string.Empty;
        return this;
    }

    public OrderBuilder WithCommentForDelivery(string comment)
    {
        _commentForDelivery = comment ?? string.Empty;
        return this;
    }

    public OrderBuilder WithReceiverPhoneNumber(string? phoneNumber)
    {
        _receiverPhoneNumber = phoneNumber;
        return this;
    }

    public Order Build()
    {
        if (_items.Count == 0)
            throw new InvalidOperationException("Order must contain at least one item");

        return new Order(
            CommentForShop: _commentForShop,
            CommentForDelivery: _commentForDelivery,
            Items: _items.AsReadOnly(),
            CreatedAt: _createdAt,
            ReceiverPhoneNumber: _receiverPhoneNumber
        );
    }
}

// === –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ main ===
public class Program
{
    public static void Main()
    {
        Console.WriteLine("=== –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –∑–∞–∫–∞–∑ ===");
        var simpleOrder = new OrderBuilder()
            .WithItem(new OrderItem(Price: 100, Amount: 2))
            .WithItem(new OrderItem(Price: 50, Amount: 1))
            .Build();

        PrintOrder(simpleOrder);

        Console.WriteLine("\n=== –ü—Ä–∏–º–µ—Ä 2: –ó–∞–∫–∞–∑ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ ===");
        var complexOrder = new OrderBuilder()
            .WithItem(new OrderItem(Price: 1337, Amount: 2))
            .WithCommentForShop("–£–ø–∞–∫–æ–≤–∞—Ç—å –∞–∫–∫—É—Ä–∞—Ç–Ω–æ!")
            .WithCommentForDelivery("–û—Å—Ç–∞–≤–∏—Ç—å —É –¥–≤–µ—Ä–∏")
            .WithReceiverPhoneNumber("+7-900-123-45-67")
            .Build();

        PrintOrder(complexOrder);

        Console.WriteLine("\n=== –ü—Ä–∏–º–µ—Ä 3: –ü–æ—à–∞–≥–æ–≤–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ ===");
        var builder = new OrderBuilder();
        
        // –î–æ–±–∞–≤–ª—è–µ–º –±–∞–∑–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã
        AddDefaultItems(builder);
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–≤–∞—Ä—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É
        AddRequestedItems(builder);
        
        // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–µ —Ç–æ–≤–∞—Ä—ã
        AddForecastedItems(builder);
        
        var finalOrder = builder.Build();
        PrintOrder(finalOrder);

        Console.WriteLine("\n=== –ü—Ä–∏–º–µ—Ä 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ ===");
        try
        {
            var badOrder = new OrderBuilder()
                .Build();  // –û—à–∏–±–∫–∞: –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤
        }
        catch (InvalidOperationException ex)
        {
            Console.WriteLine($"–û—à–∏–±–∫–∞: {ex.Message}");
        }

        Console.WriteLine("\n=== –ü—Ä–∏–º–µ—Ä 5: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ ===");
        try
        {
            var tooManyItems = new OrderBuilder();
            for (int i = 0; i < 21; i++)
            {
                tooManyItems.WithItem(new OrderItem(Price: 10, Amount: 1));
            }
        }
        catch (ArgumentException ex)
        {
            Console.WriteLine($"–û—à–∏–±–∫–∞: {ex.Message}");
        }
    }

    private static void AddDefaultItems(OrderBuilder builder)
    {
        builder.WithItem(new OrderItem(Price: 100, Amount: 1));
    }

    private static void AddRequestedItems(OrderBuilder builder)
    {
        builder
            .WithItem(new OrderItem(Price: 200, Amount: 2))
            .WithItem(new OrderItem(Price: 150, Amount: 1));
    }

    private static void AddForecastedItems(OrderBuilder builder)
    {
        builder.WithItem(new OrderItem(Price: 75, Amount: 3));
    }

    private static void PrintOrder(Order order)
    {
        Console.WriteLine($"–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω: {order.CreatedAt:dd.MM.yyyy HH:mm:ss}");
        Console.WriteLine($"–¢–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–∫–∞–∑–µ: {order.Items.Count}");
        Console.WriteLine($"–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞: {order.TotalPrice}‚ÇΩ");
        Console.WriteLine($"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –º–∞–≥–∞–∑–∏–Ω—É: {order.CommentForShop}");
        Console.WriteLine($"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ—Å—Ç–∞–≤–∫–µ: {order.CommentForDelivery}");
        Console.WriteLine($"–¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—è: {order.ReceiverPhoneNumber ?? "–Ω–µ —É–∫–∞–∑–∞–Ω"}");
    }
}
/* –í—ã–≤–æ–¥
=== –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –∑–∞–∫–∞–∑ ===
–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω: 31.10.2025 15:33:45
–¢–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–∫–∞–∑–µ: 2
–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 250‚ÇΩ
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –º–∞–≥–∞–∑–∏–Ω—É: 
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ—Å—Ç–∞–≤–∫–µ: 
–¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—è: –Ω–µ —É–∫–∞–∑–∞–Ω

=== –ü—Ä–∏–º–µ—Ä 2: –ó–∞–∫–∞–∑ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ ===
–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω: 31.10.2025 15:33:45
–¢–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–∫–∞–∑–µ: 1
–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 2674‚ÇΩ
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –º–∞–≥–∞–∑–∏–Ω—É: –£–ø–∞–∫–æ–≤–∞—Ç—å –∞–∫–∫—É—Ä–∞—Ç–Ω–æ!
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ—Å—Ç–∞–≤–∫–µ: –û—Å—Ç–∞–≤–∏—Ç—å —É –¥–≤–µ—Ä–∏
–¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—è: +7-900-123-45-67

=== –ü—Ä–∏–º–µ—Ä 3: –ü–æ—à–∞–≥–æ–≤–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ ===
–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω: 31.10.2025 15:33:45
–¢–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–∫–∞–∑–µ: 6
–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 875‚ÇΩ
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –º–∞–≥–∞–∑–∏–Ω—É: 
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ—Å—Ç–∞–≤–∫–µ: 
–¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—è: –Ω–µ —É–∫–∞–∑–∞–Ω

=== –ü—Ä–∏–º–µ—Ä 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ ===
–û—à–∏–±–∫–∞: Order must contain at least one item

=== –ü—Ä–∏–º–µ—Ä 5: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ ===
–û—à–∏–±–∫–∞: Cannot add more than 20 items to an order
*/

```

–ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å:
1. **–ö–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç ¬´—Ç–µ–ª–µ—Å–∫–æ–ø–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞¬ª.**

 –î–æ–ø—É—Å—Ç–∏–º, —É –≤–∞—Å –µ—Å—Ç—å –æ–¥–∏–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å –¥–µ—Å—è—Ç—å—é –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –ï–≥–æ –Ω–µ—É–¥–æ–±–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å, –ø–æ—ç—Ç–æ–º—É –≤—ã —Å–æ–∑–¥–∞–ª–∏ –µ—â—ë –¥–µ—Å—è—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ —Å –º–µ–Ω—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –í—Å—ë, —á—Ç–æ –æ–Ω–∏ –¥–µ–ª–∞—é—Ç ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å—É—é—Ç –≤—ã–∑–æ–≤ –∫ –±–∞–∑–æ–≤–æ–º—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É, –ø–æ–¥–∞–≤–∞—è –∫–∞–∫–∏–µ-—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–ø—É—â–µ–Ω—ã –≤ –Ω–∏—Ö —Å–∞–º–∏—Ö.

```csharp
class Pizza {
    Pizza(int size) { ... }
    Pizza(int size, boolean cheese) { ... }
    Pizza(int size, boolean cheese, boolean pepperoni) { ... }
    // ...

```

–¢–∞–∫–æ–≥–æ –º–æ–Ω—Å—Ç—Ä–∞ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —è–∑—ã–∫–∞—Ö, –∏–º–µ—é—â–∏—Ö –º–µ—Ö–∞–Ω–∏–∑–º –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –º–µ—Ç–æ–¥–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, C# –∏–ª–∏ Java.

–ü–∞—Ç—Ç–µ—Ä–Ω –°—Ç—Ä–æ–∏—Ç–µ–ª—å –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –ø–æ—à–∞–≥–æ–≤–æ, –≤—ã–∑—ã–≤–∞—è —Ç–æ–ª—å–∫–æ —Ç–µ —à–∞–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –Ω—É–∂–Ω—ã. –ê –∑–Ω–∞—á–∏—Ç, –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –ø—ã—Ç–∞—Ç—å—Å—è ¬´–∑–∞–ø–∏—Ö–Ω—É—Ç—å¬ª –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞.

2. **–ö–æ–≥–¥–∞ –≤–∞—à –∫–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫–∞–∫–æ–≥–æ-—Ç–æ –æ–±—ä–µ–∫—Ç–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–µ –∏ –∂–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–µ –¥–æ–º–∞.**

–°—Ç—Ä–æ–∏—Ç–µ–ª—å –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å, –µ—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –æ–±—ä–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –≤ –¥–µ—Ç–∞–ª—è—Ö.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —ç—Ç–∞–ø—ã –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏—è. –ö–∞–∂–¥–æ–º—É –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—é –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å-—Å—Ç—Ä–æ–∏—Ç–µ–ª—å. –ê –ø–æ—Ä—è–¥–æ–∫ —ç—Ç–∞–ø–æ–≤ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –±—É–¥–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å –∫–ª–∞—Å—Å-–¥–∏—Ä–µ–∫—Ç–æ—Ä.

3. **–ö–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–∞–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–µ—Ä–µ–≤—å—è –ö–æ–º–ø–æ–Ω–æ–≤—â–∏–∫–∞.**

–°—Ç—Ä–æ–∏—Ç–µ–ª—å –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã –ø–æ—à–∞–≥–æ–≤–æ, –∞ –Ω–µ –∑–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥. –ë–æ–ª–µ–µ —Ç–æ–≥–æ, —à–∞–≥–∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ. –ê –±–µ–∑ —ç—Ç–æ–≥–æ –Ω–µ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –≤—Ä–æ–¥–µ –ö–æ–º–ø–æ–Ω–æ–≤—â–∏–∫–∞.

–ó–∞–º–µ—Ç—å—Ç–µ, —á—Ç–æ –°—Ç—Ä–æ–∏—Ç–µ–ª—å –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º –æ–±—ä–µ–∫—Ç–∞–º –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä—É–µ–º–æ–º—É –æ–±—ä–µ–∫—Ç—É, –ø–æ–∫–∞ —Ç–æ—Ç –Ω–µ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –æ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ–∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã—Ö ¬´–±–∏—Ç—ã—Ö¬ª –æ–±—ä–µ–∫—Ç–æ–≤.

### Prototype (–ü—Ä–æ—Ç–æ—Ç–∏–ø)

–ü—Ä–æ—Ç–æ—Ç–∏–ø ‚Äî —ç—Ç–æ –ø–æ—Ä–æ–∂–¥–∞—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã, –Ω–µ –≤–¥–∞–≤–∞—è—Å—å –≤ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ –∑–∞–¥–∞—á—É. –£ –≤–∞—Å –µ—Å—Ç—å —Å–ª–æ–∂–Ω—ã–π –æ–±—ä–µ–∫—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä `User`, —Å–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø–æ–ª–µ–π:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class User
{
    public string Name { get; set; }
    public int Age { get; set; }
    public Email Email { get; set; }
    public List<Permission> Permissions { get; set; }
    public Dictionary<string, object> Settings { get; set; }
}

```

–ò –≤–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –°–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ —á—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–ª—è —á–µ—Ä–µ–∑ –≥–µ—Ç—Ç–µ—Ä—ã:

```csharp
var userCopy = new User 
{ 
    Name = originalUser.Name,
    Age = originalUser.Age,
    Email = originalUser.Email,
    Permissions = originalUser.Permissions,
    Settings = originalUser.Settings
};

```

–û–¥–Ω–∞–∫–æ –∑–¥–µ—Å—å –µ—Å—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º:
1. **–ª–æ–≥–∏–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞**
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å —Å–ª–æ–∂–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å 20 –ø–æ–ª—è–º–∏. –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –µ–≥–æ —Ç–æ—á–Ω—É—é –∫–æ–ø–∏—é, –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—Å–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç –≤—Å–µ 20 –ø–æ–ª–µ–π –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∏—Ö –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞. –≠—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –∏ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ DRY (Don't Repeat Yourself).
2. **–¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ–∫—Ä—ã—Ç—ã –∏–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ**
–ß—Ç–æ, –µ—Å–ª–∏ —É –æ–±—ä–µ–∫—Ç–∞ –µ—Å—Ç—å private –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –Ω–æ —É –≤–∞—Å –Ω–µ—Ç public "–≥–µ—Ç—Ç–µ—Ä–æ–≤" –¥–ª—è –Ω–∏—Ö? –í—ã, –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥, –ø—Ä–æ—Å—Ç–æ –Ω–µ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. –ë–æ–ª–µ–µ —Ç–æ–≥–æ, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –º–æ–∂–µ—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç), –∞ –º—ã —Ö–æ—Ç–∏–º —Ç–æ—á–Ω—É—é –∫–æ–ø–∏—é —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
3. **–æ–±—ä–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏, –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø –Ω–µ –∏–∑–≤–µ—Å—Ç–≤–µ–Ω**
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —É –≤–∞—Å –µ—Å—Ç—å –º–∞—Å—Å–∏–≤ Shape[], –≤ –∫–æ—Ç–æ—Ä–æ–º –ª–µ–∂–∞—Ç –æ–±—ä–µ–∫—Ç—ã Circle –∏ Square. –í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–π—Ç–∏ –ø–æ –º–∞—Å—Å–∏–≤—É –∏ —Å–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞.

```csharp
foreach (Shape shape in shapes)
{
    // –ß—Ç–æ –∑–¥–µ—Å—å –ø–∏—Å–∞—Ç—å?
    Shape copy = ???
}

```

–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å new Circle() –∏–ª–∏ new Square(), –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—ã –æ–ø–µ—Ä–∏—Ä—É–µ—Ç–µ —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–º —Ç–∏–ø–æ–º Shape. –í–∞–º –Ω—É–∂–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å–∫–∞–∑–∞—Ç—å —Å–∞–º–æ–º—É –æ–±—ä–µ–∫—Ç—É: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π –µ—â–µ –æ–¥–Ω–æ–≥–æ —Ç–∞–∫–æ–≥–æ –∂–µ, –∫–∞–∫ —Ç—ã".
–ò–ª–∏ –¥—Ä—É–≥–æ–π –ø—Ä–∏–º–µ—Ä, —É –Ω–∞—Å –µ—Å—Ç—å –∞–¥–º–∏–Ω—ã –∏ –µ—Å—Ç—å –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class User { }
public class AdminUser : User { }
public class GuestUser : User { }

public void DuplicateUser(User original)
{
    // –ö–∞–∫–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤—ã–∑–≤–∞—Ç—å? –ú—ã –Ω–µ –∑–Ω–∞–µ–º, —ç—Ç–æ Admin –∏–ª–∏ Guest!
    User copy = ??? // –¢–æ–∂–µ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ —ç—Ç–æ —É –Ω–∞—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
}

```

–í—Å–µ —Ç–∞–∫–∏–µ –ø–æ–ø—ã—Ç–∫–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç –±—É–¥—É—Ç –ø–æ—Ö–æ–∂–∏ –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ –≤–æ—Å—Å–æ–∑–¥–∞—Ç—å —Å–∞–º–æ–ª—ë—Ç —Å–æ –≤—Å–µ–π –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é, –æ–ø–∏—Ä–∞—è—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥:
![](src/prototype/plane.png)
–ù–∞–º –Ω—É–∂–µ–Ω –∫–∞–∫–æ–π-—Ç–æ *—á–µ—Ä—Ç—ë–∂*. –≠—Ç–æ –∏ –µ—Å—Ç—å —Å—É—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –ü—Ä–æ—Ç–æ—Ç–∏–ø. ### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

**–ü—Ä–æ—Ç–æ—Ç–∏–ø** (Prototype) ‚Äî —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç —Å–∞–º –∑–Ω–∞–µ—Ç, –∫–∞–∫ —Å–µ–±—è –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –û–Ω –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ø–∏–∏ —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞ –Ω–∞ —Å–∞–º –æ–±—ä–µ–∫—Ç-–ø—Ä–æ—Ç–æ—Ç–∏–ø.

–ú—ã –¥–æ–±–∞–≤–ª—è–µ–º –Ω–µ–∫–∏–π –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä –º–µ—Ç–æ–¥ Clone():

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype
{
    IPrototype Clone();
}

public class User : IPrototype
{
    public string Name { get; set; }
    public int Age { get; set; }
    
    public IPrototype Clone()
    {
        return new User 
        { 
            Name = this.Name,
            Age = this.Age 
        };
    }
}

```

–¢–µ–ø–µ—Ä—å, –≥–¥–µ –±—ã –≤–∞–º –Ω–∏ –Ω—É–∂–Ω–∞ –±—ã–ª–∞ –∫–æ–ø–∏—è, –º—ã –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ–º:

```csharp
var copy = original.Clone();

```

–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ –∏ –Ω–µ –æ–±—è–∑–∞–Ω—ã –∑–Ω–∞—Ç—å, –∫–∞–∫ –≤–Ω—É—Ç—Ä–∏ —É—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ–ø–∏—è. –û–±—ä–µ–∫—Ç —Å–∞–º –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è —ç—Ç—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.

–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ –∏–¥–µ—é —Å –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞–º–∏ –º–æ–∂–Ω–æ —Ä–∞–∑–≤–∏—Ç—å –∫—É–¥–∞ —Å–∏–ª—å–Ω–µ–µ. –î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤:

#### Shallow copy (–ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –æ–±—ä–µ–∫—Ç —Å –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class Prototype
{
    private readonly IReadOnlyCollection<int> _relatedEntityIds;

    public Prototype(IReadOnlyCollection<int> relatedEntityIds)
    {
        _relatedEntityIds = relatedEntityIds;
    }

    public Prototype Clone()
    {
        // –ü—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—é
        return new Prototype(_relatedEntityIds);
    }
}

```

–ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

- –ú—ã —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç `Prototype`
- –ù–æ `_relatedEntityIds` ‚Äî —ç—Ç–æ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ —Å—Å—ã–ª–∫–∞ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ –∏ –∫–æ–ø–∏–∏

–¢–æ –µ—Å—Ç—å –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞: –º—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞ Prototype, –Ω–æ –æ–Ω–∏ –æ–±–∞ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é –≤ –ø–∞–º—è—Ç–∏. –ï—Å–ª–∏ –º—ã –∏–∑–º–µ–Ω–∏–º —ç—Ç—É –∫–æ–ª–ª–µ–∫—Ü–∏—é –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –æ–Ω–∞ –Ω–µ IReadOnlyCollection), –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–≤–∏–¥–∏—Ç –∏ –∫–æ–ø–∏—è.

–≠—Ç–æ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ (shallow) –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ. –û–Ω–æ –±—ã—Å—Ç—Ä–æ–µ, –Ω–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–º –ø–æ–±–æ—á–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–∞–º.

```

Original:    Clone:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇName: "A"‚îÇ  ‚îÇName: "A"‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚îÇ            ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚Üì
      [1, 2, 3, 4] (–æ–±—â–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è)

```

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏:
- –ö–æ–ª–ª–µ–∫—Ü–∏—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è (IReadOnlyCollection)
- –í—ã –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –µ—ë –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å

–û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è, —ç—Ç–æ —É–∂–µ –ø—Ä–æ–±–ª–µ–º–∞.

#### Deep copy (–≥–ª—É–±–æ–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)

–ï—Å–ª–∏ –≤ –æ–±—ä–µ–∫—Ç–µ –µ—Å—Ç—å –∏–∑–º–µ–Ω—è–µ–º—ã–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –ù–∞–º –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Å–∞–º –æ–±—ä–µ–∫—Ç, –Ω–æ –∏ –≤—Å–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã:

```csharp
// –û–±—ë—Ä–Ω—É—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–∏–∑–º–µ–Ω—è–µ–º–æ–µ)
public class WrappedValue
{
    public int Value { get; set; }

    public WrappedValue Clone()
    {
        return new WrappedValue { Value = this.Value };
    }
}

// –ü—Ä–æ—Ç–æ—Ç–∏–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å–ø–∏—Å–æ–∫ –æ–±—ë—Ä–Ω—É—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
public class DeepCopyPrototype
{
    private readonly List<WrappedValue> _values;

    public DeepCopyPrototype(List<WrappedValue> values)
    {
        _values = values;
    }

    public DeepCopyPrototype Clone()
    {
        // –ö–ª—é—á: –º—ã –∫–ª–æ–Ω–∏—Ä—É–µ–º –∏ —Å–∞–º —Å–ø–∏—Å–æ–∫, –∏ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –Ω—ë–º
        List<WrappedValue> clonedValues = _values
            .Select(x => x.Clone())  // –ö–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è!
            .ToList();
        /*
        1. –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ (.ToList()).

        2. –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É x –≤ —Å—Ç–∞—Ä–æ–º —Å–ø–∏—Å–∫–µ.

        3. –í—ã–∑—ã–≤–∞–µ–º x.Clone() –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞, —Å–æ–∑–¥–∞–≤–∞—è –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã WrappedValue.
        */

        return new DeepCopyPrototype(clonedValues);
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ –∫–∞–∫-—Ç–æ —Ç–∞–∫:

```csharp
var original = new DeepCopyPrototype(new List<WrappedValue>
{
    new WrappedValue { Value = 10 },
    new WrappedValue { Value = 20 }
});

var copy = original.Clone();

// –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ–ø–∏–∏, –æ—Ä–∏–≥–∏–Ω–∞–ª –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–µ—Ç
// –ü–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã WrappedValue

```

–ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω deep copy:
- –û–±—ä–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–∫–∏, —Å–ª–æ–≤–∞—Ä–∏, –¥—Ä—É–≥–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- –≠—Ç–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–∑–º–µ–Ω—è–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã
- –í—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ø–∏—é –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞

#### –ò–µ—Ä–∞—Ä—Ö–∏–∏ —Ç–∏–ø–æ–≤ 

–¢–µ–ø–µ—Ä—å –≤–µ—Ä–Ω—ë–º—Å—è –∫ –≥–ª–∞–≤–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–µ - –∏–µ—Ä–∞—Ä—Ö–∏—è–º. 

–†–µ—à–∏—Ç—å –µ—ë –º–æ–∂–Ω–æ —Ç–∞–∫:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IHierarchyPrototype
{
    IHierarchyPrototype Clone();
}

// –¢–∏–ø A
public class FirstDerivedPrototype : IHierarchyPrototype
{
    private readonly string _name;
    private readonly int _age;

    public FirstDerivedPrototype(string name, int age)
    {
        _name = name;
        _age = age;
    }

    public IHierarchyPrototype Clone()
    {
        return new FirstDerivedPrototype(_name, _age);
    }
}

// –¢–∏–ø B
public class SecondDerivedPrototype : IHierarchyPrototype
{
    private readonly long _iterationCount;

    public SecondDerivedPrototype(long iterationCount)
    {
        _iterationCount = iterationCount;
    }

    public IHierarchyPrototype Clone()
    {
        return new SecondDerivedPrototype(_iterationCount);
    }
}

```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫:

```csharp
public void ProcessPrototype(IHierarchyPrototype proto)
{
    // ...

    // –ú—ã –ù–ï –∑–Ω–∞–µ–º, FirstDerivedPrototype —ç—Ç–æ –∏–ª–∏ SecondDerivedPrototype
    // –ù–æ –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é!
    var clone = proto.Clone();
    
    // clone –±—É–¥–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    // –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –∑–Ω–∞–µ—Ç, –∫–∞–∫ —Å–µ–±—è –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å

    // ...
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
var first = new FirstDerivedPrototype("Alice", 30);
var second = new SecondDerivedPrototype(1000);

ProcessPrototype(first);   // –°–æ–∑–¥–∞—Å—Ç –∫–æ–ø–∏—é FirstDerivedPrototype
ProcessPrototype(second);  // –°–æ–∑–¥–∞—Å—Ç –∫–æ–ø–∏—é SecondDerivedPrototype

```

–≠—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É: —Ç–µ–ø–µ—Ä—å –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å typeof, is, as –∏–ª–∏ switch –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è. –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å —Å–∞–º –∑–Ω–∞–µ—Ç, –∫–∞–∫ —Å–µ–±—è –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å.

–ï—Å—Ç—å –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å Prototype. –ü–µ—Ä–≤—ã–π ‚Äî —á–µ—Ä–µ–∑ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å:

```csharp
// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
public abstract class Prototype
{
    public abstract Prototype Clone();
}

public class ClassPrototype : Prototype
{
    public override ClassPrototype Clone()
    {
        return new ClassPrototype();
    }
}

```

–í—Ç–æ—Ä–æ–π ‚Äî —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype
{
    IPrototype Clone();
}

public class InterfacePrototype : IPrototype
{
    // –Ø–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    IPrototype IPrototype.Clone()
    {
        return Clone();
    }

    // –ê —Å–∞–º –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø
    public InterfacePrototype Clone()
    {
        return new InterfacePrototype();
    }
}

```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤–æ –≤—Ç–æ—Ä–æ–º –ø—Ä–∏–º–µ—Ä–µ (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç—Ñ–µ—Ä–π—Å—ã) –¥–≤–∞ –º–µ—Ç–æ–¥–∞ Clone(). –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —ç—Ç–∞ –¥–≤–æ–π–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è? –ö–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, Clone() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç IPrototype. –ù–æ —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø:

```csharp
IPrototype proto = new InterfacePrototype();
var clone = proto.Clone();  // –¢–∏–ø: IPrototype, —Ç–µ—Ä—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é!

// –° –¥–≤–æ–π–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π:
InterfacePrototype proto2 = new InterfacePrototype();
var clone2 = proto2.Clone();  // –¢–∏–ø: InterfacePrototype, —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏!

```

–ö–∞–∫–æ–π –≤—ã–±—Ä–∞—Ç—å?
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî –±–æ–ª–µ–µ –≥–∏–±–∫–∏–π, –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –ª—É—á—à–µ –¥–ª—è —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã—Ö —Ç–∏–ø–æ–≤
- –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å ‚Äî –ª—É—á—à–µ, –µ—Å–ª–∏ –µ—Å—Ç—å –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤

–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º C# –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.

#### –ü—Ä–æ–±–ª–µ–º–∞ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ vs –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)

–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ —É –æ–±–æ–∏—Ö —ç—Ç–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ (—á—Ç–æ —á–µ—Ä–µ–∑ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã, —á—Ç–æ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã) –µ—Å—Ç—å –æ–±—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤:

```csharp 
public abstract class Prototype
{
    public void DoSomeStuff()
    {
        // –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤
        Console.WriteLine("Doing common work...");
    }

    public abstract Prototype Clone();
}

public class ClassPrototype : Prototype
{
    public void DoOtherStuff()
    {
        Console.WriteLine("Doing specific work...");
    }

    public override Prototype Clone()
    {
        return new ClassPrototype();
    }
}

```

–¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å—Ü–µ–Ω–∞—Ä–∏–π, –≥–¥–µ –Ω—É–∂–Ω–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–±—â—É—é –ª–æ–≥–∏–∫—É:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class Scenario
{
    public static Prototype CloneAndDoSomeStuff(Prototype prototype)
    {
        var clone = prototype.Clone();
        clone.DoSomeStuff();  // –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –µ—Å—Ç—å –≤ –±–∞–∑–æ–≤–æ–º –∫–ª–∞—Å—Å–µ
        return clone;
    }

    public static void TopLevelScenario()
    {
        var prototype = new ClassPrototype();
        Prototype clone = CloneAndDoSomeStuff(prototype);
        
        // –ü–†–û–ë–õ–ï–ú–ê: —Ç–µ–ø–µ—Ä—å clone ‚Äî —ç—Ç–æ Prototype, –∞ –Ω–µ ClassPrototype
        // –ú—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Ç–∏–ø–µ!
        
        clone.DoOtherStuff();  // –û–®–ò–ë–ö–ê –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞! DoOtherStuff –Ω–µ—Ç –≤ Prototype
    }
}

```

–°—Ç–æ–ª–∫–Ω—ë–º—Å—è –ª–∏ –º—ã —Å —Ç–æ–π –∂–µ –ø—Ä–æ–±–ª–µ–º–æ–π –µ—Å–ª–∏ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã?

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype
{
    IPrototype Clone();
    void DoSomeStuff();
}

public class InterfacePrototype : IPrototype
{
    public IPrototype Clone()
    {
        return new InterfacePrototype();
    }

    public void DoSomeStuff()
    {
        Console.WriteLine("Doing common work...");
    }

    public void DoOtherStuff()
    {
        Console.WriteLine("Doing specific work...");
    }
}

public class Scenario
{
    public static IPrototype CloneAndDoSomeStuff(IPrototype prototype)
    {
        var clone = prototype.Clone();
        clone.DoSomeStuff();
        return clone;
    }

    public static void TopLevelScenario()
    {
        var prototype = new InterfacePrototype();
        IPrototype clone = CloneAndDoSomeStuff(prototype);
        
        // –ú—ã –º–æ–∂–µ–º –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ç–∏–ø—É, –Ω–æ –ø—Ä–∏—Ö—Ä–¥–∏—Ç—Å—è –¥–µ–ª–∞—Ç—å cast
        InterfacePrototype specificClone = (InterfacePrototype)clone;
        specificClone.DoOtherStuff();  // OK!
    }
}

```

–¢—É—Ç —É–∂–µ –ª—É—á—à–µ, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–µ–ª–∞—Ç—å —è–≤–Ω—ã–µ –∫–∞—Å—Ç—ã–µ –∫–∞–∂–µ—Ç—Å—è –Ω–µ –æ—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤—ã–º —Ä–µ—à–µ–Ω–∏–µ–º. 

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –µ—â—ë –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã:
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é: —É –Ω–∞—Å –µ—Å—Ç—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∏–≥—É—Ä–∞–º–∏. –í—Å–µ —Ñ–∏–≥—É—Ä—ã –º–æ–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∏—Å–æ–≤–∞—Ç—å:

```csharp
// –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
public abstract class Shape
{
    public string Color { get; set; }
    public double X { get; set; }
    public double Y { get; set; }

    protected Shape(string color, double x, double y)
    {
        Color = color;
        X = x;
        Y = y;
    }

    // –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–≥—É—Ä
    public void Draw()
    {
        Console.WriteLine($"Drawing {GetType().Name} at ({X}, {Y}) with color {Color}");
    }

    public void MoveTo(double newX, double newY)
    {
        X = newX;
        Y = newY;
    }

    // –ú–µ—Ç–æ–¥ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    public abstract Shape Clone();
}

```

–¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∏–≥—É—Ä—ã:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class Circle : Shape
{
    public double Radius { get; set; }

    public Circle(string color, double x, double y, double radius)
        : base(color, x, y)
    {
        Radius = radius;
    }

    public override Circle Clone()
    {
        return new Circle(Color, X, Y, Radius);
    }

    // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä—É–≥–∞
    public void Scale(double factor)
    {
        Radius *= factor;
        Console.WriteLine($"Circle scaled to radius {Radius}");
    }
}

public class Rectangle : Shape
{
    public double Width { get; set; }
    public double Height { get; set; }

    public Rectangle(string color, double x, double y, double width, double height)
        : base(color, x, y)
    {
        Width = width;
        Height = height;
    }

    public override Rectangle Clone()
    {
        return new Rectangle(Color, X, Y, Width, Height);
    }

    // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞
    public void Resize(double newWidth, double newHeight)
    {
        Width = newWidth;
        Height = newHeight;
        Console.WriteLine($"Rectangle resized to {Width}x{Height}");
    }
}

```

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–±–ª–µ–º–∞: —Ö–æ—Ç–∏–º –Ω–∞–ø–∏—Å–∞—Ç—å –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∫–ª–æ–Ω–∏—Ä—É–µ—Ç —Ñ–∏–≥—É—Ä—É, –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –µ—ë –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class ShapeProcessor
{
    // –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±—É—é —Ñ–∏–≥—É—Ä—É
    public static Shape CloneAndMove(Shape shape, double newX, double newY)
    {
        var clone = shape.Clone();  // –ö–ª–æ–Ω–∏—Ä—É–µ–º
        clone.MoveTo(newX, newY);    // –ü–µ—Ä–µ–º–µ—â–∞–µ–º
        return clone;                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
public static void Main()
{
    var circle = new Circle("Red", 10, 10, 5);
    
    // –í—ã–∑—ã–≤–∞–µ–º –Ω–∞—à –º–µ—Ç–æ–¥
    Shape clonedShape = ShapeProcessor.CloneAndMove(circle, 50, 50);
    
    // clonedShape –∏–º–µ–µ—Ç —Ç–∏–ø Shape, –∞ –Ω–µ Circle!
    // –ú—ã –Ω–µ –º–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ Scale()
    
    // clonedShape.Scale(2.0);  // –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!
    
    // –ü—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –¥–µ–ª–∞—Ç—å cast:
    if (clonedShape is Circle clonedCircle)
    {
        clonedCircle.Scale(2.0);  // –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç
    }
}

```

–¢–æ –µ—Å—Ç—å —É –Ω–∞—Å –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞

```csharp
public static Shape CloneAndMove(Shape shape, ...)
                   ‚Üë
            –≤–æ–∑–≤—Ä–∞—â–∞–µ–º Shape, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø!

```

–î–∞–∂–µ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –º–µ—Ç–æ–¥ `Clone()` –≤ `Circle` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Circle`, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤–∏–¥–∏—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ (`Shape`), –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å.

```text
–ß—Ç–æ –º—ã —Ö–æ—Ç–∏–º:
Circle ‚Üí CloneAndMove ‚Üí Circle (—Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ —Ç–∏–ø!)
                         ‚Üì
                    –º–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å Scale()

–ß—Ç–æ –º—ã –ø–æ–ª—É—á–∞–µ–º:
Circle ‚Üí CloneAndMove ‚Üí Shape (–ø–æ—Ç–µ—Ä—è–ª–∏ —Ç–∏–ø!)
                         ‚Üì
                    –Ω–µ –º–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å Scale() –±–µ–∑ cast

```

–¢–∞ –∂–µ —Å–∞–º–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –±—É–¥–µ—Ç —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype
{
    IPrototype Clone();
    void Draw();
}

public class Circle : IPrototype
{
    public double Radius { get; set; }

    public Circle(double radius)
    {
        Radius = radius;
    }

    // –Ø–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    IPrototype IPrototype.Clone()
    {
        return Clone();
    }

    // –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Circle
    public Circle Clone()
    {
        return new Circle(Radius);
    }

    public void Draw()
    {
        Console.WriteLine($"Drawing circle with radius {Radius}");
    }

    public void Scale(double factor)
    {
        Radius *= factor;
    }
}

public class Rectangle : IPrototype
{
    public double Width { get; set; }
    public double Height { get; set; }

    public Rectangle(double width, double height)
    {
        Width = width;
        Height = height;
    }

    IPrototype IPrototype.Clone()
    {
        return Clone();
    }

    public Rectangle Clone()
    {
        return new Rectangle(Width, Height);
    }

    public void Draw()
    {
        Console.WriteLine($"Drawing rectangle {Width}x{Height}");
    }

    public void Resize(double w, double h)
    {
        Width = w;
        Height = h;
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class Scenario
{
    public static IPrototype CloneAndDraw(IPrototype prototype)
    {
        var clone = prototype.Clone();
        clone.Draw();
        return clone;
    }

    public static void Main()
    {
        var circle = new Circle(5.0);
        
        // –í—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥
        IPrototype clonedProto = CloneAndDraw(circle);
        
        // —Ç–∏–ø IPrototype, –∞ –Ω–µ Circle!
        // clonedProto.Scale(2.0);  // –û—à–∏–±–∫–∞!
        
        // –°–Ω–æ–≤–∞ –Ω—É–∂–µ–Ω cast:
        if (clonedProto is Circle clonedCircle)
        {
            clonedCircle.Scale(2.0);  // –†–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ–∫—Ä–∞—Å–∏–≤–æ
        }
    }
}

```

–¢–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞! –¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî IPrototype, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–ª–∞—Å—Å.

–ü–æ—á–µ–º—É —ç—Ç–æ –ø–ª–æ—Ö–æ?
- –ù–∞—Ä—É—à–∞–µ—Ç—Å—è type safety ‚Äî –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –º–æ–∂–µ—Ç –≤–∞–º –ø–æ–º–æ—á—å
- –ù—É–∂–Ω—ã runtime –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî is, as, switch
- –í–æ–∑–º–æ–∂–Ω—ã –æ—à–∏–±–∫–∏ ‚Äî –µ—Å–ª–∏ –≤—ã —Å–¥–µ–ª–∞–µ—Ç–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π cast, –ø–æ–ª—É—á–∏—Ç–µ null –∏–ª–∏ InvalidCastException
- –ö–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ö—Ä—É–ø–∫–∏–º ‚Äî –ª–µ–≥–∫–æ –æ—à–∏–±–∏—Ç—å—Å—è

–†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏

#### –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ 

–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä-—Ç–∏–ø - –ø–∞—Ä–∞–º–µ—Ç—Ä-—Ç–∏–ø, —Å—Å—ã–ª–∞—é—â–∏–π—Å—è –Ω–∞ —Å–µ–±—è –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö –Ω–∞–ª–æ–∂–µ–Ω–Ω—ã—Ö –Ω–∞ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∞–≥—Ä—É–º–µ–Ω—Ç—ã-—Ç–∏–ø—ã

–í—Å—Ç—Ä–µ—á–∞–π—Ç–µ —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CRTP (Curiously Recurring Template Pattern) ‚Äî —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä-—Ç–∏–ø:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype<T> where T : IPrototype<T>
{
    T Clone();
    void DoSomeStuff();
}

public class Prototype : IPrototype<Prototype>
{
    public Prototype Clone()
    {
        return new Prototype();
    }

    public void DoSomeStuff()
    {
        Console.WriteLine("Doing common work...");
    }

    public void DoOtherStuff()
    {
        Console.WriteLine("Doing specific work...");
    }
}

```

–ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

- –ü–∞—Ä–∞–º–µ—Ç—Ä —Ç–∏–ø–∞ T –≤ IPrototype<T> –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Å–∞–º–∏–º —Å–æ–±–æ–π: where T : IPrototype<T>. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- –ï—Å–ª–∏ –≤—ã —Ä–µ–∞–ª–∏–∑—É–µ—Ç–µ IPrototype<T>, —Ç–æ T –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–ª–∞—Å—Å–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç IPrototype<T>
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ Clone() –≤–µ—Ä–Ω—ë—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype<T> where T : IPrototype<T>
                     ‚Üë                         ‚Üë
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     –¢–∏–ø T –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å IPrototype<T>

```

–û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ, —á—Ç–æ –≤—ã –≤—Å–µ –ø–æ–º–Ω–∏—Ç–µ CRTP –µ—â—ë –∏–∑ –ø–ª—é—Å–æ–≤ –∏ –Ω–µ –Ω—É–∂–Ω–æ –ª–∏—à–Ω–∏–π —Ä–∞–∑ –æ–±—ä—è—Å–Ω—è—Ç—å —á—Ç–æ —ç—Ç–æ –∏ –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–¢–æ –µ—Å—Ç—å —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class Scenario
{
    public static T CloneAndDoSomeStuff<T>(T prototype)
        where T : IPrototype<T>
    {
        var clone = prototype.Clone();  // –¢–∏–ø: T (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π!)
        clone.DoSomeStuff();
        return clone;
    }

    public static void TopLevelScenario()
    {
        var prototype = new Prototype();
        Prototype clone = CloneAndDoSomeStuff(prototype);  // –¢–∏–ø —Å–æ—Ö—Ä–∞–Ω—ë–Ω!
        
        clone.DoOtherStuff();  // –ù–∏–∫–∞–∫–∏—Ö cast'–æ–≤!
    }
}

```

–ê —á—Ç–æ, –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—è? –ù–∞–ø—Ä–∏–º–µ—Ä, SecondPrototype –Ω–∞—Å–ª–µ–¥—É–µ—Ç Prototype:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class SecondPrototype : Prototype, IPrototype<SecondPrototype>
{
    public override SecondPrototype Clone()
    {
        return new SecondPrototype();
    }
}

```

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?
- SecondPrototype –Ω–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç Prototype, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç IPrototype<Prototype>
- –ù–æ SecondPrototype —è–≤–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç IPrototype<SecondPrototype>
- –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ Clone() –≤ SecondPrototype –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º–µ–Ω–Ω–æ SecondPrototype

```csharp
public static void Hierarchy()
{
    var second = new SecondPrototype();
    SecondPrototype clonedSecond = CloneAndDoSomeStuff(second);
    
    // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø!
}

```

–ù–æ —Ç—É—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ —Å–º–µ—à–∏–≤–∞–Ω–∏–µ–º –æ–±–æ–±—â—ë–Ω–Ω—ã—Ö –∏ –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:

```csharp
// –≠—Ç–æ –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–±–µ–∑ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏)
public interface IPrototype
{
    void DoSomeStuff() { }
}

// –≠—Ç–æ –æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π)
public interface IPrototype<T> : IPrototype where T : IPrototype<T>
{
    T Clone();
}

public record Container(IPrototype Prototype);

static void NonGeneric()
{
    // –ü—Ä–æ–±–ª–µ–º–∞: Container —Ö—Ä–∞–Ω–∏—Ç IPrototype
    // –ù–æ IPrototype –Ω–µ –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥–∞ Clone()!
    var container = new Container(new Prototype());
    
    // –ö–∞–∫ —Ç–µ–ø–µ—Ä—å –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å?
    // container.Prototype.Clone();  // –û—à–∏–±–∫–∞! –ù–µ—Ç Clone() –≤ IPrototype
}

```

–ö–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —á–µ—Ä–µ–∑ –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å IPrototype, –≤—ã —Ç–µ—Ä—è–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–ø–µ –∏ –Ω–µ –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å –æ–±–æ–±—â—ë–Ω–Ω—ã–π Clone().

–†–µ—à–µ–Ω–∏–µ: –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã—Ö —Ç–∏–ø–æ–≤, –¥–æ–±–∞–≤—å—Ç–µ Clone() –≤ –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype
{
    IPrototype Clone();  // –ù–µ–æ–±–æ–±—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
    void DoSomeStuff() { }
}

public interface IPrototype<T> : IPrototype where T : IPrototype<T>
{
    new T Clone();  // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å –æ–±–æ–±—â—ë–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
}

// –¢–µ–ø–µ—Ä—å –æ–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç:
var proto = new Prototype();
IPrototype clone1 = proto.Clone();        // –ò–∑ –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
Prototype clone2 = proto.Clone();         // –ò–∑ –æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

```

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –ø—Ä–∏–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —ç—Ç–æ –≤—Å—ë –≤–º–µ—Å—Ç–µ:

```csharp
using System;
using System.Collections.Generic;
using System.Linq;

// === –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã ===
public interface IDocument
{
    IDocument Clone();
    void Print();
}

public interface IDocument<T> : IDocument where T : IDocument<T>
{
    new T Clone();
}

// === –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞ ===
public abstract class Document : IDocument<Document>
{
    protected string _title;
    protected DateTimeOffset _createdAt;

    protected Document(string title, DateTimeOffset createdAt)
    {
        _title = title;
        _createdAt = createdAt;
    }

    // –ù–µ–æ–±–æ–±—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π
    public IDocument Clone() => Clone();

    // –û–±–æ–±—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è, –∫–æ—Ç–æ—Ä—É—é –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –¥–µ—Ç–∏
    public abstract Document Clone();

    public virtual void Print()
    {
        Console.WriteLine($"[{GetType().Name}] Title: {_title}");
        Console.WriteLine($"Created: {_createdAt:dd.MM.yyyy HH:mm:ss}");
    }
}

// === –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ===
public class TextDocument : Document, IDocument<TextDocument>
{
    private readonly string _content;
    private readonly List<string> _tags;

    public TextDocument(string title, DateTimeOffset createdAt, string content, List<string> tags)
        : base(title, createdAt)
    {
        _content = content;
        _tags = tags;
    }

    public override TextDocument Clone()
    {
        // Deep copy —Å–ø–∏—Å–∫–∞ —Ç–µ–≥–æ–≤
        var clonedTags = _tags.Select(t => t).ToList();
        return new TextDocument(_title, _createdAt, _content, clonedTags);
    }

    public override void Print()
    {
        base.Print();
        Console.WriteLine($"Content: {_content}");
        Console.WriteLine($"Tags: {string.Join(", ", _tags)}");
    }

    public void EditContent(string newContent)
    {
        // –ò–º–∏—Ç–∏—Ä—É–µ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        Console.WriteLine($"Edited: {_content} -> {newContent}");
    }
}

public class PresentationDocument : Document, IDocument<PresentationDocument>
{
    private readonly int _slideCount;
    private readonly List<string> _presenters;

    public PresentationDocument(string title, DateTimeOffset createdAt, int slideCount, List<string> presenters)
        : base(title, createdAt)
    {
        _slideCount = slideCount;
        _presenters = presenters;
    }

    public override PresentationDocument Clone()
    {
        // Deep copy —Å–ø–∏—Å–∫–∞ –æ—Ä–∞—Ç–æ—Ä–æ–≤
        var clonedPresenters = _presenters.Select(p => p).ToList();
        return new PresentationDocument(_title, _createdAt, _slideCount, clonedPresenters);
    }

    public override void Print()
    {
        base.Print();
        Console.WriteLine($"Slides: {_slideCount}");
        Console.WriteLine($"Presenters: {string.Join(", ", _presenters)}");
    }

    public void AddPresenter(string name)
    {
        Console.WriteLine($"Added presenter: {name}");
    }
}

public class SpreadsheetDocument : Document, IDocument<SpreadsheetDocument>
{
    private readonly int _rows;
    private readonly int _columns;
    private readonly Dictionary<string, object> _data;

    public SpreadsheetDocument(string title, DateTimeOffset createdAt, int rows, int columns)
        : base(title, createdAt)
    {
        _rows = rows;
        _columns = columns;
        _data = new Dictionary<string, object>();
    }

    public override SpreadsheetDocument Clone()
    {
        var clone = new SpreadsheetDocument(_title, _createdAt, _rows, _columns);
        
        // Deep copy –¥–∞–Ω–Ω—ã—Ö
        foreach (var kvp in _data)
        {
            clone._data[kvp.Key] = kvp.Value;
        }

        return clone;
    }

    public override void Print()
    {
        base.Print();
        Console.WriteLine($"Dimensions: {_rows}x{_columns}");
        Console.WriteLine($"Data entries: {_data.Count}");
    }

    public void SetCellValue(string key, object value)
    {
        _data[key] = value;
        Console.WriteLine($"Set {key} = {value}");
    }
}

// === –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ===
public class DocumentRepository
{
    private readonly List<IDocument> _documents = [];

    // –†–∞–±–æ—Ç–∞–µ–º —Å –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º ‚Äî –º–æ–∂–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –ª—é–±—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
    public void AddDocument(IDocument doc)
    {
        _documents.Add(doc);
    }

    // –ö–ª–æ–Ω–∏—Ä—É–µ–º –¥–æ–∫—É–º–µ–Ω—Ç, –Ω–µ –∑–Ω–∞—è –µ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞
    public IDocument CloneDocument(int index)
    {
        if (index < 0 || index >= _documents.Count)
            throw new IndexOutOfRangeException();

        return _documents[index].Clone();
    }

    public void PrintAll()
    {
        foreach (var doc in _documents)
        {
            doc.Print();
            Console.WriteLine();
        }
    }
}

// === –°—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ===
public class Program
{
    public static void Main()
    {
        Console.WriteLine("=== –ü—Ä–∏–º–µ—Ä 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ===\n");

        var textDoc = new TextDocument(
            title: "Report",
            createdAt: DateTimeOffset.Now,
            content: "This is a report",
            tags: new List<string> { "urgent", "finance" }
        );

        var presentation = new PresentationDocument(
            title: "Q4 Review",
            createdAt: DateTimeOffset.Now,
            slideCount: 20,
            presenters: new List<string> { "Alice", "Bob" }
        );

        var spreadsheet = new SpreadsheetDocument(
            title: "Budget",
            createdAt: DateTimeOffset.Now,
            rows: 100,
            columns: 10
        );

        // –î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü—É
        spreadsheet.SetCellValue("A1", 1000);
        spreadsheet.SetCellValue("B1", 2000);

        // –°–∫–ª–∞–¥—ã–≤–∞–µ–º –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
        var repo = new DocumentRepository();
        repo.AddDocument(textDoc);
        repo.AddDocument(presentation);
        repo.AddDocument(spreadsheet);

        Console.WriteLine("--- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã ---");
        repo.PrintAll();

        Console.WriteLine("\n=== –ü—Ä–∏–º–µ—Ä 2: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ===\n");

        var clonedText = repo.CloneDocument(0) as TextDocument;
        var clonedPresentation = repo.CloneDocument(1) as PresentationDocument;
        var clonedSpreadsheet = repo.CloneDocument(2) as SpreadsheetDocument;

        Console.WriteLine("--- –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã ---");
        clonedText?.Print();
        Console.WriteLine();
        clonedPresentation?.Print();
        Console.WriteLine();
        clonedSpreadsheet?.Print();

        Console.WriteLine("\n=== –ü—Ä–∏–º–µ—Ä 3: –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ===\n");

        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
        ProcessTextDocument(textDoc);
        ProcessPresentation(presentation);

        Console.WriteLine("\n=== –ü—Ä–∏–º–µ—Ä 4: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ø–∏–π ===\n");

        Console.WriteLine("–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –∫–æ–ø–∏—é —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:");
        clonedText?.EditContent("Updated content");

        Console.WriteLine("\n–î–æ–±–∞–≤–ª—è–µ–º –æ—Ä–∞—Ç–æ—Ä–∞ –∫ –∫–æ–ø–∏–∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏:");
        clonedPresentation?.AddPresenter("Charlie");

        Console.WriteLine("\n–î–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ–ø–∏—é —Ç–∞–±–ª–∏—Ü—ã:");
        clonedSpreadsheet?.SetCellValue("C1", 3000);

        Console.WriteLine("\n--- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ—Å—Ç–∞–ª–∏—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ---");
        repo.PrintAll();
    }

    // –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±–æ–±—â—ë–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
    private static T CloneAndModify<T>(T document) where T : IDocument<T>
    {
        var clone = document.Clone();
        Console.WriteLine($"Cloned {typeof(T).Name}");
        return clone;
    }

    private static void ProcessTextDocument(TextDocument doc)
    {
        var clone = CloneAndModify(doc);
        Console.WriteLine($"Cloned text doc: {typeof(TextDocument).Name}");
    }

    private static void ProcessPresentation(PresentationDocument doc)
    {
        var clone = CloneAndModify(doc);
        Console.WriteLine($"Cloned presentation: {typeof(PresentationDocument).Name}");
    }
}
/* –í—ã–≤–æ–¥
=== –ü—Ä–∏–º–µ—Ä 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ===

--- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã ---
[TextDocument] Title: Report
Created: 02.11.2025 22:36:45
Content: This is a report
Tags: urgent, finance

[PresentationDocument] Title: Q4 Review
Created: 02.11.2025 22:36:45
Slides: 20
Presenters: Alice, Bob

[SpreadsheetDocument] Title: Budget
Created: 02.11.2025 22:36:45
Dimensions: 100x10
Data entries: 2

=== –ü—Ä–∏–º–µ—Ä 2: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ===

--- –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã ---
[TextDocument] Title: Report
Created: 02.11.2025 22:36:45
Content: This is a report
Tags: urgent, finance

[PresentationDocument] Title: Q4 Review
Created: 02.11.2025 22:36:45
Slides: 20
Presenters: Alice, Bob

[SpreadsheetDocument] Title: Budget
Created: 02.11.2025 22:36:45
Dimensions: 100x10
Data entries: 2

=== –ü—Ä–∏–º–µ—Ä 3: –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ===

Cloned TextDocument
Cloned PresentationDocument

=== –ü—Ä–∏–º–µ—Ä 4: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ø–∏–π ===

–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –∫–æ–ø–∏—é —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:
Edited: This is a report -> Updated content

–î–æ–±–∞–≤–ª—è–µ–º –æ—Ä–∞—Ç–æ—Ä–∞ –∫ –∫–æ–ø–∏–∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏:
Added presenter: Charlie

–î–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ–ø–∏—é —Ç–∞–±–ª–∏—Ü—ã:
Set C1 = 3000

--- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ—Å—Ç–∞–ª–∏—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ---
[TextDocument] Title: Report
Created: 02.11.2025 22:36:45
Content: This is a report
Tags: urgent, finance

[PresentationDocument] Title: Q4 Review
Created: 02.11.2025 22:36:45
Slides: 20
Presenters: Alice, Bob

[SpreadsheetDocument] Title: Budget
Created: 02.11.2025 22:36:45
Dimensions: 100x10
Data entries: 2
*/

```

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –µ—â—ë –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ —Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–º–∏ –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏ –∏ –∏—Ö –ø—Ä–æ–±–ª–µ–º–∞–º–∏. –î–ª—è —ç—Ç–æ–≥–æ –≤–µ—Ä–Ω—ë–º—Å—è –∫ –ø—Ä–∏–º–µ—Ä—É —Å —Ñ–∏–≥—É—Ä–∞–º–∏:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype<T> where T : IPrototype<T>
{
    T Clone();
    void Draw();
}

public class Circle : IPrototype<Circle>
{
    public double Radius { get; set; }

    public Circle(double radius)
    {
        Radius = radius;
    }

    // –ú–µ—Ç–æ–¥ Clone() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º–µ–Ω–Ω–æ Circle!
    public Circle Clone()
    {
        return new Circle(Radius);
    }

    public void Draw()
    {
        Console.WriteLine($"Drawing circle with radius {Radius}");
    }

    public void Scale(double factor)
    {
        Radius *= factor;
    }
}

public class Rectangle : IPrototype<Rectangle>
{
    public double Width { get; set; }
    public double Height { get; set; }

    public Rectangle(double width, double height)
    {
        Width = width;
        Height = height;
    }

    public Rectangle Clone()
    {
        return new Rectangle(Width, Height);
    }

    public void Draw()
    {
        Console.WriteLine($"Drawing rectangle {Width}x{Height}");
    }

    public void Resize(double w, double h)
    {
        Width = w;
        Height = h;
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp 
public class Scenario
{
    // –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–∏–ø!
    public static T CloneAndDraw<T>(T prototype) where T : IPrototype<T>
    {
        var clone = prototype.Clone();  // –¢–∏–ø: T (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π!)
        clone.Draw();
        return clone;  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º T, –∞ –Ω–µ IPrototype
    }

    public static void Main()
    {
        var circle = new Circle(5.0);
        
        // –í—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ ‚Äî —Ç–∏–ø —Å–æ—Ö—Ä–∞–Ω—ë–Ω!
        Circle clonedCircle = CloneAndDraw(circle);
        
        // –ú–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å Scale() –±–µ–∑ cast
        clonedCircle.Scale(2.0);
        
        // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞:
        var rect = new Rectangle(10, 20);
        Rectangle clonedRect = CloneAndDraw(rect);
        
        // –ú–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å Resize() –±–µ–∑ cast
        clonedRect.Resize(30, 40);
    }
}

```

–ö–æ–≥–¥–∞ –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ CloneAndDraw(circle), –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä:

1. –í–∏–¥–∏—Ç, —á—Ç–æ circle –∏–º–µ–µ—Ç —Ç–∏–ø Circle

2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ Circle : IPrototype<Circle> ‚Äî ‚úÖ true

3. –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç T = Circle –≤–µ–∑–¥–µ –≤ –º–µ—Ç–æ–¥–µ

–ü–æ–ª—É—á–∞–µ—Ç—Å—è:

```csharp 
// –¢–∞–∫ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤–∏–¥–∏—Ç –≤–∞—à –≤—ã–∑–æ–≤:
public static Circle CloneAndDraw(Circle prototype)
    where Circle : IPrototype<Circle>
{
    var clone = prototype.Clone();  // –¢–∏–ø: Circle
    clone.Draw();
    return clone;  // –¢–∏–ø: Circle
}

```

–í—ã–≤–æ–¥: —Ç–∏–ø —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

–¢–µ–ø–µ—Ä—å —É—Å–ª–æ–∂–Ω–∏–º. –ß—Ç–æ –µ—Å–ª–∏ —É –Ω–∞—Å –µ—Å—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—è?

```csharp
// –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–≥—É—Ä
public abstract class Shape<T> : IPrototype<T> where T : Shape<T>
{
    public string Color { get; set; }
    public double X { get; set; }
    public double Y { get; set; }

    protected Shape(string color, double x, double y)
    {
        Color = color;
        X = x;
        Y = y;
    }

    public abstract T Clone();

    public void Draw()
    {
        Console.WriteLine($"Drawing {GetType().Name} at ({X}, {Y}) with color {Color}");
    }

    public void MoveTo(double newX, double newY)
    {
        X = newX;
        Y = newY;
    }
}

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∏–≥—É—Ä—ã
public class Circle : Shape<Circle>
{
    public double Radius { get; set; }

    public Circle(string color, double x, double y, double radius)
        : base(color, x, y)
    {
        Radius = radius;
    }

    public override Circle Clone()
    {
        return new Circle(Color, X, Y, Radius);
    }

    public void Scale(double factor)
    {
        Radius *= factor;
    }
}

public class Rectangle : Shape<Rectangle>
{
    public double Width { get; set; }
    public double Height { get; set; }

    public Rectangle(string color, double x, double y, double width, double height)
        : base(color, x, y)
    {
        Width = width;
        Height = height;
    }

    public override Rectangle Clone()
    {
        return new Rectangle(Color, X, Y, Width, Height);
    }

    public void Resize(double w, double h)
    {
        Width = w;
        Height = h;
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
public static void Main()
{
    var circle = new Circle("Red", 10, 10, 5);
    var rect = new Rectangle("Blue", 20, 20, 10, 15);

    // –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    Circle clonedCircle = CloneAndMove(circle, 50, 50);
    Rectangle clonedRect = CloneAndMove(rect, 100, 100);

    // –ú–æ–∂–µ–º –≤—ã–∑—ã–≤–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –±–µ–∑ cast!
    clonedCircle.Scale(2.0);
    clonedRect.Resize(20, 30);
}

public static T CloneAndMove<T>(T shape, double x, double y) 
    where T : Shape<T>
{
    var clone = shape.Clone();
    clone.MoveTo(x, y);
    return clone;
}

```

–ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π —Å–ª—É—á–∞–π: –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è
–ß—Ç–æ –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏?

```csharp
// –ë–∞–∑–æ–≤–∞—è —Ñ–∏–≥—É—Ä–∞
public class Circle : Shape<Circle>
{
    public double Radius { get; set; }

    public Circle(string color, double x, double y, double radius)
        : base(color, x, y)
    {
        Radius = radius;
    }

    public override Circle Clone()
    {
        return new Circle(Color, X, Y, Radius);
    }

    public virtual void Scale(double factor)
    {
        Radius *= factor;
    }
}

// –ù–∞—Å–ª–µ–¥—É–µ–º—Å—è –æ—Ç Circle
public class FilledCircle : Circle, IPrototype<FilledCircle>
{
    public string FillPattern { get; set; }

    public FilledCircle(string color, double x, double y, double radius, string fillPattern)
        : base(color, x, y, radius)
    {
        FillPattern = fillPattern;
    }

    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º Clone() –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ FilledCircle
    public new FilledCircle Clone()
    {
        return new FilledCircle(Color, X, Y, Radius, FillPattern);
    }

    public override void Scale(double factor)
    {
        base.Scale(factor);
        Console.WriteLine($"Filled with pattern: {FillPattern}");
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
public static void Main()
{
    var filledCircle = new FilledCircle("Red", 10, 10, 5, "Stripes");
    
    // –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    FilledCircle cloned = CloneAndMove(filledCircle, 50, 50);
    
    cloned.Scale(2.0);
    Console.WriteLine($"Pattern: {cloned.FillPattern}");
}

```

–¢–µ–ø–µ—Ä—å —Å–∞–º–æ–µ —Å–ª–æ–∂–Ω–æ–µ. –ß—Ç–æ –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –≤ –æ–¥–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏?

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype<T> where T : IPrototype<T>
{
    T Clone();
}

public class Circle : IPrototype<Circle> { ... }
public class Rectangle : IPrototype<Rectangle> { ... }

// –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é?
var shapes = new List<???>();  // –ß—Ç–æ —Ç—É—Ç –Ω–∞–ø–∏—Å–∞—Ç—å?

// List<IPrototype<???>> –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–π —Ç–∏–ø!

```

Circle —Ä–µ–∞–ª–∏–∑—É–µ—Ç IPrototype<Circle>, –∞ Rectangle —Ä–µ–∞–ª–∏–∑—É–µ—Ç IPrototype<Rectangle>. –≠—Ç–æ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã, –∏ –Ω–µ—Ç –æ–±—â–µ–≥–æ –ø—Ä–µ–¥–∫–∞!

–†–µ—à–µ–Ω–∏–µ 1: –ù–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
–î–æ–±–∞–≤–ª—è–µ–º –æ–±—â–∏–π –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```csharp
// –ù–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π)
public interface IPrototype
{
    IPrototype Clone();  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π —Ç–∏–ø
    void Draw();
}

// –û–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
public interface IPrototype<T> : IPrototype where T : IPrototype<T>
{
    new T Clone();  // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å –æ–±–æ–±—â—ë–Ω–Ω—ã–º —Ç–∏–ø–æ–º
}

public class Circle : IPrototype<Circle>
{
    public double Radius { get; set; }

    public Circle(double radius)
    {
        Radius = radius;
    }

    // –Ø–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    IPrototype IPrototype.Clone()
    {
        return Clone();
    }

    // –û–±–æ–±—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
    public Circle Clone()
    {
        return new Circle(Radius);
    }

    public void Draw()
    {
        Console.WriteLine($"Circle with radius {Radius}");
    }

    public void Scale(double factor)
    {
        Radius *= factor;
    }
}

public class Rectangle : IPrototype<Rectangle>
{
    public double Width { get; set; }
    public double Height { get; set; }

    public Rectangle(double width, double height)
    {
        Width = width;
        Height = height;
    }

    IPrototype IPrototype.Clone()
    {
        return Clone();
    }

    public Rectangle Clone()
    {
        return new Rectangle(Width, Height);
    }

    public void Draw()
    {
        Console.WriteLine($"Rectangle {Width}x{Height}");
    }

    public void Resize(double w, double h)
    {
        Width = w;
        Height = h;
    }
}

```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class ShapeManager
{
    private readonly List<IPrototype> _shapes = [];

    public void AddShape(IPrototype shape)
    {
        _shapes.Add(shape);
    }

    public void CloneAll()
    {
        var clones = _shapes.Select(s => s.Clone()).ToList();
        
        foreach (var clone in clones)
        {
            clone.Draw();
        }
    }

    // –ù–æ –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø, –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –¥–µ–ª–∞—Ç—å cast:
    public Circle? GetCircle(int index)
    {
        return _shapes[index] as Circle;
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
public static void Main()
{
    var manager = new ShapeManager();
    
    manager.AddShape(new Circle(5.0));
    manager.AddShape(new Rectangle(10, 20));
    manager.AddShape(new Circle(7.5));

    Console.WriteLine("=== –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∏–≥—É—Ä ===");
    manager.CloneAll();

    Console.WriteLine("\n=== –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ ===");
    var circle = manager.GetCircle(0);
    if (circle != null)
    {
        circle.Scale(2.0);
        circle.Draw();
    }
}

```

–†–µ—à–µ–Ω–∏–µ 2: Visitor Pattern
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å cast'–æ–≤, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Visitor:

```csharp
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IShapeVisitor
{
    void Visit(Circle circle);
    void Visit(Rectangle rectangle);
}

public interface IPrototype
{
    IPrototype Clone();
    void Accept(IShapeVisitor visitor);
}

public class Circle : IPrototype<Circle>
{
    public double Radius { get; set; }

    public Circle(double radius)
    {
        Radius = radius;
    }

    IPrototype IPrototype.Clone() => Clone();
    
    public Circle Clone() => new Circle(Radius);

    public void Accept(IShapeVisitor visitor)
    {
        visitor.Visit(this);  // –ü–µ—Ä–µ–¥–∞—ë–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø!
    }
}

public class ScaleVisitor : IShapeVisitor
{
    private readonly double _factor;

    public ScaleVisitor(double factor)
    {
        _factor = factor;
    }

    public void Visit(Circle circle)
    {
        circle.Radius *= _factor;
        Console.WriteLine($"Scaled circle to radius {circle.Radius}");
    }

    public void Visit(Rectangle rectangle)
    {
        rectangle.Width *= _factor;
        rectangle.Height *= _factor;
        Console.WriteLine($"Scaled rectangle to {rectangle.Width}x{rectangle.Height}");
    }
}

```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
public static void Main()
{
    List<IPrototype> shapes = new()
    {
        new Circle(5.0),
        new Rectangle(10, 20),
        new Circle(7.5)
    };

    var scaleVisitor = new ScaleVisitor(2.0);

    foreach (var shape in shapes)
    {
        shape.Accept(scaleVisitor);
    }
}

```

–¢–æ –µ—Å—Ç—å –µ—â—ë —Ä–∞–∑ –ø—Ä–æ–±–ª–µ–º–∞ —Å –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º:

```csharp
// –ù–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype
{
    void DoSomeStuff();
    // –ù–µ—Ç –º–µ—Ç–æ–¥–∞ Clone()!
}

// –û–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype<T> : IPrototype where T : IPrototype<T>
{
    T Clone();
}

public class Prototype : IPrototype<Prototype>
{
    public Prototype Clone()
    {
        return new Prototype();
    }

    public void DoSomeStuff()
    {
        Console.WriteLine("Doing stuff");
    }
}

// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ö—Ä–∞–Ω–∏—Ç –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π —Ç–∏–ø
public record Container(IPrototype Prototype);

static void NonGeneric()
{
    var container = new Container(new Prototype());
    
    // –ü–†–û–ë–õ–ï–ú–ê: –∫–∞–∫ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å?
    // container.Prototype.Clone();  // –û–®–ò–ë–ö–ê! –ù–µ—Ç Clone() –≤ IPrototype
    
    // –ü—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –¥–µ–ª–∞—Ç—å cast:
    if (container.Prototype is IPrototype<Prototype> proto)
    {
        var clone = proto.Clone();  // –†–∞–±–æ—Ç–∞–µ—Ç
    }
}

```

–ö–æ–≥–¥–∞ –≤—ã —Ö—Ä–∞–Ω–∏—Ç–µ –æ–±—ä–µ–∫—Ç –∫–∞–∫ IPrototype (–Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π), –≤—ã —Ç–µ—Ä—è–µ—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –æ–±–æ–±—â—ë–Ω–Ω—ã–º –º–µ—Ç–æ–¥–∞–º. –ú–µ—Ç–æ–¥ Clone() –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –≤ IPrototype<T>, –∞ –Ω–µ –≤ IPrototype.

–†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å Clone() –≤ –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```csharp
// –ù–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å Clone()
public interface IPrototype
{
    IPrototype Clone();  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π —Ç–∏–ø
    void DoSomeStuff();
}

// –û–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IPrototype<T> : IPrototype where T : IPrototype<T>
{
    new T Clone();  // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å –æ–±–æ–±—â—ë–Ω–Ω—ã–º —Ç–∏–ø–æ–º
}

public class Prototype : IPrototype<Prototype>
{
    // –Ø–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω–æ–≥–æ
    IPrototype IPrototype.Clone()
    {
        return Clone();
    }

    // –û–±–æ–±—â—ë–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
    public Prototype Clone()
    {
        return new Prototype();
    }

    public void DoSomeStuff()
    {
        Console.WriteLine("Doing stuff");
    }
}

public record Container(IPrototype Prototype);

static void NonGeneric()
{
    var container = new Container(new Prototype());
    
    // –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç
    IPrototype clone = container.Prototype.Clone();
    clone.DoSomeStuff();
    
    // –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø:
    if (clone is Prototype protoClone)
    {
        // –†–∞–±–æ—Ç–∞–µ–º —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ç–∏–ø–æ–º
    }
}

```

–°–æ–±–µ—Ä—ë–º –≤—Å—ë –≤–º–µ—Å—Ç–µ –≤ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä:

```csharp
using System;
using System.Collections.Generic;
using System.Linq;

// === –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã ===

// –ù–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π (–¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π)
public interface IDocument
{
    IDocument Clone();
    void Print();
    string GetTitle();
}

// –û–±–æ–±—â—ë–Ω–Ω—ã–π (–¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
public interface IDocument<T> : IDocument where T : IDocument<T>
{
    new T Clone();
}

// === –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å ===

public abstract class Document<T> : IDocument<T> where T : Document<T>
{
    protected string _title;
    protected DateTimeOffset _createdAt;
    protected int _version;

    protected Document(string title, DateTimeOffset createdAt, int version)
    {
        _title = title;
        _createdAt = createdAt;
        _version = version;
    }

    // –ù–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π Clone()
    IDocument IDocument.Clone() => Clone();

    // –û–±–æ–±—â—ë–Ω–Ω—ã–π Clone()
    public abstract T Clone();

    public virtual void Print()
    {
        Console.WriteLine($"[{GetType().Name}] {_title}");
        Console.WriteLine($"Created: {_createdAt:dd.MM.yyyy HH:mm:ss}");
        Console.WriteLine($"Version: {_version}");
    }

    public string GetTitle() => _title;

    public void IncrementVersion()
    {
        _version++;
        Console.WriteLine($"Version incremented to {_version}");
    }
}

// === –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã ===

public class TextDocument : Document<TextDocument>
{
    private string _content;
    private List<string> _tags;

    public TextDocument(string title, DateTimeOffset createdAt, int version, 
                       string content, List<string> tags)
        : base(title, createdAt, version)
    {
        _content = content;
        _tags = tags;
    }

    public override TextDocument Clone()
    {
        // Deep copy
        var clonedTags = _tags.Select(t => t).ToList();
        return new TextDocument(_title, _createdAt, _version, _content, clonedTags);
    }

    public override void Print()
    {
        base.Print();
        Console.WriteLine($"Content: {_content}");
        Console.WriteLine($"Tags: {string.Join(", ", _tags)}");
    }

    public void EditContent(string newContent)
    {
        _content = newContent;
        IncrementVersion();
        Console.WriteLine($"Content updated to: {_content}");
    }

    public void AddTag(string tag)
    {
        _tags.Add(tag);
        Console.WriteLine($"Tag '{tag}' added");
    }
}

public class SpreadsheetDocument : Document<SpreadsheetDocument>
{
    private int _rows;
    private int _columns;
    private Dictionary<string, double> _cells;

    public SpreadsheetDocument(string title, DateTimeOffset createdAt, int version,
                              int rows, int columns)
        : base(title, createdAt, version)
    {
        _rows = rows;
        _columns = columns;
        _cells = new Dictionary<string, double>();
    }

    public override SpreadsheetDocument Clone()
    {
        var clone = new SpreadsheetDocument(_title, _createdAt, _version, _rows, _columns);
        
        // Deep copy cells
        foreach (var kvp in _cells)
        {
            clone._cells[kvp.Key] = kvp.Value;
        }

        return clone;
    }

    public override void Print()
    {
        base.Print();
        Console.WriteLine($"Dimensions: {_rows}x{_columns}");
        Console.WriteLine($"Filled cells: {_cells.Count}");
    }

    public void SetCell(string address, double value)
    {
        _cells[address] = value;
        IncrementVersion();
        Console.WriteLine($"Cell {address} = {value}");
    }

    public double GetCell(string address)
    {
        return _cells.TryGetValue(address, out var value) ? value : 0;
    }
}

// === –ú–µ–Ω–µ–¥–∂–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º) ===

public class DocumentManager
{
    private readonly List<IDocument> _documents = [];

    public void AddDocument(IDocument doc)
    {
        _documents.Add(doc);
        Console.WriteLine($"Added document: {doc.GetTitle()}");
    }

    public void CloneAll()
    {
        Console.WriteLine("\n=== Cloning all documents ===");
        var clones = _documents.Select(d => d.Clone()).ToList();
        
        foreach (var clone in clones)
        {
            Console.WriteLine($"Cloned: {clone.GetTitle()}");
        }
    }

    public void PrintAll()
    {
        Console.WriteLine("\n=== All documents ===");
        foreach (var doc in _documents)
        {
            doc.Print();
            Console.WriteLine();
        }
    }

    public IDocument? GetDocument(string title)
    {
        return _documents.FirstOrDefault(d => d.GetTitle() == title);
    }
}

// === –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ–±–æ–±—â—ë–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º) ===

public class DocumentProcessor
{
    // –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
    public static T CloneAndModify<T>(T document, Action<T> modifier) 
        where T : IDocument<T>
    {
        var clone = document.Clone();
        modifier(clone);
        return clone;
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    public static T CreateVersion<T>(T document) 
        where T : IDocument<T>
    {
        var version = document.Clone();
        Console.WriteLine($"Created new version of: {version.GetTitle()}");
        return version;
    }
}

// === Visitor –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ ===

public interface IDocumentVisitor
{
    void Visit(TextDocument doc);
    void Visit(SpreadsheetDocument doc);
}

public class DocumentStatisticsVisitor : IDocumentVisitor
{
    public int TextDocumentCount { get; private set; }
    public int SpreadsheetCount { get; private set; }

    public void Visit(TextDocument doc)
    {
        TextDocumentCount++;
        Console.WriteLine($"Visited text document: {doc.GetTitle()}");
    }

    public void Visit(SpreadsheetDocument doc)
    {
        SpreadsheetCount++;
        Console.WriteLine($"Visited spreadsheet: {doc.GetTitle()}");
    }
}

// –î–æ–±–∞–≤–ª—è–µ–º Accept –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface IDocumentVisitable
{
    void Accept(IDocumentVisitor visitor);
}

// –û–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∞—Å—Å—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
public partial class TextDocument : IDocumentVisitable
{
    public void Accept(IDocumentVisitor visitor)
    {
        visitor.Visit(this);
    }
}

public partial class SpreadsheetDocument : IDocumentVisitable
{
    public void Accept(IDocumentVisitor visitor)
    {
        visitor.Visit(this);
    }
}

// === –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ ===

public class Program
{
    public static void Main()
    {
        Console.WriteLine("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó");
        Console.WriteLine("‚ïë  –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Prototype —Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–º–∏ –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏  ‚ïë");
        Console.WriteLine("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n");

        // === –ü—Ä–∏–º–µ—Ä 1: –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ===
        Console.WriteLine("‚ñ∂ –ü—Ä–∏–º–µ—Ä 1: –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ\n");

        var textDoc = new TextDocument(
            "Report",
            DateTimeOffset.Now,
            1,
            "Initial content",
            new List<string> { "urgent", "finance" }
        );

        // –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —Ç–∏–ø —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è!
        TextDocument clonedText = DocumentProcessor.CloneAndModify(
            textDoc,
            doc => doc.EditContent("Modified content")
        );

        Console.WriteLine("\nOriginal:");
        textDoc.Print();

        Console.WriteLine("\nClone:");
        clonedText.Print();

        // === –ü—Ä–∏–º–µ—Ä 2: –†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ===
        Console.WriteLine("\n‚ñ∂ –ü—Ä–∏–º–µ—Ä 2: –ö–æ–ª–ª–µ–∫—Ü–∏—è —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤\n");

        var manager = new DocumentManager();
        
        manager.AddDocument(textDoc);
        manager.AddDocument(new SpreadsheetDocument("Budget", DateTimeOffset.Now, 1, 10, 10));
        manager.AddDocument(new TextDocument("Notes", DateTimeOffset.Now, 1, "Some notes", new List<string>()));

        manager.PrintAll();
        manager.CloneAll();

        // === –ü—Ä–∏–º–µ—Ä 3: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ ===
        Console.WriteLine("\n‚ñ∂ –ü—Ä–∏–º–µ—Ä 3: –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ç–∏–ø–æ–º –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏\n");

        var doc = manager.GetDocument("Budget");
        if (doc is SpreadsheetDocument spreadsheet)
        {
            spreadsheet.SetCell("A1", 1000);
            spreadsheet.SetCell("B1", 2000);
            spreadsheet.Print();
        }

        // === –ü—Ä–∏–º–µ—Ä 4: Visitor –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è cast'–æ–≤ ===
        Console.WriteLine("\n‚ñ∂ –ü—Ä–∏–º–µ—Ä 4: Visitor Pattern –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏\n");

        var statsVisitor = new DocumentStatisticsVisitor();
        
        foreach (var document in new IDocument[] { textDoc, clonedText })
        {
            if (document is IDocumentVisitable visitable)
            {
                visitable.Accept(statsVisitor);
            }
        }

        Console.WriteLine($"\n–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:");
        Console.WriteLine($"  –¢–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: {statsVisitor.TextDocumentCount}");
        Console.WriteLine($"  –¢–∞–±–ª–∏—Ü: {statsVisitor.SpreadsheetCount}");

        // === –ü—Ä–∏–º–µ—Ä 5: –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–π ===
        Console.WriteLine("\n‚ñ∂ –ü—Ä–∏–º–µ—Ä 5: –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤\n");

        var version1 = textDoc;
        var version2 = DocumentProcessor.CreateVersion(version1);
        version2.EditContent("Version 2 content");

        var version3 = DocumentProcessor.CreateVersion(version2);
        version3.AddTag("reviewed");
        version3.EditContent("Version 3 content");

        Console.WriteLine("\n–í–µ—Ä—Å–∏—è 1:");
        version1.Print();

        Console.WriteLine("\n–í–µ—Ä—Å–∏—è 2:");
        version2.Print();

        Console.WriteLine("\n–í–µ—Ä—Å–∏—è 3:");
        version3.Print();

        Console.WriteLine("\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó");
        Console.WriteLine("‚ïë                 –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞                ‚ïë");
        Console.WriteLine("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù");
    }
}

```

–í—ã–≤–æ–¥—ã
–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥:
1. –ü—Ä–æ—Å—Ç–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (abstract class Prototype):

‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã –æ–±—â–∏–µ –¥–ª—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤

‚ùå –¢–µ—Ä—è–µ—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∏–∑ –º–µ—Ç–æ–¥–æ–≤

2. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (IPrototype):

‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

‚úÖ –ì–∏–±–∫–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è

‚ùå –í—Å—ë –µ—â—ë —Ç–µ—Ä—è–µ—Ç–µ —Ç–∏–ø –±–µ–∑ –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤

3. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ (IPrototype<T> where T : IPrototype<T>):

‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

‚úÖ –ù–µ –Ω—É–∂–Ω—ã cast'—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —á–µ—Ä–µ–∑ –æ–±–æ–±—â—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

‚úÖ –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫

‚ùå –°–ª–æ–∂–Ω–µ–µ –ø–æ–Ω—è—Ç—å –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã–º–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏

4. –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –æ–±–æ–±—â—ë–Ω–Ω—ã—Ö –∏ –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:

‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ

‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏

‚úÖ Best of both worlds

‚ùå –ë–æ–ª—å—à–µ –∫–æ–¥–∞

‚ùå –¢—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è —è–≤–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏, –∫–æ–≥–¥–∞:

- –†–∞–±–æ—Ç–∞–µ—Ç–µ —Å —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

- –ù—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É –≤—ã–∑–æ–≤–æ–≤

- –•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–æ–º–æ–≥–∞–ª –∏–∑–±–µ–≥–∞—Ç—å –æ—à–∏–±–æ–∫

–î–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–µ–æ–±–æ–±—â—ë–Ω–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ–≥–¥–∞:

- –ù—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –≤ –æ–¥–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏

- –†–∞–±–æ—Ç–∞–µ—Ç–µ —Å –ø–ª–∞–≥–∏–Ω–∞–º–∏/—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Visitor –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –û–¥–∏–Ω–æ—á–∫–∞ (Singleton)

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

**–û–¥–∏–Ω–æ—á–∫–∞** (Singleton) ‚Äî –æ–±—ä–µ–∫—Ç, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±—É–¥–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–µ –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞.

–î–∞–≤–∞–π—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Ä–µ–∞–ª—å–Ω—É—é —Å–∏—Ç—É–∞—Ü–∏—é. –í—ã —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –ª–æ–≥–µ—Ä–æ–º. –¢–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –ø–æ —Å–≤–æ–µ–π –ø—Ä–∏—Ä–æ–¥–µ –¥–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –æ–¥–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–ø–∏–π –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∏ –æ—à–∏–±–∫–∞–º.

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–∫–æ–π –æ–±—ä–µ–∫—Ç —á–µ—Ä–µ–∑ –æ–±—ã—á–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –Ω–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —Å–æ–∑–¥–∞—Ç—å –µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑:

–î–∞–≤–∞–π—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Ä–µ–∞–ª—å–Ω—É—é —Å–∏—Ç—É–∞—Ü–∏—é. –í—ã —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –ª–æ–≥–µ—Ä–æ–º. –¢–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –ø–æ —Å–≤–æ–µ–π –ø—Ä–∏—Ä–æ–¥–µ –¥–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –æ–¥–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–ø–∏–π –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∏ –æ—à–∏–±–∫–∞–º.

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–∫–æ–π –æ–±—ä–µ–∫—Ç —á–µ—Ä–µ–∑ –æ–±—ã—á–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –Ω–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —Å–æ–∑–¥–∞—Ç—å –µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑:

```csharp
var config1 = new DatabaseConfig();
var config2 = new DatabaseConfig();
// –¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å –¥–≤–µ —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏!
// –ö–∞–∫—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å? –ù–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å –∏ –±–∞–≥–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã.

```

![](src/singleton/circle.png)
###### –ö–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –Ω–µ –ø–æ–¥–æ–∑—Ä–µ–≤–∞—Ç—å, —á—Ç–æ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –æ–±—ä–µ–∫—Ç–æ–º.

–í–æ—Ç –∑–¥–µ—Å—å –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥–∏—Ç Singleton ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–ª–∞—Å—Å –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –≥–ª–æ–±–∞–ª—å–Ω—É—é —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —ç–∫–∑–µ–º–ø–ª—è—Ä—É.

–ò–¥–µ—è –ø—Ä–æ—Å—Ç–∞:

- –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –ø—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ ‚Äî —Å–¥–µ–ª–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–∏–≤–∞—Ç–Ω—ã–º, —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ —Å–Ω–∞—Ä—É–∂–∏ –Ω–µ –º–æ–≥ –≤—ã–∑–≤–∞—Ç—å new Singleton().
- –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –∏–ª–∏ –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä–æ–µ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç, —Å–æ–∑–¥–∞–Ω –ª–∏ –æ–±—ä–µ–∫—Ç, –∏ –µ—Å–ª–∏ –Ω–µ—Ç, —Å–æ–∑–¥–∞—Å—Ç –µ–≥–æ —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑.
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ (–∞ –≤ 2025 –≥–æ–¥—É —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç), –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–ø—Ä–æ—Å—è—Ç Singleton, –æ–Ω–∏ –ø–æ–ª—É—á–∞—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç. 
–≠—Ç–æ —Ä–µ—à–∞–µ—Ç –Ω–∞—à—É –ø—Ä–æ–±–ª–µ–º—É: —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –º–æ–∂–µ—Ç —Å–ª—É—á–∞–π–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è –Ω–µ–≥–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

#### –ü–µ—Ä–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: Singleton —Å Double-Checked Locking:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
// === SINGLETON (–û–¥–∏–Ω–æ—á–∫–∞) ===
// –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä
// –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—É—é —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ–º—É

public class Singleton 
{ 
    // –û–±—ä–µ–∫—Ç –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤
    private static readonly object _lock = new(); 
    private static Singleton? _instance; 
    
    private Singleton() { }  // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–∏–≤–∞—Ç–Ω—ã–π!
    
    public static Singleton Instance 
    { 
        get 
        { 
            // –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
            if (_instance is not null) 
                return _instance; 
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ—Ç–æ–∫–æ–≤
            lock (_lock) 
            { 
                // –í—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
                if (_instance is not null) 
                    return _instance; 
                
                // –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑
                return _instance = new Singleton(); 
            } 
        } 
    } 
}

```

- private Singleton() ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∏–∑–≤–Ω–µ. –¢–æ–ª—å–∫–æ –∫–æ–¥ –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–≥–æ –∫–ª–∞—Å—Å–∞ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å new Singleton().

- private static readonly object _lock ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –∫–∞–∫ "–∑–∞–º–æ–∫ –¥–≤–µ—Ä–∏": –∫–æ–≥–¥–∞ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –≤—Ö–æ–¥–∏—Ç –≤ lock(_lock), –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∂–¥—É—Ç —Å–Ω–∞—Ä—É–∂–∏.

- private static Singleton? _instance ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä. –°–ª–æ–≤–æ static –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –≤—Å–µ–≥–æ –∫–ª–∞—Å—Å–∞, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.

–ü–æ—á–µ–º—É –¥–≤–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (if)?
–≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è Double-Checked Locking. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –æ—á–µ—Ä–µ–¥—å –≤ –º–∞–≥–∞–∑–∏–Ω:

–ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏): "–°—Ç–æ–π, —Å—Ç–æ–∏—Ç –ª–∏ —É–∂–µ –æ—Ö—Ä–∞–Ω–Ω–∏–∫ —É –¥–≤–µ—Ä–∏? –ï—Å–ª–∏ –¥–∞, –∑–Ω–∞—á–∏—Ç –º–∞–≥–∞–∑–∏–Ω –æ—Ç–∫—Ä—ã—Ç, —è –º–æ–≥—É –≤–æ–π—Ç–∏." –≠—Ç–æ –±—ã—Å—Ç—Ä–æ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∂–¥–∞—Ç—å.

–ï—Å–ª–∏ –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∞ –Ω–µ—Ç, –∂–¥—ë–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ lock.

–í—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏): "–ï—â—ë —Ä–∞–∑ –ø—Ä–æ–≤–µ—Ä–∏–º, –º–æ–∂–µ—Ç –±—ã—Ç—å, –ø–æ–∫–∞ —è –∂–¥–∞–ª, –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫ —É–∂–µ —Å–æ–∑–¥–∞–ª —ç–∫–∑–µ–º–ø–ª—è—Ä?" –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∂–¥–∞–ª–∏ –≤—Ö–æ–¥–∞.

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:

```csharp
// –ì–¥–µ-—Ç–æ –≤ main:
var singleton1 = Singleton.Instance;
var singleton2 = Singleton.Instance;

Console.WriteLine(ReferenceEquals(singleton1, singleton2)); // true ‚Äî –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç!

```

#### –í—Ç–æ—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: Singleton —Å Lazy<T>
–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π C# (–Ω–∞—á–∏–Ω–∞—è —Å .NET Framework 4.0) –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å Lazy<T>, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ—à–∞–µ—Ç –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class Singleton 
{ 
    private static readonly Lazy<Singleton> _instance;
    
    static Singleton() 
    { 
        _instance = new Lazy<Singleton>(
            () => new Singleton(), 
            LazyThreadSafetyMode.ExecutionAndPublication
        ); 
    } 
    
    private Singleton() { } 
    
    public static Singleton Instance => _instance.Value;
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –û–¥–∏–Ω–æ—á–∫–∞

```mermaid
classDiagram
    class Singleton {
        -instance: Singleton$
        -Singleton()
        +GetInstance()$ Singleton
        +BusinessLogic()
    }
    
    class Client1 {
        +Operation()
    }
    
    class Client2 {
        +Operation()
    }
    
    Singleton : -static instance
    Singleton : -private constructor
    Singleton : +static GetInstance()
    
    Client1 ..> Singleton : –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
    Client2 ..> Singleton : –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
    
    note for Singleton "–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä
–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞"
```

**–í–∞–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑–≤–Ω–µ
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ —Ö—Ä–∞–Ω–∏—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø

```csharp
// –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∫–æ–¥–∞ 
}

```

- static Singleton() ‚Äî —ç—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–ª–∞—Å—Å–∞. –û–Ω –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –∫–ª–∞—Å—Å—É, –µ—â—ë –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –∫—Ç–æ-—Ç–æ –ø–æ–ø—Ä–æ—Å–∏—Ç Instance. –ó–¥–µ—Å—å –º—ã —Å–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç Lazy<Singleton>.

- new Lazy<Singleton>(...) ‚Äî –º—ã –ø–µ—Ä–µ–¥–∞—ë–º –ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ () => new Singleton(), –∫–æ—Ç–æ—Ä–æ–µ –≥–æ–≤–æ—Ä–∏—Ç: "–ö–æ–≥–¥–∞ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä, –≤—ã–ø–æ–ª–Ω–∏ —ç—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ". –ù–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –æ–Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!

- LazyThreadSafetyMode.ExecutionAndPublication ‚Äî —ç—Ç–æ —Ñ–ª–∞–≥ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –û–± —ç—Ç–æ–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ –¥–∞–ª—å—à–µ.

- public static Singleton Instance => _instance.Value; ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ Lazy<T>. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ _instance.Value –∑–∞–ø—É—Å—Ç–∏—Ç –ª—è–º–±–¥—É –∏ —Å–æ–∑–¥–∞—Å—Ç –æ–±—ä–µ–∫—Ç, –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö ‚Äî –≤–µ—Ä–Ω—ë—Ç —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π.

–ü–æ—á–µ–º—É —ç—Ç–æ –ª—É—á—à–µ?
1. –ú–µ–Ω—å—à–µ –∫–æ–¥–∞ ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Å–≤–æ—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é.
2. –ü—Ä–∞–≤–∏–ª—å–Ω–µ–µ ‚Äî Lazy<T> —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ Microsoft —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ.
3. –ü–æ–Ω—è—Ç–Ω–µ–µ ‚Äî –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –æ—á–µ–≤–∏–¥–Ω–æ: "–≠—Ç–æ –ª–µ–Ω–∏–≤—ã–π —Å–∏–Ω–≥–ª—Ç–æ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é".

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∏–ø—ã –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
 
#### LazyThreadSafetyMode.None

***None*** - –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏, –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ

```csharp
new Lazy<Singleton>(() => new Singleton(), LazyThreadSafetyMode.None)

```

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –ï—Å–ª–∏ –¥–≤–∞ –ø–æ—Ç–æ–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ .Value, –ª—è–º–±–¥–∞ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. –ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ —Å–æ–∑–¥–∞—Å—Ç —Å–≤–æ–π –æ–±—ä–µ–∫—Ç.

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–∞—Ä—É—à–∞–µ—Ç—Å—è –≥–∞—Ä–∞–Ω—Ç–∏—è Singleton! –ë—É–¥–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤.

–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∫–æ–≥–¥–∞, –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–µ–Ω Singleton. –¢–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.

#### LazyThreadSafetyMode.PublicationOnly
***PublicationOnly*** - –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏, –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äì —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –ø–æ—Å–ª–µ–¥–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º –Ω–∞—á–∞–≤—à–∏–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é

```csharp
new Lazy<Singleton>(() => new Singleton(), LazyThreadSafetyMode.PublicationOnly)

```

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –õ—è–º–±–¥–∞ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ —Å–æ–∑–¥–∞–¥—É—Ç –æ–±—ä–µ–∫—Ç—ã), –Ω–æ .Value –≤–µ—Ä–Ω—ë—Ç –æ–±—ä–µ–∫—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø–æ—Å–ª–µ–¥–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º, –Ω–∞—á–∞–≤—à–∏–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é.

–†–µ–∑—É–ª—å—Ç–∞—Ç: –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –±—É–¥—É—Ç –æ—Ç–±—Ä–æ—à–µ–Ω—ã. –í –ø–∞–º—è—Ç–∏ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä, –Ω–æ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –±—ã–ª –∏–∑–±—ã—Ç–æ—á–Ω—ã–º.

–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –æ—á–µ–Ω—å –¥–µ—à—ë–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö) –∏ –Ω–µ –∏–º–µ–µ—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤. –ü–ª—é—Å: –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –±—ã—Å—Ç—Ä–µ–µ. –ú–∏–Ω—É—Å: –≤–ø—É—Å—Ç—É—é —Å–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç—ã.

#### LazyThreadSafetyMode.ExecutionAndPublication

***ExecutionAndPublication*** - –ø–æ–ª–Ω–∞—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏, –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ª–∏—à—å –æ–¥–∏–Ω —Ä–∞–∑

```csharp
new Lazy<Singleton>(() => new Singleton(), LazyThreadSafetyMode.ExecutionAndPublication)

```

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –õ—è–º–±–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ .Value. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–ø—Ä–∏–º–µ—Ä–Ω–æ –∫–∞–∫ Double-Checked Locking).

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ò–¥–µ–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Singleton.

–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: –í—Å–µ–≥–¥–∞, –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ Singleton! –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö .NET.

–ü—Ä–∏–º–µ—Ä:

```csharp
// –ü–æ—Ç–æ–∫–∏ 1, 2, 3 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞—â–∞—é—Ç—Å—è:
var task1 = Task.Run(() => Singleton.Instance);
var task2 = Task.Run(() => Singleton.Instance);
var task3 = Task.Run(() => Singleton.Instance);

Task.WaitAll(task1, task2, task3);

var s1 = task1.Result;
var s2 = task2.Result;
var s3 = task3.Result;

// –í—Å–µ —Ç—Ä–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –û–î–ò–ù –∏ –¢–û–¢ –ñ–ï –æ–±—ä–µ–∫—Ç
Console.WriteLine(ReferenceEquals(s1, s2) && ReferenceEquals(s2, s3)); // true

```

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ Singleton
1. ***—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ***- –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–µ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç –≤ —Ç–µ—Å—Ç–∞—Ö
2. ***–≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π*** -–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–µ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑–≤–Ω–µ
3. ***–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –æ–±—ä–µ–∫—Ç–∞*** - —Ç.–∫. –æ–±—ä–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏, –µ–≥–æ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –Ω–µ–ª—å–∑—è —è–≤–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å
4. ***—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–π—Ç*** - –æ–±—ä–µ–∫—Ç –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –±–µ–∑ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –∫–æ–Ω—Ç—Ä–æ–ª—è

Examples:

–ü—Ä–æ–±–ª–µ–º–∞ (–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ):

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class DatabaseLogger 
{ 
    public static DatabaseLogger Instance { /* ... */ }
    private DatabaseLogger() { }
}

// –í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ª–æ–≥–µ—Ä:
public class UserService 
{ 
    public void CreateUser(string name) 
    { 
        // UserService –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π Singleton!
        DatabaseLogger.Instance.Log($"Creating user: {name}"); 
    } 
}

// –¢–µ—Å—Ç:
[Test]
public void CreateUser_ShouldLogEvent()
{
    var service = new UserService();
    service.CreateUser("John");
    
    // –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞–ª–æ—Å—å? 
    // –ù–µ–ª—å–∑—è "–ø–æ–¥–º–µ–Ω–∏—Ç—å" DatabaseLogger –Ω–∞ —Ñ–µ–π–∫–æ–≤—ã–π –ª–æ–≥–µ—Ä!
    // –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–º —Å–æ–∑–¥–∞—Ç—å mock –æ–±—ä–µ–∫—Ç.
}

```

–ü–æ—á–µ–º—É: Singleton –∏–º–µ–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –ø–æ—ç—Ç–æ–º—É –≤ —Ç–µ—Å—Ç–µ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ–µ–π–∫–æ–≤—ã–π (mock) –æ–±—ä–µ–∫—Ç.

–†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—ä–µ–∫—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Dependency Injection) –≤–º–µ—Å—Ç–æ Singleton, –∏–ª–∏, –µ—Å–ª–∏ Singleton –Ω–µ–æ–±—Ö–æ–¥–∏–º, –¥–µ–ª–∞—Ç—å –µ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä protected –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–¥–∫–ª–∞—Å—Å—ã.

–ü—Ä–æ–±–ª–µ–º–∞ (–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π):

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class AppConfig 
{ 
    private string _connectionString;
    
    private AppConfig() 
    { 
        _connectionString = "hardcoded_string"; // –ñ—ë—Å—Ç–∫–æ –∫–æ–¥–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
    }
    
    public static AppConfig Instance { /* ... */ }
}

```

–ï—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–µ–≥–æ Singleton, –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å –µ—ë –∏–∑–≤–Ω–µ. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ:

- –í —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö (development, staging, production) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ.
- –ù–µ–ª—å–∑—è –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.
- –°–ª–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (IoC containers).

–†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (DI pattern):

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class AppConfig 
{ 
    private readonly string _connectionString;
    
    // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å–Ω–∞—Ä—É–∂–∏
    public AppConfig(string connectionString) 
    { 
        _connectionString = connectionString;
    }
}

```

–ü—Ä–æ–±–ª–µ–º–∞ (–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –æ–±—ä–µ–∫—Ç–∞):

```csharp
// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class ResourceManager 
{ 
    private List<NativeResource> _resources = new();
    
    private ResourceManager() 
    { 
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...
    }
    
    public static ResourceManager Instance { /* ... */ }
    
    public void Cleanup() 
    { 
        // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
        foreach (var res in _resources) 
        { 
            res.Dispose(); 
        }
    }
}

// –ö–æ–≥–¥–∞ –≤—ã–∑–≤–∞—Ç—å Cleanup()? 
// –û–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤—Å—é –∂–∏–∑–Ω—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
// –ö–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, Cleanup() –º–æ–∂–µ—Ç –Ω–µ –≤—ã–∑–≤–∞—Ç—å—Å—è –≤–æ–æ–±—â–µ!

```

Singleton –∂–∏–≤—ë—Ç —Å—Ç–æ–ª—å–∫–æ –∂–µ, —Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏: —Å–æ–∑–¥–∞–Ω–∏–µ, –æ—á–∏—Å—Ç–∫—É —Ä–µ—Å—É—Ä—Å–æ–≤, –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ.

–†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pattern "Scoped" –∏–ª–∏ "Transient" –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:

```csharp
// –ö–∞–∂–¥—ã–π —Ä–∞–∑ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä (Transient)
services.AddTransient<ResourceManager>();

// –ö–∞–∂–¥—ã–π —Ä–∞–∑ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä (Scoped)
services.AddScoped<ResourceManager>();

```

–ü—Ä–æ–±–ª–µ–º–∞ (–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–π—Ç –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è):

```csharp
var logger = Singleton.Instance;
// –ù–æ –∫—Ç–æ —Å–æ–∑–¥–∞–ª —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç? –ö–æ–≥–¥–∞? –° –∫–∞–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏?
// –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ! Singleton —Å–∫—Ä—ã–≤–∞–µ—Ç –ª–æ–≥–∏–∫—É –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

// –ï—â—ë —Ö—É–∂–µ:
DatabaseConnection.Instance.Connect();
CacheManager.Instance.Clear();
SessionManager.Instance.Reset();

// –¢–µ–ø–µ—Ä—å –≤–∞—à–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –≤–µ–∑–¥–µ –≤ –∫–æ–¥–µ.
// –°–ª–æ–∂–Ω–µ–µ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫—Ç–æ –∑–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç.
// –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "–≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º" –∏ —á–∞—Å—Ç–æ –≤–µ–¥—ë—Ç –∫ –æ—à–∏–±–∫–∞–º.

```

–ö–æ–≥–¥–∞ Singleton –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ –æ–ø–æ—Å—Ä–µ–¥–æ–≤–∞–Ω–Ω–æ, —á–µ—Ä–µ–∑ –æ–±—â–∏–µ –æ–±—ä–µ–∫—Ç—ã. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —Ö–∞–æ—Ç–∏—á–Ω—ã–º –∏ —Ç—Ä—É–¥–Ω—ã–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏, –µ—Å—Ç—å —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ Singleton –æ–ø—Ä–∞–≤–¥–∞–Ω:
- Logger ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.
- Database Connection Pool ‚Äî –ø—É–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º.
- Configuration Manager ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–¥–Ω–∞.
- Cache ‚Äî –∫—ç—à –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—â–∏–π –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ: Singleton –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ—Å—Ç—ã–º –æ–±—ä–µ–∫—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É, –Ω–æ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–æ–∂–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.

–î–∞–≤–∞–π—Ç–µ —Å–æ–±–µ—Ä—ë–º –≤—Å—ë –≤–º–µ—Å—Ç–µ –∏ –ø–æ–∫–∞–∂–µ–º, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```csharp
// Singleton –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
public class Logger 
{ 
    private static readonly Lazy<Logger> _instance = 
        new(() => new Logger(), LazyThreadSafetyMode.ExecutionAndPublication);
    
    private Logger() 
    { 
        Console.WriteLine("Logger initialized"); 
    }
    
    public static Logger Instance => _instance.Value;
    
    public void Log(string message) 
    { 
        Console.WriteLine($"[{DateTime.Now:HH:mm:ss}] {message}"); 
    }
}

// Singleton –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
public class AppSettings 
{ 
    private static readonly Lazy<AppSettings> _instance = 
        new(() => new AppSettings(), LazyThreadSafetyMode.ExecutionAndPublication);
    
    private readonly Dictionary<string, string> _settings;
    
    private AppSettings() 
    { 
        _settings = new Dictionary<string, string>
        { 
            { "DatabaseUrl", "Server=localhost;Database=MyApp" },
            { "ApiKey", "secret123" }
        };
    }
    
    public static AppSettings Instance => _instance.Value;
    
    public string GetSetting(string key) => _settings[key];
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ main:
static void Main()
{
    // –ü–µ—Ä–≤—ã–π –ø–æ—Ç–æ–∫
    var task1 = Task.Run(() =>
    {
        Logger.Instance.Log("Task 1: Starting");
        var dbUrl = AppSettings.Instance.GetSetting("DatabaseUrl");
        Logger.Instance.Log($"Task 1: Got DB URL = {dbUrl}");
    });

    // –í—Ç–æ—Ä–æ–π –ø–æ—Ç–æ–∫
    var task2 = Task.Run(() =>
    {
        Logger.Instance.Log("Task 2: Starting");
        var apiKey = AppSettings.Instance.GetSetting("ApiKey");
        Logger.Instance.Log($"Task 2: Got API Key = {apiKey}");
    });

    Task.WaitAll(task1, task2);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç
    Logger.Instance.Log("Main: Verification");
    var logger1 = Logger.Instance;
    var logger2 = Logger.Instance;
    Logger.Instance.Log($"Same logger? {ReferenceEquals(logger1, logger2)}"); // true

    var settings1 = AppSettings.Instance;
    var settings2 = AppSettings.Instance;
    Logger.Instance.Log($"Same settings? {ReferenceEquals(settings1, settings2)}"); // true
}

/* –í—ã–≤–æ–¥
Logger initialized
[HH:mm:ss] Task 1: Starting
[HH:mm:ss] Task 1: Got DB URL = Server=localhost;Database=MyApp
[HH:mm:ss] Task 2: Starting
[HH:mm:ss] Task 2: Got API Key = secret123
[HH:mm:ss] Main: Verification
[HH:mm:ss] Same logger? True
[HH:mm:ss] Same settings? True
*/

```

–ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å:
1.  **–ö–æ–≥–¥–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–∞–∫–æ–≥–æ-—Ç–æ –∫–ª–∞—Å—Å–∞, –¥–æ—Å—Ç—É–ø–Ω—ã–π –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—â–∏–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã).**
–û–¥–∏–Ω–æ—á–∫–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤—Å–µ —Å–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, –∫—Ä–æ–º–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –ª–∏–±–æ —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç, –ª–∏–±–æ –æ—Ç–¥–∞—ë—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç, –µ—Å–ª–∏ –æ–Ω —É–∂–µ –±—ã–ª —Å–æ–∑–¥–∞
2. –ö–æ–≥–¥–∞ –≤–∞–º —Ö–æ—á–µ—Ç—Å—è –∏–º–µ—Ç—å –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –ø–µ—Ä**–µ–º–µ–Ω–Ω—ã–º–∏.**
–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –û–¥–∏–Ω–æ—á–∫–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–∏–∫–∞–∫–æ–π –¥—Ä—É–≥–æ–π –∫–æ–¥ –Ω–µ –∑–∞–º–µ–Ω–∏—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞, –ø–æ—ç—Ç–æ–º—É –≤—ã –≤—Å–µ–≥–¥–∞ —É–≤–µ—Ä–µ–Ω—ã –≤ –Ω–∞–ª–∏—á–∏–∏ –ª–∏—à—å –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞-–æ–¥–∏–Ω–æ—á–∫–∏.
–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —ç—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏ –ø–æ–∑–≤–æ–ª–∏—Ç—å –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤-–æ–¥–∏–Ω–æ—á–µ–∫, –ø–æ–º–µ–Ω—è–≤ –∫–æ–¥ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (–º–µ—Ç–æ–¥ getInstance).

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ—Ä–æ–∂–¥–∞—é—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

| –ü–∞—Ç—Ç–µ—Ä–Ω | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ | –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ |
|---------|------------|-------------------|--------------|------------|
| **Factory Method** | –î–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–¥–∫–ª–∞—Å—Å–∞–º | –ö–æ–≥–¥–∞ –∑–∞—Ä–∞–Ω–µ–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω —Ç–∏–ø —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ | –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å, —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ OCP | –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª–∞—Å—Å–æ–≤ |
| **Abstract Factory** | –°–æ–∑–¥–∞—ë—Ç —Å–µ–º–µ–π—Å—Ç–≤–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ | –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥—Ä—É–ø–ø—ã —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ | –ì–∞—Ä–∞–Ω—Ç–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ | –°–ª–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ |
| **Builder** | –ü–æ—à–∞–≥–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ | –ö–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –∏–º–µ–µ—Ç –º–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | –ì–∏–±–∫–æ—Å—Ç—å, —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞ | –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª–∞—Å—Å–æ–≤ |
| **Prototype** | –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ | –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∑–∞—Ç—Ä–∞—Ç–Ω–æ | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ—Å—Ç—å –≥–ª—É–±–æ–∫–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è |
| **Singleton** | –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ | –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç | –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –¥–æ—Å—Ç—É–ø | –ó–∞—Ç—Ä—É–¥–Ω—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É –ø–∞—Ç—Ç–µ—Ä–Ω–∞

1. **–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç —Å –≤—ã–±–æ—Ä–æ–º —Ç–∏–ø–∞** ‚Üí Factory Method
2. **–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–µ–º–µ–π—Å—Ç–≤–æ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤** ‚Üí Abstract Factory  
3. **–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –∏–º–µ–µ—Ç —Å–ª–æ–∂–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** ‚Üí Builder
4. **–ï—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∑–∞—Ç—Ä–∞—Ç–Ω–æ –∏ –º–æ–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å** ‚Üí Prototype
5. **–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä** ‚Üí Singleton

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–æ—Ä–æ–∂–¥–∞—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –°–Ω–∏–∑–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –∫–æ–¥–∞
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É
- –£–ª—É—á—à–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
- –°–¥–µ–ª–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π

–í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω—ã ‚Äî —ç—Ç–æ –Ω–µ –¥–æ–≥–º–∞, –∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è —Ç–∏–ø–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ, –∫–æ–≥–¥–∞ –æ–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–µ—à–∞—é—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É –≤ –≤–∞—à–µ–º –∫–æ–¥–µ, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ä–∞–¥–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞.



---

## –ì–ª–æ—Å—Å–∞—Ä–∏–π —Ç–µ—Ä–º–∏–Ω–æ–≤

| –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —Ç–µ—Ä–º–∏–Ω | –†—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------------|-----------------|----------|
| Creational Patterns | –ü–æ—Ä–æ–∂–¥–∞—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã | –ü–∞—Ç—Ç–µ—Ä–Ω—ã, —Ä–µ—à–∞—é—â–∏–µ –∑–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ |
| Factory Method | –§–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ | –î–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–¥–∫–ª–∞—Å—Å–∞–º |
| Abstract Factory | –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ | –°–æ–∑–¥–∞—ë—Ç —Å–µ–º–µ–π—Å—Ç–≤–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ |
| Builder | –°—Ç—Ä–æ–∏—Ç–µ–ª—å | –ü–æ—à–∞–≥–æ–≤–æ —Å–æ–∑–¥–∞—ë—Ç —Å–ª–æ–∂–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã |
| Prototype | –ü—Ä–æ—Ç–æ—Ç–∏–ø | –°–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç—ã –ø—É—Ç—ë–º –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| Singleton | –û–¥–∏–Ω–æ—á–∫–∞ | –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ |
| Product | –ü—Ä–æ–¥—É–∫—Ç | –°–æ–∑–¥–∞–≤–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç |
| Creator | –°–æ–∑–¥–∞—Ç–µ–ª—å | –ö–ª–∞—Å—Å, —Å–æ–∑–¥–∞—é—â–∏–π –ø—Ä–æ–¥—É–∫—Ç—ã |
| Fluent Interface | –¢–µ–∫—É—á–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –°—Ç–∏–ª—å API —Å —Ü–µ–ø–æ—á–∫–æ–π –≤—ã–∑–æ–≤–æ–≤ |
| Deep Copy | –ì–ª—É–±–æ–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ –≤—Å–µ–º–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ |
| Shallow Copy | –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–æ–∫ |
| Lazy Initialization | –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è | –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ |
| Thread-Safety | –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ |

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

–î–ª—è —É–≥–ª—É–±–ª—ë–Ω–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –ø–æ—Ä–æ–∂–¥–∞—é—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–ö–Ω–∏–≥–∏:**
   - "Design Patterns: Elements of Reusable Object-Oriented Software" (Gang of Four)
   - "Head First Design Patterns" (Freeman & Robson)
   - "–ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è" (–≠. –ì–∞–º–º–∞, –†. –•–µ–ª–º, –†. –î–∂–æ–Ω—Å–æ–Ω, –î–∂. –í–ª–∏—Å—Å–∏–¥–µ—Å)

2. **–û–Ω–ª–∞–π–Ω-—Ä–µ—Å—É—Ä—Å—ã:**
   - [Refactoring.Guru](https://refactoring.guru/ru/design-patterns/creational-patterns)
   - [Microsoft Docs: Design Patterns](https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/)
   - [SourceMaking](https://sourcemaking.com/design_patterns)

3. **–ü—Ä–∞–∫—Ç–∏–∫–∞:**
   - –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–∞–∂–¥—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö (.NET, Entity Framework –∏ –¥—Ä.)
   - –£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ code review –∏ –æ–±—Å—É–∂–¥–∞–π—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

**–ü–æ–º–Ω–∏—Ç–µ:** –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å –ø—Ä–∞–∫—Ç–∏–∫–æ–π. –ß–µ–º –±–æ–ª—å—à–µ –≤—ã –±—É–¥–µ—Ç–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å —ç—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, —Ç–µ–º –ª—É—á—à–µ –±—É–¥–µ—Ç–µ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–æ–≥–¥–∞ –∏ –∫–∞–∫ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

