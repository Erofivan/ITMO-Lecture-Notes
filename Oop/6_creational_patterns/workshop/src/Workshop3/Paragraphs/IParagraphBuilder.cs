// Интерфейсы для построения параграфов с использованием паттерна Builder
//
// Роль в проекте:
// Определяют контракт для пошагового создания сложных объектов параграфов.
// Разделение на два интерфейса создает типобезопасный fluent API, который
// гарантирует правильный порядок вызовов методов.
//
// Применяемый паттерн:
// Builder (Строитель) - для пошагового конструирования сложных объектов
//
// Зачем два интерфейса:
// Разделение на IParagraphTitleSelector и IParagraphBuilder реализует концепцию
// "Fluent Builder with Type State". Это гарантирует на уровне типов, что:
// 1. Первым вызовом обязательно будет WithTitle() (через IParagraphTitleSelector)
// 2. Только после установки заголовка доступны методы для добавления содержимого
//
// Такой подход предотвращает создание параграфов без заголовка на этапе компиляции,
// а не в runtime. Это делает API более безопасным и понятным.
//
// Связь с другими компонентами:
// - Реализуется в ParagraphBuilderBase и его наследниках
// - Создается через IParagraphBuilderFactory
// - Используется в Program.cs для построения параграфов
namespace Workshop3.Paragraphs;

// Интерфейс для установки обязательного заголовка параграфа
//
// Это первый этап в цепочке построения параграфа. После вызова WithTitle()
// возвращается IParagraphBuilder, который позволяет продолжить настройку.
//
// Паттерн "Type State" в действии:
// Возвращая IParagraphBuilder, а не себя, метод WithTitle() "переводит" объект
// в следующее состояние построения, где доступны другие методы.
public interface IParagraphTitleSelector
{
    // Устанавливает заголовок параграфа и переходит к следующему этапу построения
    //
    // Параметры:
    //   title - объект для отображения в качестве заголовка
    //
    // Возвращает: IParagraphBuilder для продолжения настройки параграфа
    //
    // Это обязательный первый шаг. Все параграфы должны иметь заголовок.
    IParagraphBuilder WithTitle(IRenderable title);
}

// Интерфейс для настройки содержимого и завершения построения параграфа
//
// Предоставляет методы для добавления содержимого, установки футера и
// финального создания объекта параграфа.
//
// Паттерн Builder:
// Методы AddContent() и WithFooter() возвращают IParagraphBuilder, что позволяет
// создавать цепочки вызовов (fluent interface):
//   builder.WithTitle(...).AddContent(...).AddContent(...).WithFooter(...).Build()
public interface IParagraphBuilder
{
    // Добавляет элемент содержимого в параграф
    //
    // Параметры:
    //   content - объект для добавления в тело параграфа
    //
    // Возвращает: себя (this) для поддержки цепочки вызовов
    //
    // Метод может вызываться многократно для добавления нескольких элементов содержимого.
    // Каждый вызов добавляет новый элемент, который будет отображен на отдельной строке.
    IParagraphBuilder AddContent(IRenderable content);

    // Устанавливает футер (подвал) параграфа
    //
    // Параметры:
    //   footer - объект для отображения внизу параграфа
    //
    // Возвращает: себя (this) для поддержки цепочки вызовов
    //
    // Футер является необязательным элементом. Если не вызвать этот метод,
    // параграф будет создан без футера.
    IParagraphBuilder WithFooter(IRenderable footer);

    // Завершает процесс построения и создает финальный объект параграфа
    //
    // Возвращает: готовый объект IParagraph
    //
    // Это терминальная операция в цепочке построения. После ее вызова
    // builder больше не используется. Метод проверяет наличие всех
    // обязательных параметров (заголовка) и создает соответствующий
    // объект параграфа (DefaultParagraph или StyledParagraph).
    IParagraph Build();
}
